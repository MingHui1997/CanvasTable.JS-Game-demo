'use strict';var CT_dialog;var CT_dialogBack;var CT_dialogTitle;var CT_dialogTextbox;var CT_dialogButton;function CT_DialogCreate(val,name,max,pass,numb){var font_s=parseInt(CT_ClientH*.5*.1);if(CT_DialogShow===0){CT_dialogBack=document.createElement("div");CT_dialogBack.style.position="absolute";CT_dialogBack.style.width="100%";CT_dialogBack.style.height="100%";CT_dialogBack.style.left="0%";CT_dialogBack.style.top="0%";CT_dialogBack.style.backgroundColor="#d0cfcb7f";document.body.appendChild(CT_dialogBack);CT_dialog=document.createElement("div");CT_dialog.style.position="absolute";CT_dialog.style.width="80%";CT_dialog.style.height="50%";CT_dialog.style.left="10%";CT_dialog.style.top="25%";CT_dialog.style.backgroundColor="#ece9d8";CT_dialog.style.border="solid";CT_dialog.style.borderColor="#aca899";CT_dialogBack.appendChild(CT_dialog);CT_dialogTitle=document.createElement("div");CT_dialogTitle.textContent=name;CT_dialogTitle.style.position="absolute";CT_dialogTitle.style.left="10%";CT_dialogTitle.style.top="5%";CT_dialogTitle.style.font=String(font_s)+"px Arial";CT_dialog.appendChild(CT_dialogTitle);CT_dialogTextbox=document.createElement("input");CT_dialogTextbox.style.position="absolute";CT_dialogTextbox.style.left="10%";CT_dialogTextbox.style.top="25%";CT_dialogTextbox.style.width="80%";CT_dialogTextbox.style.height="15%";CT_dialogTextbox.style.font=String(font_s)+"px Arial";CT_dialogTextbox.type="text";if(pass===1)CT_dialogTextbox.type="password";if(numb===1)CT_dialogTextbox.type="number";CT_dialogTextbox.value=val;CT_dialogTextbox.maxLength=max;CT_dialog.appendChild(CT_dialogTextbox);CT_dialogButton=document.createElement("input");CT_dialogButton.type="button";CT_dialogButton.style.position="absolute";CT_dialogButton.style.left="35%";CT_dialogButton.style.top="50%";CT_dialogButton.style.width="30%";CT_dialogButton.style.height="20%";CT_dialogButton.style.font=String(font_s)+"px Arial";CT_dialogButton.value="\u2714";CT_dialog.appendChild(CT_dialogButton);CT_dialogButton.onclick=function(){CT_DialogReturn()};CT_DialogShow=1}}function CT_DialogDestroy(){if(CT_DialogShow===1){document.body.removeChild(CT_dialogBack);CT_dialog=null;CT_DialogShow=0}}function CT_DialogReturn(){if(CT_ContainerUI[CT_Dialog_Index]!=null)CT_ContainerUI[CT_Dialog_Index][14]=CT_dialogTextbox.value;CT_DialogDestroy();CT_Repaint=1}"use strict";var CT_ContainerDraw=[];var CT_ContainerDrawLength=0;var CT_DrawLayer=0;function CT_DrawRender(l){var vx=CT_ViewX;var vy=CT_ViewY;var i;for(i=0;i<CT_ContainerDrawLength;i++)if(CT_ContainerDraw[i]!=null){var draw_l=CT_ContainerDraw[i][1];if(draw_l===l){var draw_type=CT_ContainerDraw[i][0];if(draw_type===1){var x=CT_ContainerDraw[i][2];var y=CT_ContainerDraw[i][3];var w=CT_ContainerDraw[i][4];var h=CT_ContainerDraw[i][5];var c=CT_ContainerDraw[i][6];var f=CT_ContainerDraw[i][7];CTBCanvas_Rectangle(x-vx,y-vy,w,h,c,f)}if(draw_type===2){var x1=CT_ContainerDraw[i][2];var y1=CT_ContainerDraw[i][3];var x2=CT_ContainerDraw[i][4];var y2=CT_ContainerDraw[i][5];var w=CT_ContainerDraw[i][6];var c=CT_ContainerDraw[i][7];CTBCanvas_Line(x1-vx,y1-vy,x2-vx,y2-vy,w,c)}if(draw_type===3){var x=CT_ContainerDraw[i][2];var y=CT_ContainerDraw[i][3];var r=CT_ContainerDraw[i][4];var c=CT_ContainerDraw[i][5];var f=CT_ContainerDraw[i][6];CTBCanvas_Circle(x-vx,y-vy,r,c,f)}if(draw_type===4){var x=CT_ContainerDraw[i][2];var y=CT_ContainerDraw[i][3];var s=CT_ContainerDraw[i][4];var c=CT_ContainerDraw[i][5];var str=CT_ContainerDraw[i][6];CTBCanvas_String(x-vx,y-vy,s,c,str)}if(draw_type===5){var x=CT_ContainerDraw[i][2];var y=CT_ContainerDraw[i][3];var img=CT_ContainerDraw[i][4];CTBCanvas_Image(x-vx,y-vy,img)}if(draw_type===6){var x=CT_ContainerDraw[i][2];var y=CT_ContainerDraw[i][3];var img=CT_ContainerDraw[i][4];var ix=CT_ContainerDraw[i][5];var iy=CT_ContainerDraw[i][6];var iw=CT_ContainerDraw[i][7];var ih=CT_ContainerDraw[i][8];CTBCanvas_ImagePart(x-vx,y-vy,img,ix,iy,iw,ih)}if(draw_type===7){var x1=CT_ContainerDraw[i][2];var y1=CT_ContainerDraw[i][3];var x2=CT_ContainerDraw[i][4];var y2=CT_ContainerDraw[i][5];var x3=CT_ContainerDraw[i][6];var y3=CT_ContainerDraw[i][7];var w=CT_ContainerDraw[i][8];var c=CT_ContainerDraw[i][9];CTBCanvas_Curve(x1-vx,y1-vy,x2-vx,y2-vy,x3-vx,y3-vy,w,c)}if(draw_type===8){var x1=CT_ContainerDraw[i][2];var y1=CT_ContainerDraw[i][3];var x2=CT_ContainerDraw[i][4];var y2=CT_ContainerDraw[i][5];var x3=CT_ContainerDraw[i][6];var y3=CT_ContainerDraw[i][7];var c=CT_ContainerDraw[i][8];var f=CT_ContainerDraw[i][9];CTBCanvas_Triangle(x1-vx,y1-vy,x2,y2,x3,y3,c,f)}if(draw_type===9){var x=CT_ContainerDraw[i][2];var y=CT_ContainerDraw[i][3];var a=CT_ContainerDraw[i][4];var t=CT_ContainerDraw[i][5];var font_img=CT_ContainerDraw[i][6];var font_charnum=CT_ContainerDraw[i][7];var font_chargap=CT_ContainerDraw[i][8];var font_charlist=CT_ContainerDraw[i][9];var font_glyphlist=CT_ContainerDraw[i][10];CTBCanvas_ImgString(x-vx,y-vy,a,t,font_img,font_charnum,font_chargap,font_charlist,font_glyphlist)}}}}"use strict";function CTBCanvas_Clear(){CT_BCtx.clearRect(0,0,CT_CanvasW,CT_CanvasH)}function CTBCanvas_Output(){CT_Ctx.clearRect(0,0,CT_CanvasW,CT_CanvasH);CT_Ctx.drawImage(CT_BufferCanvas,0,0)}function CTBCanvas_Rectangle(x,y,w,h,c,f){CT_BCtx.beginPath();if(f===1){CT_BCtx.fillStyle=c;CT_BCtx.fillRect(x,y,w,h)}if(f===0){CT_BCtx.strokeStyle=c;CT_BCtx.lineWidth=1;CT_BCtx.strokeRect(x+.5,y+.5,w-1,h-1)}CT_BCtx.closePath()}function CTBCanvas_Line(x1,y1,x2,y2,w,c){CT_BCtx.beginPath();CT_BCtx.strokeStyle=c;CT_BCtx.lineWidth=w;var line_move=w*.5;if(x1===x2){CT_BCtx.moveTo(x1+line_move,y1);CT_BCtx.lineTo(x2+line_move,y2)}if(y1===y2){CT_BCtx.moveTo(x1,y1+line_move);CT_BCtx.lineTo(x2,y2+line_move)}if(x1!==x2&&y1!==y2){CT_BCtx.moveTo(x1,y1);CT_BCtx.lineTo(x2,y2)}CT_BCtx.stroke();CT_BCtx.closePath()}function CTBCanvas_Circle(x,y,r,c,f){CT_BCtx.beginPath();if(f===1){CT_BCtx.fillStyle=c;CT_BCtx.arc(x,y,r,0,Math.PI*2);CT_BCtx.fill()}if(f===0){CT_BCtx.beginPath();CT_BCtx.strokeStyle=c;CT_BCtx.lineWidth=1;CT_BCtx.arc(x,y,r,0,Math.PI*2);CT_BCtx.arc(x,y,r,0,Math.PI*2);CT_BCtx.stroke()}CT_BCtx.closePath()}function CTBCanvas_String(x,y,s,c,t){CT_BCtx.font=String(s)+"px Def";CT_BCtx.fillStyle=c;CT_BCtx.fillText(t,x,y+s-2)}function CTBCanvas_Image(x,y,i){CT_BCtx.drawImage(CT_ContainerResource[i],x,y)}function CTBCanvas_ImagePart(x,y,i,ix,iy,iw,ih){CT_BCtx.drawImage(CT_ContainerResource[i],ix,iy,iw,ih,x,y,iw,ih)}function CTBCanvas_Curve(x1,y1,x2,y2,x3,y3,w,c){CT_BCtx.beginPath();CT_BCtx.strokeStyle=c;CT_BCtx.lineWidth=w;CT_BCtx.moveTo(x1,y1);CT_BCtx.quadraticCurveTo(x2,y2,x3,y3);CT_BCtx.stroke();CT_BCtx.closePath()}function CTBCanvas_Triangle(x1,y1,x2,y2,x3,y3,c,f){if(f===0){CT_BCtx.beginPath();CT_BCtx.strokeStyle=c;CT_BCtx.moveTo(x1+.5,y1+.5);CT_BCtx.lineTo(x2+.5,y2+.5);CT_BCtx.lineTo(x3+.5,y3+.5);CT_BCtx.lineTo(x1+.5,y1+.5);CT_BCtx.stroke();CT_BCtx.closePath()}if(f===1){CT_BCtx.beginPath();CT_BCtx.fillStyle=c;CT_BCtx.moveTo(x1,y1);CT_BCtx.lineTo(x2,y2);CT_BCtx.lineTo(x3,y3);CT_BCtx.lineTo(x1,y1);CT_BCtx.fill();CT_BCtx.closePath()}}"use strict";function CTBCanvas_ImgString(x,y,a,str,font_img,font_number,font_gap,font_charlist,font_glyphlist){var _char="";var list_char="";var str_l=str.length;var offset=1;var str_i=0;var cx=x;while(str_i<str_l){var find_char=0;var tree_l=font_number;var tree_li=0;var tree_le=parseInt(tree_l/2-1);var tree_ri=tree_le+1;var tree_re=tree_l-1;var tree_end=0;_char=str[str_i];while(tree_end<2){if(font_charlist[tree_li]===_char){var gx=font_glyphlist[tree_li][0];var gy=font_glyphlist[tree_li][1];var gw=font_glyphlist[tree_li][2];var gh=font_glyphlist[tree_li][3];CTBCanvas_Glyph(cx,y,font_img,gx,gy,gw,gh,a);cx+=gw+font_gap;find_char=1;break}if(font_charlist[tree_ri]===_char){var gx=font_glyphlist[tree_ri][0];var gy=font_glyphlist[tree_ri][1];var gw=font_glyphlist[tree_ri][2];var gh=font_glyphlist[tree_ri][3];CTBCanvas_Glyph(cx,y,font_img,gx,gy,gw,gh,a);cx+=gw+font_gap;find_char=1;break}if(tree_li<tree_le)tree_li++;else tree_end++;if(tree_ri<tree_re)tree_ri++;else tree_end++}str_i+=offset;_char="";if(find_char===0)cprint("ERROR : Not find char in charlist.")}}function CTBCanvas_Glyph(x,y,i,ix,iy,iw,ih,a){CT_BCtx.globalAlpha=a/255;CT_BCtx.drawImage(CT_ContainerResource[i],ix,iy,iw,ih,x,y,iw,ih);CT_BCtx.globalAlpha=1}function CT_ImgStringMeasure(font_number,font_gap,font_charlist,font_glyphlist,str){var _char="";var list_char="";var str_l=str.length;var offset=1;var str_i=0;var gw=0;var imgstr_w=0;if(str_l===0)return 0;while(str_i<str_l){_char=str[str_i];var tree_l=font_number;var tree_li=0;var tree_le=parseInt(tree_l/2-1);var tree_ri=tree_le+1;var tree_re=tree_l-1;var tree_end=0;while(tree_end<2){if(font_charlist[tree_li]===_char){gw=font_glyphlist[tree_li][2];imgstr_w+=gw+font_gap;break}if(font_charlist[tree_ri]===_char){gw=font_glyphlist[tree_ri][2];imgstr_w+=gw+font_gap;break}if(tree_li<tree_le)tree_li++;else tree_end++;if(tree_ri<tree_re)tree_ri++;else tree_end++}str_i+=offset;_char=""}if(imgstr_w>1)imgstr_w-=font_gap;return imgstr_w}"use strict";var CT_Canvas;var CT_BufferCanvas;var CT_BlendCanvas;var CT_ClientW;var CT_ClientH;var CT_CanvasW=0;var CT_CanvasH=0;var CT_CanvasCRX=1;var CT_CanvasCRY=1;var CT_Ctx;var CT_BCtx;var CT_BlCtx;var CT_Main;var CT_Loop;var CT_DEBUG_MODE=1;var CT_RUN_CONTEXT=0;var CT_SPLASH_SHOW=0;var CT_LOADBAR_SHOW=1;var CT_BROWSER=0;var CT_DEVICE=0;function CT_init(cw,ch,rl,main,loop,dm,sph,lbh,arg4,arg5,arg6,arg7,arg8,arg9,arg10,arg11,arg12,arg13,arg14,arg15,arg16){CT_CanvasW=cw;CT_CanvasH=ch;CT_DEBUG_MODE=dm;CT_SPLASH_SHOW=sph;CT_LOADBAR_SHOW=lbh;CT_Main=main;CT_Loop=loop;cprint("CanvasTable.JS Version : 1.X");cprint("CanvasTable.JS Build : 2023/02/03");cprint("----------Init----------");CT_PreferSet();CT_CanvasCreate();CT_BufferCanvasCreate();CT_BlendCanvasCreate();cprint("------------------------");var rl_l=rl.length;var i;for(i=0;i<rl_l;i++)CT_ResourceList[i]=[rl[i]];CT_ResourceLoadStart()}function CT_PreferSet(){if(CT_DEBUG_MODE===1)cprint("Debug mode : Enable");CT_BROWSER=CT_BrowserCheck();CT_DEVICE=CT_DeviceCheck();CT_RUN_CONTEXT=CT_RunContextCheck();if(CT_RUN_CONTEXT===0)cprint("Run context : Local");if(CT_RUN_CONTEXT===1)cprint("Run context : Web");if(CT_BROWSER===1)cprint("Browser : Firefox");if(CT_BROWSER===2)cprint("Browser : Chrome");if(CT_BROWSER===3)cprint("Browser : Safari");if(CT_BROWSER===4)cprint("Browser : Edge");if(CT_BROWSER===0)cprint("Browser : Other");if(CT_DEVICE===0)cprint("Device : Table");if(CT_DEVICE===1)cprint("Device : Mobile")}function CT_BrowserCheck(){var browser=0;var agent=navigator.userAgent;var firefox_check=agent.indexOf("Firefox",0);var chrome_check=agent.indexOf("Chrome",0);var safari_check=agent.indexOf("Safari",0);var edge_check=agent.indexOf("Edg",0);if(chrome_check>=0&&safari_check>=0){if(chrome_check<safari_check)browser=2;if(chrome_check>safari_check)browser=3}if(firefox_check>=0)browser=1;if(edge_check>=0)browser=4;return browser}function CT_DeviceCheck(){var device=0;var agent=navigator.userAgent;var mobile_check=agent.indexOf("Mobile",0);if(mobile_check>=0)device=1;return device}function CT_RunContextCheck(){var runc=0;var url=window.location.href;var url_file=url.lastIndexOf("file://");if(url_file===-1)runc=1;return runc}function CT_CanvasCreate(){CT_Canvas=document.createElement("canvas");if(CT_CanvasW>0&&CT_CanvasH>0){CT_Canvas.style.background="#000000";CT_Canvas.width=CT_CanvasW;CT_Canvas.height=CT_CanvasH;CT_Canvas.style.position="absolute";CT_Canvas.style.left="0px";CT_Canvas.style.top="0px";CT_ClientW=document.documentElement.clientWidth;CT_ClientH=document.documentElement.clientHeight;CT_Canvas.style.width=String(CT_ClientW)+"px";CT_Canvas.style.height=String(CT_ClientH)+"px";CT_CanvasCRX=CT_CanvasW/CT_ClientW;CT_CanvasCRY=CT_CanvasH/CT_ClientH;document.body.appendChild(CT_Canvas);cprint("Created canvas : width\x3d"+String(CT_CanvasW)+" height\x3d"+String(CT_CanvasH))}else cprint("ERROR : Unable to create canvas.");CT_Ctx=CT_Canvas.getContext("2d")}function CT_BufferCanvasCreate(){CT_BufferCanvas=document.createElement("canvas");if(CT_CanvasW>0&&CT_CanvasH>0){CT_BufferCanvas.width=CT_CanvasW;CT_BufferCanvas.height=CT_CanvasH}CT_BCtx=CT_BufferCanvas.getContext("2d")}function CT_BlendCanvasCreate(){CT_BlendCanvas=document.createElement("canvas");CT_BlendCanvas.width=1;CT_BlendCanvas.height=1;CT_BlCtx=CT_BlendCanvas.getContext("2d")}"use strict";var CT_ContainerKeyState=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var CT_ContainerKeyDown=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var CT_ContainerKeyUp=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var CT_ContainerMKeyState=[0,0,0];var CT_ContainerMKeyDown=[0,0,0];var CT_ContainerMKeyUp=[0,0,0];var CT_ContainerMWheel=[0,0];var CT_MousePosX=0;var CT_MousePosY=0;var CT_TouchSlipp=0;var CT_KeyChar="";var CT_ContainerTouchKey=[];document.addEventListener("keydown",function(event){CT_ContainerKeyState[event.keyCode]=1;if(CT_ContainerKeyDown[event.keyCode]===0)CT_ContainerKeyDown[event.keyCode]=1;if(event.keyCode===8)CT_KeyChar="\b"},false);document.addEventListener("keyup",function(event){CT_ContainerKeyState[event.keyCode]=0;CT_ContainerKeyDown[event.keyCode]=0;CT_ContainerKeyUp[event.keyCode]=1},false);document.addEventListener("keypress",function(event){if(event.which!==0&&event.which!==8)CT_KeyChar=String.fromCharCode(event.which)},false);document.addEventListener("mouseup",function(event){CT_ContainerMKeyState[event.button]=0;CT_ContainerMKeyUp[event.button]=1},false);document.addEventListener("mousedown",function(event){CT_ContainerMKeyState[event.button]=1;CT_ContainerMKeyDown[event.button]=1},false);document.addEventListener("mousemove",function(event){CT_MousePosX=parseInt(event.pageX*CT_CanvasCRX);CT_MousePosY=parseInt(event.pageY*CT_CanvasCRY)},false);document.addEventListener("DOMMouseScroll",function(event){if(event.detail<0)CT_ContainerMWheel[0]=1;if(event.detail>0)CT_ContainerMWheel[1]=1},false);document.addEventListener("mousewheel",function(event){if(event.wheelDelta>0)CT_ContainerMWheel[0]=1;if(event.wheelDelta<0)CT_ContainerMWheel[1]=1},false);document.addEventListener("contextmenu",function(event){event.preventDefault()},false);window.addEventListener("resize",function(event){CT_ClientW=document.documentElement.clientWidth;CT_ClientH=document.documentElement.clientHeight;CT_Canvas.style.width=String(CT_ClientW)+"px";CT_Canvas.style.height=String(CT_ClientH)+"px";CT_CanvasCRX=CT_CanvasW/CT_ClientW;CT_CanvasCRY=CT_CanvasH/CT_ClientH},false);document.addEventListener("touchstart",function(event){var toulist_e=event.touches.length-1;var touches_l=event.touches.length;var t_x=event.touches[toulist_e].pageX;var t_y=event.touches[toulist_e].pageY;CT_MousePosX=parseInt(t_x*CT_CanvasCRX);CT_MousePosY=parseInt(t_y*CT_CanvasCRY);CT_TouchSlipp=CT_MousePosY;CT_ContainerMKeyState[0]=1;CT_ContainerMKeyDown[0]=1;var i;var i2;for(i=0;i<32;i++)if(CT_ContainerTouchKey[i]!=null){var touchkey_x=CT_ContainerTouchKey[i][0];var touchkey_y=CT_ContainerTouchKey[i][1];var touchkey_w=CT_ContainerTouchKey[i][2];var touchkey_h=CT_ContainerTouchKey[i][3];var touchkey_key=CT_ContainerTouchKey[i][4];for(i2=0;i2<touches_l;i2++){var touch_x=parseInt(event.touches[i2].pageX*CT_CanvasCRX);var touch_y=parseInt(event.touches[i2].pageY*CT_CanvasCRY);if(touch_x>=touchkey_x&&touch_y>=touchkey_y&&touch_x<touchkey_x+touchkey_w&&touch_y<touchkey_y+touchkey_h){CT_ContainerKeyState[touchkey_key]=1;CT_ContainerKeyDown[touchkey_key]=1;CT_KeyChar=String.fromCharCode(touchkey_key);break}}}},false);document.addEventListener("touchend",function(event){var toulist_e=event.changedTouches.length-1;var changed_l=event.changedTouches.length;var t_x=event.changedTouches[toulist_e].pageX;var t_y=event.changedTouches[toulist_e].pageY;CT_MousePosX=parseInt(t_x*CT_CanvasCRX);CT_MousePosY=parseInt(t_y*CT_CanvasCRY);CT_ContainerMKeyState[0]=0;CT_ContainerMKeyUp[0]=1;var i;var i2;for(i=0;i<32;i++)if(CT_ContainerTouchKey[i]!=null){var touchkey_x=CT_ContainerTouchKey[i][0];var touchkey_y=CT_ContainerTouchKey[i][1];var touchkey_w=CT_ContainerTouchKey[i][2];var touchkey_h=CT_ContainerTouchKey[i][3];var touchkey_key=CT_ContainerTouchKey[i][4];for(i2=0;i2<changed_l;i2++){var touch_x=parseInt(event.changedTouches[i2].pageX*CT_CanvasCRX);var touch_y=parseInt(event.changedTouches[i2].pageY*CT_CanvasCRY);if(touch_x>=touchkey_x&&touch_y>=touchkey_y&&touch_x<touchkey_x+touchkey_w&&touch_y<touchkey_y+touchkey_h){CT_ContainerKeyState[touchkey_key]=0;CT_ContainerKeyDown[touchkey_key]=0;CT_ContainerKeyUp[touchkey_key]=1}}}},false);document.addEventListener("touchmove",function(event){var toulist_e=event.touches.length-1;var touches_l=event.touches.length;var t_x=event.touches[toulist_e].pageX;var t_y=event.touches[toulist_e].pageY;CT_MousePosX=parseInt(t_x*CT_CanvasCRX);CT_MousePosY=parseInt(t_y*CT_CanvasCRY);if(CT_MousePosY<CT_TouchSlipp){CT_ContainerMWheel[0]=1;CT_TouchSlipp=CT_MousePosY}if(CT_MousePosY>CT_TouchSlipp){CT_ContainerMWheel[1]=1;CT_TouchSlipp=CT_MousePosY}var i;var i2;for(i=0;i<32;i++)if(CT_ContainerTouchKey[i]!=null){var touchkey_x=CT_ContainerTouchKey[i][0];var touchkey_y=CT_ContainerTouchKey[i][1];var touchkey_w=CT_ContainerTouchKey[i][2];var touchkey_h=CT_ContainerTouchKey[i][3];var touchkey_key=CT_ContainerTouchKey[i][4];var no_touch=1;for(i2=0;i2<touches_l;i2++){var touch_x=parseInt(event.touches[i2].pageX*CT_CanvasCRX);var touch_y=parseInt(event.touches[i2].pageY*CT_CanvasCRY);if(touch_x>=touchkey_x&&touch_y>=touchkey_y&&touch_x<touchkey_x+touchkey_w&&touch_y<touchkey_y+touchkey_h){CT_ContainerKeyState[touchkey_key]=1;if(CT_ContainerKeyDown[touchkey_key]===0)CT_ContainerKeyDown[touchkey_key]=1;CT_KeyChar=String.fromCharCode(touchkey_key);no_touch=0;break}}if(no_touch===1){CT_ContainerKeyState[touchkey_key]=0;CT_ContainerKeyDown[touchkey_key]=0;CT_ContainerKeyUp[touchkey_key]=1}}},false);function CT_TouchKeyRender(){var i;for(i=0;i<32;i++)if(CT_ContainerTouchKey[i]!=null){var tx=CT_ContainerTouchKey[i][0];var ty=CT_ContainerTouchKey[i][1];var ti=CT_ContainerTouchKey[i][5];if(ti!==-1)CTBCanvas_Image(tx,ty,ti)}}function CT_KeyboardReset(){var i;for(i=0;i<256;i++)if(CT_ContainerKeyDown[i]===1)CT_ContainerKeyDown[i]=2;var i2;for(i2=0;i2<256;i2++)CT_ContainerKeyUp[i2]=0;var i3;for(i3=0;i3<3;i3++)if(CT_ContainerMKeyDown[i3]===1)CT_ContainerMKeyDown[i3]=2;var i4;for(i4=0;i4<3;i4++)CT_ContainerMKeyUp[i4]=0;CT_ContainerMWheel[0]=0;CT_ContainerMWheel[1]=0;CT_KeyChar=""}"use strict";function audio_play(a,l){if(a!==-1){var res_type=CT_ResourceList[a][1];if(res_type===1){CT_ContainerResource[a].play();CT_ContainerResource[a].currentTime=0;CT_ContainerResource[a].loop=l}else cprint("ERROR : The resource index corresponding to the resource file is not a audio.")}}function audio_stop(a){if(a!==-1){var res_type=CT_ResourceList[a][1];if(res_type===1)CT_ContainerResource[a].pause();else cprint("ERROR : The resource index corresponding to the resource file is not a audio.")}}"use strict";function draw_set_layer(l){CT_DrawLayer=l}function draw_clear(){var i;for(i=0;i<CT_ContainerDrawLength;i++)if(CT_ContainerDraw[i]!=null){var draw_l=CT_ContainerDraw[i][1];if(draw_l===CT_DrawLayer)CT_ContainerDraw[i]=null}CT_Repaint=1}function draw_rect(x,y,w,h,c,f){var type=1;CT_ContainerDraw[CT_ContainerDrawLength]=[type,CT_DrawLayer,x,y,w,h,c,f];CT_ContainerDrawLength++;CT_Repaint=1}function draw_line(x1,y1,x2,y2,w,c){var type=2;CT_ContainerDraw[CT_ContainerDrawLength]=[type,CT_DrawLayer,x1,y1,x2,y2,w,c];CT_ContainerDrawLength++;CT_Repaint=1}function draw_circle(x,y,r,c,f){var type=3;CT_ContainerDraw[CT_ContainerDrawLength]=[type,CT_DrawLayer,x,y,r,c,f];CT_ContainerDrawLength++;CT_Repaint=1}function draw_string(x,y,s,c,t){var type=4;CT_ContainerDraw[CT_ContainerDrawLength]=[type,CT_DrawLayer,x,y,s,c,t];CT_ContainerDrawLength++;CT_Repaint=1}function draw_image(x,y,ii){var type=5;if(ii!==-1){var res_type=CT_ResourceList[ii][1];if(res_type===0){CT_ContainerDraw[CT_ContainerDrawLength]=[type,CT_DrawLayer,x,y,ii];CT_ContainerDrawLength++;CT_Repaint=1}else cprint("ERROR : The resource index corresponding to the resource file is not a image.")}}function draw_image_part(x,y,ii,ix,iy,iw,ih){var type=6;if(ii!==-1){var res_type=CT_ResourceList[ii][1];if(res_type===0){CT_ContainerDraw[CT_ContainerDrawLength]=[type,CT_DrawLayer,x,y,ii,ix,iy,iw,ih];CT_ContainerDrawLength++;CT_Repaint=1}else cprint("ERROR : The resource index corresponding to the resource file is not a image.")}}function draw_curve(x1,y1,x2,y2,x3,y3,w,c){var type=7;CT_ContainerDraw[CT_ContainerDrawLength]=[type,CT_DrawLayer,x1,y1,x2,y2,x3,y3,w,c];CT_ContainerDrawLength++;CT_Repaint=1}function draw_tri(x1,y1,x2,y2,x3,y3,c,f){var type=8;CT_ContainerDraw[CT_ContainerDrawLength]=[type,CT_DrawLayer,x1,y1,x2,y2,x3,y3,c,f];CT_ContainerDrawLength++;CT_Repaint=1}function draw_istring(x,y,a,font,t){var type=9;if(font.FontImg!==-1&&font.CharNumber>0&&font.CharList!=null&&font.GlyphList!=null){var font_img=font.FontImg;var font_charnum=font.CharNumber;var font_chargap=font.CharGap;var font_charlist=font.CharList;var font_glyphlist=font.GlyphList;CT_ContainerDraw[CT_ContainerDrawLength]=[type,CT_DrawLayer,x,y,a,t,font_img,font_charnum,font_chargap,font_charlist,font_glyphlist];CT_ContainerDrawLength++;CT_Repaint=1}}"use strict";function CTimgfont(){this.FontImg=0;this.CharNumber=0;this.CharGap=1;this.CharHeight=0;this.CharList=null;this.GlyphList=null}function istring_pxwidth(font,str){var is_w=0;if(font!=null){var font_charnum=font.CharNumber;var font_chargap=font.CharGap;var font_charlist=font.CharList;var font_glyphlist=font.GlyphList;is_w=CT_ImgStringMeasure(font_charnum,font_chargap,font_charlist,font_glyphlist,str);return is_w}return 0}"use strict";var key_a=65;var key_b=66;var key_c=67;var key_d=68;var key_e=69;var key_f=70;var key_g=71;var key_h=72;var key_i=73;var key_j=74;var key_k=75;var key_l=76;var key_m=77;var key_n=78;var key_o=79;var key_p=80;var key_q=81;var key_r=82;var key_s=83;var key_t=84;var key_u=85;var key_v=86;var key_w=87;var key_x=88;var key_y=89;var key_z=90;var key_1=49;var key_2=50;var key_3=51;var key_4=52;var key_5=53;var key_6=54;var key_7=55;var key_8=56;var key_9=57;var key_0=48;var key_f1=112;var key_f2=113;var key_f3=114;var key_f4=115;var key_f5=116;var key_f6=117;var key_f7=118;var key_f8=119;var key_f9=120;var key_f10=121;var key_f11=122;var key_f12=123;var key_up=38;var key_down=40;var key_left=37;var key_right=39;var key_esc=27;var key_tab=9;var key_cap=20;var key_shift=16;var key_ctrl=17;var key_alt=18;var key_space=32;var key_enter=13;var key_back=8;var key_num1=97;var key_num2=98;var key_num3=99;var key_num4=100;var key_num5=101;var key_num6=102;var key_num7=103;var key_num8=104;var key_num9=105;var key_num0=96;var mkey_left=0;var mkey_middle=1;var mkey_right=2;var mkey_up=0;var mkey_down=1;function keyboard_press(key){if(key>=0&&key<=255){if(CT_ContainerKeyState[key]===1)return 1}else cprint("ERROR : Key value beyond range.");return 0}function keyboard_down(key){if(key>=0&&key<=255){if(CT_ContainerKeyDown[key]===1)return 1}else cprint("ERROR : Key value beyond range.");return 0}function keyboard_up(key){if(key>=0&&key<=255){if(CT_ContainerKeyUp[key]===1)return 1}else cprint("ERROR : Key value beyond range.");return 0}function keyboard_char(){return CT_KeyChar}function mouse_press(mkey){if(mkey>=0&&mkey<=2){if(CT_ContainerMKeyState[mkey]===1)return 1}else cprint("ERROR : Mouse key value beyond range.");return 0}function mouse_down(mkey){if(mkey>=0&&mkey<=2){if(CT_ContainerMKeyDown[mkey]===1)return 1}else cprint("ERROR : Mouse key value beyond range.");return 0}function mouse_up(mkey){if(mkey>=0&&mkey<=2){if(CT_ContainerMKeyUp[mkey]===1)return 1}else cprint("ERROR : Mouse key value beyond range.");return 0}function mouse_x(){if(CT_MousePosX>CT_CanvasW)CT_MousePosX=CT_CanvasW;return CT_MousePosX}function mouse_y(){if(CT_MousePosY>CT_CanvasH)CT_MousePosY=CT_CanvasH;return CT_MousePosY}function mouse_wheel(mkey){if(mkey===0||mkey===1){if(CT_ContainerMWheel[mkey]===1)return 1}else cprint("ERROR : The mouse wheel direction is error.");return 0}function touchkey_create(id,x,y,w,h,key){if(CT_ContainerTouchKey[id]==null)if(w>0&&h>0&&key>=0&&key<=255)CT_ContainerTouchKey[id]=[x,y,w,h,key,-1];else cprint("ERROR : Unable to create TouchKey.");else cprint("ERROR : TouchKey have been created.")}function touchkey_delete(id){if(CT_ContainerTouchKey[id]!=null){if(CT_ContainerTouchKey[id][5]!==-1)CT_Repaint=1;CT_ContainerTouchKey[id]=null}else cprint("ERROR : The TouchKey is not created.")}function touchkey_image(id,img){if(CT_ContainerTouchKey[id]!=null){CT_ContainerTouchKey[id][5]=img;CT_Repaint=1}}"use strict";function cprint(str){if(CT_DEBUG_MODE===1)console.log(str)}function res(n){var i;for(i=0;i<CT_ResLength;i++)if(CT_ResourceList[i]!=null)if(CT_ResourceList[i][0]===n)return i;return-1}function color(r,g,b,a){var red="00";var green="00";var blue="00";var alpha="00";var color_code="#00000000";if(r>=0&&r<=255&&g>=0&&g<=255&&b>=0&&b<=255){if(r>=0&&r<=15)red="0"+r.toString(16);else red=r.toString(16);if(g>=0&&g<=15)green="0"+g.toString(16);else green=g.toString(16);if(b>=0&&b<=15)blue="0"+b.toString(16);else blue=b.toString(16);if(a>=0&&a<=15)alpha="0"+a.toString(16);else alpha=a.toString(16);color_code="#"+red+green+blue+alpha}else cprint("ERROR : The color value is error.");return color_code}function string_pxwidth(str,size){CT_Ctx.font=String(size)+"px Def";var text_w=CT_Ctx.measureText(str);return parseInt(text_w.width)}function view_set_x(x){if(CT_RunnerStatus===1)if(x!==CT_ViewLastX){CT_ViewX=x;CT_ViewLastX=x;CT_Repaint=1}}function view_set_y(y){if(CT_RunnerStatus===1)if(y!==CT_ViewLastY){CT_ViewY=y;CT_ViewLastY=y;CT_Repaint=1}}function view_x(){return CT_ViewX}function view_y(){return CT_ViewY}"use strict";function rectab_open(name){if(name!==""&&name.indexOf("/")===-1&&name.indexOf("*")===-1&&name.indexOf(":")===-1&&name.indexOf("?")===-1&&name.indexOf("\x3c")===-1&&name.indexOf("\x3e")===-1&&name.indexOf("|")===-1)if(CT_RectabName===""){CT_RectabData=localStorage.getItem(name);CT_RectabName=name}else cprint("ERROR : The record table is opened.");else cprint("ERROR : The record table name is error.")}function rectab_close(){CT_RectabData="";CT_RectabName=""}function rectab_delete(name){if(name!==""&&name.indexOf("/")===-1&&name.indexOf("*")===-1&&name.indexOf(":")===-1&&name.indexOf("?")===-1&&name.indexOf("\x3c")===-1&&name.indexOf("\x3e")===-1&&name.indexOf("|")===-1)if(CT_RectabName!==name)localStorage.setItem(name,"");else cprint("ERROR : The record table is opened.");else cprint("ERROR : The record table name is error.")}function rectab_write(title,text){if(title!==""&&text!=="")if(title.indexOf("\x26")===-1&&title.indexOf("\x3d")===-1)if(text.indexOf("\x26")===-1&&text.indexOf("\x3d")===-1)if(CT_RectabData===null||CT_RectabData==="")CT_RectabData=title+"\x3d"+text+"\x26";else{var title_pos=CT_RectabData.indexOf(title+"\x3d");if(title_pos===-1)CT_RectabData+=title+"\x3d"+text+"\x26";else{var data_pos=title_pos+title.length+1;var rectab_l=CT_RectabData.length;var data_end_pos=0;var i=data_pos;while(i<=rectab_l){if(CT_RectabData[i]==="\x26"){data_end_pos=i;break}i+=1}var replace_data=CT_RectabData.slice(data_pos,data_end_pos);var replace_part=title+"\x3d"+replace_data+"\x26";CT_RectabData=CT_RectabData.replace(replace_part,title+"\x3d"+text+"\x26")}}else cprint("ERROR : The record table text is error.");else cprint("ERROR : The record table title is error.")}function rectab_read(title){if(title!=="")if(title.indexOf("\x26")===-1&&title.indexOf("\x3d")===-1){if(CT_RectabData!==null&&CT_RectabData!==""){var title_pos=CT_RectabData.indexOf(title+"\x3d");if(title_pos!==-1){var data_pos=title_pos+title.length+1;var rectab_list_l=CT_RectabData.length;var data_end_pos=0;var i=data_pos;while(i<=rectab_list_l){if(CT_RectabData[i]==="\x26"){data_end_pos=i;break}i+=1}var re=CT_RectabData.slice(data_pos,data_end_pos);return re}}}else cprint("ERROR : The record table title is error.");return""}function rectab_null(title){if(title!=="")if(title.indexOf("\x26")===-1&&title.indexOf("\x3d")===-1){if(CT_RectabData!==null&&CT_RectabData!==""){var title_pos=CT_RectabData.indexOf(title+"\x3d");if(title_pos!==-1){var data_pos=title_pos+title.length+1;var rectab_l=CT_RectabData.length;var data_end_pos;var i=data_pos;while(i<=rectab_l){if(CT_RectabData[i]==="\x26"){data_end_pos=i;break}i+=1}var delete_data=CT_RectabData.slice(title_pos,data_end_pos+1);CT_RectabData=CT_RectabData.replace(delete_data,"")}}}else cprint("ERROR : The record table title is error.")}function rectab_save(){if(CT_RectabName!=="")localStorage.setItem(CT_RectabName,CT_RectabData)}"use strict";function CTscene(){this.width=960;this.height=540;this.grid_width=30;this.grid_height=30;this.tile_image=[];this.tile_offset=0;this.tile_map=[];this.sprite_map=function(){};this.type=-1}function scene_enter(scene){CT_RunnerStatus=0;CT_RunnerReset();if(scene.type===-1){CT_sceneWidth=scene.width;CT_sceneHeight=scene.height;CT_GridWidth=scene.grid_width;CT_GridHeight=scene.grid_height;CT_TileOffset=scene.tile_offset;if(CT_sceneWidth>0&&CT_sceneHeight>0&&CT_GridWidth>0&&CT_GridHeight)if(CT_sceneWidth>=CT_GridWidth&&CT_sceneHeight>=CT_GridHeight){var ti=scene.tile_image;var tm=scene.tile_map;var i;var tile_x=0;var tile_y=0;var tm_length=tm.length;for(i=0;i<tm_length;i++)if(tm[i]!=null){var tmlay_length=tm[i].length;var i2;for(i2=0;i2<tmlay_length;i2++){if(tile_y<CT_sceneHeight){if(tile_x<CT_sceneWidth){if(tm[i][i2]!==0){var ti_i=0;var ti_width=CT_ResourceList[ti[ti_i]][2];var ti_height=CT_ResourceList[ti[ti_i]][3];var ti_gxn=parseInt(ti_width/CT_GridWidth);var ti_gyn=parseInt(ti_height/CT_GridHeight);var ti_gx=-1;var ti_gy=0;var ti_index=tm[i][i2];var i3;for(i3=0;i3<ti_index;i3++){if(ti_gy<ti_gyn){if(ti_gx<ti_gxn)ti_gx+=1;if(ti_gx>=ti_gxn){ti_gx=0;ti_gy+=1}}if(ti_gy>=ti_gyn){ti_gx=0;ti_gy=0;ti_i++;ti_width=CT_ResourceList[ti[ti_i]][2];ti_height=CT_ResourceList[ti[ti_i]][3];ti_gxn=parseInt(ti_width/CT_GridWidth);ti_gyn=parseInt(ti_height/CT_GridHeight);if(ti_i>ti.length-1)cprint("ERROR : Beyond range of tile image group.")}}CT_TileBuild(i,tile_x,tile_y,ti[ti_i],ti_gx,ti_gy)}tile_x+=CT_GridWidth}if(tile_x>=CT_sceneWidth){tile_x=0;tile_y+=CT_GridHeight}}if(tile_y>=CT_sceneHeight){tile_x=0;tile_y=0}}}scene.sprite_map()}else cprint("ERROR : The size of the scene must be greater than the grid size.");else cprint("ERROR : Unable to enter the scene.")}else cprint("ERROR : The specified scene is not a scene object.")}function m(x,y,CTsprite){var id=CTsprite.id;if(CTsprite.type===-2){var image=CTsprite.image;var image_w=0;var image_h=0;var subimg_w=0;var subimg_h=0;var layer=CTsprite.layer;var subimg=CTsprite.subimg;var subimg_o=CTsprite.subimg_o;var subnum=CTsprite.subnum;var coll_t=CTsprite.collision_type;var coll_e=CTsprite.collision_edge;var box_x=CTsprite.cbox_x;var box_y=CTsprite.cbox_y;var box_w=CTsprite.cbox_w;var box_h=CTsprite.cbox_h;var box_cx=CTsprite.cbox_cx;var box_cy=CTsprite.cbox_cy;var box_r=CTsprite.cbox_r;var alpha=CTsprite.colora;var scale_x=CTsprite.scale_x;var scale_y=CTsprite.scale_y;var rotate=CTsprite.rotate;if(image!==-1){var res_type=CT_ResourceList[image][1];if(res_type===0){image_w=CT_ResourceList[image][2];image_h=CT_ResourceList[image][3];subimg_w=parseInt(image_w/subnum-subimg_o*2);subimg_h=image_h-subimg_o*2;if(box_x===0&&box_y===0&&box_w===0&&box_h===0){box_x=0;box_y=0;box_w=parseInt(subimg_w*scale_x);box_h=parseInt(subimg_h*scale_y)}if(box_cx===0&&box_cy===0&&box_r===0){box_cx=parseInt(subimg_w/2);box_cy=parseInt(subimg_h/2);box_r=parseInt(subimg_w*scale_x/2)}}else{image=-1;cprint("ERROR : The resource index corresponding to the resource file is not a image.")}}if(subnum>=1&&subimg<=subnum-1){var conspr_i=CT_ContainerSpriteLength;CT_ContainerSprite[conspr_i]=[id,layer,x,y,image,subimg,subnum,subimg_w,subimg_h,x,y,coll_t,coll_e,subimg_o,box_x,box_y,box_w,box_h,box_cx,box_cy,box_r,alpha,scale_x,scale_y,rotate];CT_TaskCreated(conspr_i,CTsprite.main,CTsprite.loop);CT_ContainerSpriteLength++}else cprint("ERROR : The sprite property have error.")}}function tile_create(l,x,y,res,gx,gy){if(CT_RunnerStatus===1){var tix=CT_TileOffset+CT_GridWidth*gx+gx*CT_TileOffset*2;var tiy=CT_TileOffset+CT_GridHeight*gy+gy*CT_TileOffset*2;var tile_i=CT_ContainerTileLength;if(res!==-1){var res_type=CT_ResourceList[res][1];if(res_type===0){var i;for(i=0;i<CT_ContainerTileLength;i++)if(CT_ContainerTile[i]==null){CT_ContainerTile[i]=[l,x,y,res,tix,tiy];CT_Repaint=1;return}CT_ContainerTile[tile_i]=[l,x,y,res,tix,tiy];CT_ContainerTileLength++;CT_Repaint=1}else cprint("ERROR : The resource index corresponding to the resource file is not a image.")}}}function tile_destroy(l,x,y){if(CT_RunnerStatus===1){var i;for(i=0;i<CT_ContainerTileLength;i++)if(CT_ContainerTile[i]!=null){var tl=CT_ContainerTile[i][0];if(tl===l){var tx=CT_ContainerTile[i][1];var ty=CT_ContainerTile[i][2];if(x===tx&&y===ty){CT_ContainerTile[i]=null;CT_Repaint=1;break}}}}}function tile_check(l,x,y){if(CT_RunnerStatus===1){var i;for(i=0;i<CT_ContainerTileLength;i++)if(CT_ContainerTile[i]!=null){var tl=CT_ContainerTile[i][0];if(tl===l){var tx=CT_ContainerTile[i][1];var ty=CT_ContainerTile[i][2];var gw=CT_GridWidth;var gh=CT_GridHeight;if(x>=tx&&y>=ty&&x<tx+gw&&y<ty+gh)return 1}}}return 0}function scene_width(){if(CT_RunnerStatus===1)return CT_sceneWidth;return 0}function scene_height(){if(CT_RunnerStatus===1)return CT_sceneHeight;return 0}function grid_width(){if(CT_RunnerStatus===1)return CT_GridWidth;return 0}function grid_height(){if(CT_RunnerStatus===1)return CT_GridHeight;return 0}"use strict";function CTsprite(){this.image=-1;this.layer=0;this.subnum=1;this.subimg=0;this.subimg_o=0;this.collision_type=0;this.collision_edge=0;this.cbox_x=0;this.cbox_y=0;this.cbox_w=0;this.cbox_h=0;this.cbox_cx=0;this.cbox_cy=0;this.cbox_r=0;this.colora=255;this.scale_x=1;this.scale_y=1;this.rotate=0;this.main=function(){};this.loop=function(){};this.id=CT_SpriteGetId();this.type=-2}function sprite_create(x,y,CTsprite){if(CT_RunnerStatus===1){var id=CTsprite.id;if(CTsprite.type===-2){var image=CTsprite.image;var image_w=0;var image_h=0;var subimg_w=0;var subimg_h=0;var conspr_i=CT_ContainerSpriteLength;var layer=CTsprite.layer;var subimg=CTsprite.subimg;var subimg_o=CTsprite.subimg_o;var subnum=CTsprite.subnum;var coll_t=CTsprite.collision_type;var coll_e=CTsprite.collision_edge;var box_x=CTsprite.cbox_x;var box_y=CTsprite.cbox_y;var box_w=CTsprite.cbox_w;var box_h=CTsprite.cbox_h;var box_cx=CTsprite.cbox_cx;var box_cy=CTsprite.cbox_cy;var box_r=CTsprite.cbox_r;var alpha=CTsprite.colora;var scale_x=CTsprite.scale_x;var scale_y=CTsprite.scale_y;var rotate=CTsprite.rotate;if(image!==-1){var res_type=CT_ResourceList[image][1];if(res_type===0){image_w=CT_ResourceList[image][2];image_h=CT_ResourceList[image][3];subimg_w=parseInt(image_w/subnum-subimg_o*2);subimg_h=image_h-subimg_o*2;if(box_x===0&&box_y===0&&box_w===0&&box_h===0){box_x=0;box_y=0;box_w=parseInt(subimg_w*scale_x);box_h=parseInt(subimg_h*scale_y)}if(box_cx===0&&box_cy===0&&box_r===0){box_cx=parseInt(subimg_w/2);box_cy=parseInt(subimg_h/2);box_r=parseInt(subimg_w*scale_x/2)}}else{image=-1;cprint("ERROR : The resource index corresponding to the resource file is not a image.")}}if(subnum>=1&&subimg<=subnum-1){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]==null){CT_ContainerSprite[i]=[id,layer,x,y,image,subimg,subnum,subimg_w,subimg_h,x,y,coll_t,coll_e,subimg_o,box_x,box_y,box_w,box_h,box_cx,box_cy,box_r,alpha,scale_x,scale_y,rotate];CT_TaskCreated(i,CTsprite.main,CTsprite.loop);CT_Repaint=1;return i}CT_ContainerSprite[conspr_i]=[id,layer,x,y,image,subimg,subnum,subimg_w,subimg_h,x,y,coll_t,coll_e,subimg_o,box_x,box_y,box_w,box_h,box_cx,box_cy,box_r,alpha,scale_x,scale_y,rotate];CT_TaskCreated(conspr_i,CTsprite.main,CTsprite.loop);CT_ContainerSpriteLength++;CT_Repaint=1;return conspr_i}else cprint("ERROR : The sprite property have error.")}}return-1}function sprite_destroy(){if(CT_RunnerStatus===1){CT_ContainerSprite[CT_TaskRunIndex]=null;CT_TaskDestroy(CT_TaskRunIndex);CT_Repaint=1}}function sprite_x(){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var x=CT_ContainerSprite[CT_TaskRunIndex][2];return x}return-1}function sprite_y(){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var y=CT_ContainerSprite[CT_TaskRunIndex][3];return y}return-1}function sprite_set_x(x){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){CT_ContainerSprite[CT_TaskRunIndex][2]=x;CT_Repaint=1}}function sprite_set_y(y){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){CT_ContainerSprite[CT_TaskRunIndex][3]=y;CT_Repaint=1}}function sprite_set_layer(l){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){CT_ContainerSprite[CT_TaskRunIndex][1]=l;CT_Repaint=1}}function sprite_collision(collspr){if(CT_RunnerStatus===1)if(collspr.type===-2){if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var collision=0;var spr_l=CT_ContainerSprite[CT_TaskRunIndex][1];var spr_x=CT_ContainerSprite[CT_TaskRunIndex][2];var spr_y=CT_ContainerSprite[CT_TaskRunIndex][3];var box_x=CT_ContainerSprite[CT_TaskRunIndex][14];var box_y=CT_ContainerSprite[CT_TaskRunIndex][15];var box_w=CT_ContainerSprite[CT_TaskRunIndex][16];var box_h=CT_ContainerSprite[CT_TaskRunIndex][17];var box_cx=CT_ContainerSprite[CT_TaskRunIndex][18];var box_cy=CT_ContainerSprite[CT_TaskRunIndex][19];var box_r=CT_ContainerSprite[CT_TaskRunIndex][20];var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var cspr_id=CT_ContainerSprite[i][0];var cspr_l=CT_ContainerSprite[i][1];var cspr_x=CT_ContainerSprite[i][2];var cspr_y=CT_ContainerSprite[i][3];var cspr_coll_t=CT_ContainerSprite[i][11];var cspr_coll_e=CT_ContainerSprite[i][12];var cbox_x=CT_ContainerSprite[i][14];var cbox_y=CT_ContainerSprite[i][15];var cbox_w=CT_ContainerSprite[i][16];var cbox_h=CT_ContainerSprite[i][17];var cbox_cx=CT_ContainerSprite[i][18];var cbox_cy=CT_ContainerSprite[i][19];var cbox_r=CT_ContainerSprite[i][20];if(cspr_id===collspr.id)if(spr_l===cspr_l){if(cspr_coll_t===0)if(spr_x+box_x+box_w>cspr_x+cbox_x&&spr_x+box_x<cspr_x+cbox_x+cbox_w&&spr_y+box_y+box_h>cspr_y+cbox_y&&spr_y+box_y<cspr_y+cbox_y+cbox_h){collision=1;if(cspr_coll_e===1){var spr_lx=CT_ContainerSprite[CT_TaskRunIndex][9];var spr_ly=CT_ContainerSprite[CT_TaskRunIndex][10];var dx=Math.abs(spr_lx-spr_x);var dy=-Math.abs(spr_ly-spr_y);var sx=spr_x<spr_lx?1:-1;var sy=spr_y<spr_ly?1:-1;var dd=dx+dy;var dd2;while(1){if(!(spr_x+box_x+box_w>cspr_x+cbox_x&&spr_x+box_x<cspr_x+cbox_x+cbox_w&&spr_y+box_y+box_h>cspr_y+cbox_y&&spr_y+box_y<cspr_y+cbox_y+cbox_h)){CT_ContainerSprite[CT_TaskRunIndex][2]=spr_x;CT_ContainerSprite[CT_TaskRunIndex][3]=spr_y;break}if(spr_x===spr_lx&&spr_y===spr_ly)break;dd2=2*dd;if(dd2>=dy){dd+=dy;spr_x+=sx}if(dd2<=dx){dd+=dx;spr_y+=sy}}}}if(cspr_coll_t===1){var spr_distance=parseInt(Math.sqrt(Math.pow(spr_x+box_cx-(cspr_x+cbox_cx),2)+Math.pow(spr_y+box_cy-(cspr_y+cbox_cy),2)));if(spr_distance<box_r+cbox_r){collision=1;if(cspr_coll_e===1){var spr_lx=CT_ContainerSprite[CT_TaskRunIndex][9];var spr_ly=CT_ContainerSprite[CT_TaskRunIndex][10];var dx=Math.abs(spr_lx-spr_x);var dy=-Math.abs(spr_ly-spr_y);var sx=spr_x<spr_lx?1:-1;var sy=spr_y<spr_ly?1:-1;var dd=dx+dy;var dd2;while(1){var spr_distance=Math.sqrt(Math.pow(spr_x+box_cx-(cspr_x+cbox_cx),2)+Math.pow(spr_y+box_cy-(cspr_y+cbox_cy),2));if(spr_distance>=box_r+cbox_r){CT_ContainerSprite[CT_TaskRunIndex][2]=spr_x;CT_ContainerSprite[CT_TaskRunIndex][3]=spr_y;break}if(spr_x===spr_lx&&spr_y===spr_ly)break;dd2=2*dd;if(dd2>=dy){dd+=dy;spr_x+=sx}if(dd2<=dx){dd+=dx;spr_y+=sy}}CT_Repaint=1;return 1}}}}}if(collision===1){CT_Repaint=1;return 1}}}else cprint("ERROR : Not is sprite object.");return 0}function sprite_set_rectbox(x,y,w,h){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){CT_ContainerSprite[CT_TaskRunIndex][14]=x;CT_ContainerSprite[CT_TaskRunIndex][15]=y;CT_ContainerSprite[CT_TaskRunIndex][16]=w;CT_ContainerSprite[CT_TaskRunIndex][17]=h}}function sprite_set_cirbox(cx,cy,r){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){CT_ContainerSprite[CT_TaskRunIndex][18]=cx;CT_ContainerSprite[CT_TaskRunIndex][19]=cy;CT_ContainerSprite[CT_TaskRunIndex][20]=r}}function sprite_set_subimg(index){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var spr_subnum=CT_ContainerSprite[CT_TaskRunIndex][6];if(index<=spr_subnum-1){CT_ContainerSprite[CT_TaskRunIndex][5]=index;CT_Repaint=1}else cprint("ERROR : The sprite subimage index is greater than the number of subimage.")}}function sprite_set_colora(alpha){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){CT_ContainerSprite[CT_TaskRunIndex][21]=alpha;CT_Repaint=1}}function sprite_set_scalex(sx){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){CT_ContainerSprite[CT_TaskRunIndex][22]=sx;CT_Repaint=1}}function sprite_set_scaley(sy){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){CT_ContainerSprite[CT_TaskRunIndex][23]=sy;CT_Repaint=1}}function sprite_set_rotate(rot){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null)if(rot>=0&&rot<=359){CT_ContainerSprite[CT_TaskRunIndex][24]=rot;CT_Repaint=1}else cprint("ERROR : Rotation angle is error.")}function spritenum_set(i,n){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null)CT_TaskSetNum(CT_TaskRunIndex,i,n)}function spritestr_set(i,s){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null)CT_TaskSetStr(CT_TaskRunIndex,i,s)}function spritenum(i){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var var_n=CT_TaskNum(CT_TaskRunIndex,i);return var_n}return 0}function spritestr(i){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var var_s=CT_TaskStr(CT_TaskRunIndex,i);return var_s}return""}function sprite_check(x,y,sprite){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){var spr_x=CT_ContainerSprite[i][2];var spr_y=CT_ContainerSprite[i][3];var spr_collw=CT_ContainerSprite[i][7];var spr_collh=CT_ContainerSprite[i][8];if(x>=spr_x&&y>=spr_y&&x<spr_x+spr_collw&&y<spr_y+spr_collh)return 1}}}else cprint("ERROR : Not is sprite object.")}return 0}function sprite_index(){return CT_TaskRunIndex}function isprite_destroy(si){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){CT_ContainerSprite[si]=null;CT_TaskDestroy(si);CT_Repaint=1}}function isprite_x(si){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){var x=CT_ContainerSprite[si][2];return x}else cprint("ERROR : The sprite is null.");return-1}function isprite_y(si){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){var y=CT_ContainerSprite[si][3];return y}else cprint("ERROR : The sprite is null.");return-1}function isprite_set_x(si,x){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){CT_ContainerSprite[si][2]=x;CT_Repaint=1}}function isprite_set_y(si,y){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){CT_ContainerSprite[si][3]=y;CT_Repaint=1}}function isprite_set_layer(si,l){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){CT_ContainerSprite[si][1]=l;CT_Repaint=1}}function isprite_collision(si){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var spr_l=CT_ContainerSprite[CT_TaskRunIndex][1];var spr_x=CT_ContainerSprite[CT_TaskRunIndex][2];var spr_y=CT_ContainerSprite[CT_TaskRunIndex][3];var box_x=CT_ContainerSprite[CT_TaskRunIndex][14];var box_y=CT_ContainerSprite[CT_TaskRunIndex][15];var box_w=CT_ContainerSprite[CT_TaskRunIndex][16];var box_h=CT_ContainerSprite[CT_TaskRunIndex][17];var box_cx=CT_ContainerSprite[CT_TaskRunIndex][18];var box_cy=CT_ContainerSprite[CT_TaskRunIndex][19];var box_r=CT_ContainerSprite[CT_TaskRunIndex][20];if(CT_ContainerSprite[si]!=null){var cspr_l=CT_ContainerSprite[si][1];var cspr_x=CT_ContainerSprite[si][2];var cspr_y=CT_ContainerSprite[si][3];var cspr_coll_t=CT_ContainerSprite[si][11];var cspr_coll_e=CT_ContainerSprite[si][12];var cbox_x=CT_ContainerSprite[si][14];var cbox_y=CT_ContainerSprite[si][15];var cbox_w=CT_ContainerSprite[si][16];var cbox_h=CT_ContainerSprite[si][17];var cbox_cx=CT_ContainerSprite[si][18];var cbox_cy=CT_ContainerSprite[si][19];var cbox_r=CT_ContainerSprite[si][20];if(spr_l===cspr_l){if(cspr_coll_t===0)if(spr_x+box_x+box_w>cspr_x+cbox_x&&spr_x+box_x<cspr_x+cbox_x+cbox_w&&spr_y+box_y+box_h>cspr_y+cbox_y&&spr_y+box_y<cspr_y+cbox_y+cbox_h){if(cspr_coll_e===0)return 1;if(cspr_coll_e===1){var spr_lx=CT_ContainerSprite[CT_TaskRunIndex][9];var spr_ly=CT_ContainerSprite[CT_TaskRunIndex][10];var dx=Math.abs(spr_lx-spr_x);var dy=-Math.abs(spr_ly-spr_y);var sx=spr_x<spr_lx?1:-1;var sy=spr_y<spr_ly?1:-1;var dd=dx+dy;var dd2;while(1){if(!(spr_x+box_x+box_w>cspr_x+cbox_x&&spr_x+box_x<cspr_x+cbox_x+cbox_w&&spr_y+box_y+box_h>cspr_y+cbox_y&&spr_y+box_y<cspr_y+cbox_y+cbox_h)){CT_ContainerSprite[CT_TaskRunIndex][2]=spr_x;CT_ContainerSprite[CT_TaskRunIndex][3]=spr_y;break}if(spr_x===spr_lx&&spr_y===spr_ly)break;dd2=2*dd;if(dd2>=dy){dd+=dy;spr_x+=sx}if(dd2<=dx){dd+=dx;spr_y+=sy}}CT_Repaint=1;return 1}}if(cspr_coll_t===1){var spr_distance=parseInt(Math.sqrt(Math.pow(spr_x+box_cx-(cspr_x+cbox_cx),2)+Math.pow(spr_y+box_cy-(cspr_y+cbox_cy),2)));if(spr_distance<box_r+cbox_r){if(cspr_coll_e===0)return 1;if(cspr_coll_e===1){var spr_lx=CT_ContainerSprite[CT_TaskRunIndex][9];var spr_ly=CT_ContainerSprite[CT_TaskRunIndex][10];var dx=Math.abs(spr_lx-spr_x);var dy=-Math.abs(spr_ly-spr_y);var sx=spr_x<spr_lx?1:-1;var sy=spr_y<spr_ly?1:-1;var dd=dx+dy;var dd2;while(1){var spr_distance=Math.sqrt(Math.pow(spr_x+box_cx-(cspr_x+cbox_cx),2)+Math.pow(spr_y+box_cy-(cspr_y+cbox_cy),2));if(spr_distance>=box_r+cbox_r){CT_ContainerSprite[CT_TaskRunIndex][2]=spr_x;CT_ContainerSprite[CT_TaskRunIndex][3]=spr_y;break}if(spr_x===spr_lx&&spr_y===spr_ly)break;dd2=2*dd;if(dd2>=dy){dd+=dy;spr_x+=sx}if(dd2<=dx){dd+=dx;spr_y+=sy}}CT_Repaint=1;return 1}}}}}}return 0}function isprite_set_rectbox(si,x,y,w,h){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){CT_ContainerSprite[si][14]=x;CT_ContainerSprite[si][15]=y;CT_ContainerSprite[si][16]=w;CT_ContainerSprite[si][17]=h}}function isprite_set_cirbox(si,cx,cy,r){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){CT_ContainerSprite[si][18]=cx;CT_ContainerSprite[si][19]=cy;CT_ContainerSprite[si][20]=r}}function isprite_check(x,y,si){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){var spr_x=CT_ContainerSprite[si][2];var spr_y=CT_ContainerSprite[si][3];var spr_collw=CT_ContainerSprite[si][7];var spr_collh=CT_ContainerSprite[si][8];if(x>=spr_x&&y>=spr_y&&x<spr_x+spr_collw&&y<spr_y+spr_collh)return 1}return 0}function isprite_set_subimg(si,index){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){var spr_subnum=CT_ContainerSprite[si][6];if(index<=spr_subnum-1){CT_ContainerSprite[si][5]=index;CT_Repaint=1}else cprint("ERROR : The sprite subimage index is greater than the number of subimage.")}else cprint("ERROR : The sprite is null.")}function isprite_set_colora(si,alpha){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){CT_ContainerSprite[si][21]=alpha;CT_Repaint=1}}function isprite_set_scalex(si,sx){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){CT_ContainerSprite[si][22]=sx;CT_Repaint=1}}function isprite_set_scaley(si,sy){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){CT_ContainerSprite[si][23]=sy;CT_Repaint=1}}function isprite_set_rotate(si,rot){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null)if(rot>=0&&rot<=359){CT_ContainerSprite[si][24]=rot;CT_Repaint=1}else cprint("ERROR : Rotation angle is error.")}function ispritenum_set(si,i,n){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null)CT_TaskSetNum(si,i,n);else cprint("ERROR : The sprite is null.")}function ispritestr_set(si,i,s){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null)CT_TaskSetStr(si,i,s);else cprint("ERROR : The sprite is null.")}function ispritenum(si,i){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){var var_n=CT_TaskNum(si,i);return var_n}else cprint("ERROR : The sprite is null.");return 0}function ispritestr(si,i){if(CT_RunnerStatus===1)if(si<CT_ContainerSpriteLength)if(CT_ContainerSprite[si]!=null){var var_s=CT_TaskStr(si,i);return var_s}else cprint("ERROR : The sprite is null.");return""}function sprite_destroy_all(sprite){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){CT_ContainerSprite[i]=null;CT_TaskDestroy(i);CT_Repaint=1}}}}}function sprite_all_set_x(sprite,x){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){CT_ContainerSprite[i][2]=x;CT_Repaint=1}}}}}function sprite_all_set_y(sprite,y){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){CT_ContainerSprite[i][3]=y;CT_Repaint=1}}}}}function sprite_all_set_layer(sprite,l){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){CT_ContainerSprite[i][1]=l;CT_Repaint=1}}}}}function sprite_all_set_subimg(sprite,index){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){var spr_subnum=CT_ContainerSprite[i][6];if(index<=spr_subnum-1){CT_ContainerSprite[i][5]=index;CT_Repaint=1}else cprint("ERROR : The sprite subimage index is greater than the number of subimage.")}}}}}function sprite_all_set_colora(sprite,alpha){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){CT_ContainerSprite[i][21]=alpha;CT_Repaint=1}}}}}function sprite_all_set_scalex(sprite,sx){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){CT_ContainerSprite[i][22]=sx;CT_Repaint=1}}}}}function sprite_all_set_scaley(sprite,sy){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){CT_ContainerSprite[i][23]=sy;CT_Repaint=1}}}}}function sprite_all_set_rotate(sprite,rot){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id)if(rot>=0&&rot<=359){CT_ContainerSprite[i][24]=rot;CT_Repaint=1}else cprint("ERROR : Rotation angle is error.")}}}}function spritenum_all_set(sprite,vi,n){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id)CT_TaskSetNum(i,vi,n)}}}}function spritestr_all_set(sprite,vi,s){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id)CT_TaskSetStr(i,vi,s)}}}}function sprite_all_set_rectbox(sprite,x,y,w,h){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){CT_ContainerSprite[i][14]=x;CT_ContainerSprite[i][15]=y;CT_ContainerSprite[i][16]=w;CT_ContainerSprite[i][17]=h}}}}}function sprite_all_set_cirbox(sprite,cx,cy,r){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){CT_ContainerSprite[i][18]=cx;CT_ContainerSprite[i][19]=cy;CT_ContainerSprite[i][20]=r}}}}}"use strict";function textdata_read(t){if(t!==-1){var res_type=CT_ResourceList[t][1];if(res_type===2)return CT_ContainerResource[t];else cprint("ERROR : The resource index corresponding to the resource file is not a text.")}return""}function textdata_line(t){if(t!==-1){var res_type=CT_ResourceList[t][1];if(res_type===2){var line=1;var text_l=CT_ContainerResource[t].length;var char_c="";var char_i=0;if(text_l===0)return 0;while(char_i<text_l){char_c=CT_ContainerResource[t][char_i];if(char_c==="\n")line++;char_i++}return line}else cprint("ERROR : The resource index corresponding to the resource file is not a text.")}return 0}function textdata_read_line(t,l){if(t!==-1){var res_type=CT_ResourceList[t][1];if(res_type===2){var text_len=CT_ContainerResource[t].length;if(text_len===0)return"";var line=1;var char_i=0;var char_ls=0;var char_le=0;var char_c="";var text_slice="";while(char_i<text_len){char_c=CT_ContainerResource[t][char_i];if(char_c==="\n"){char_le=char_i;if(line===l){text_slice=CT_ContainerResource[t].slice(char_ls,char_le);return text_slice}line++;char_ls=char_i+1}if(char_i===text_len-1){char_le=text_len;text_slice=CT_ContainerResource[t].slice(char_ls,char_le);return text_slice}char_i++}if(line===1){text_slice=CT_ContainerResource[t].slice(char_ls,char_le);return text_slice}}else cprint("ERROR : The resource index corresponding to the resource file is not a text.")}return""}"use strict";function timer_set(timer,time){var i;for(i=0;i<CT_ContainerTimerLength;i++){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer){cprint("ERROR : The timer have been created.");return}}if(time>=.1){var i2;for(i2=0;i2<CT_ContainerTimerLength;i2++)if(CT_ContainerTimer[i2]==null){var time_frame=parseInt(time*60);CT_ContainerTimer[i2]=[timer,time_frame,time_frame,0,0];return}var time_frame=parseInt(time*60);CT_ContainerTimer[CT_ContainerTimerLength]=[timer,time_frame,time_frame,0,0];CT_ContainerTimerLength++}else cprint("ERROR : The timer duration than the minimum. Timer : "+timer)}function timer_set_f(timer,fn){var i;for(i=0;i<CT_ContainerTimerLength;i++){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer){cprint("ERROR : The timer have been created.");return}}if(fn>=1){var i2;for(i2=0;i2<CT_ContainerTimerLength;i2++)if(CT_ContainerTimer[i2]==null){CT_ContainerTimer[i2]=[timer,fn,fn,0,0];return}CT_ContainerTimer[CT_ContainerTimerLength]=[timer,fn,fn,0,0];CT_ContainerTimerLength++}else cprint("ERROR : The timer duration than the minimum.")}function timer_clear(timer){var i;for(i=0;i<CT_ContainerTimerLength;i++){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer)CT_ContainerTimer[i]=null}}function timer_run(timer){var i;for(i=0;i<CT_ContainerTimerLength;i++)if(CT_ContainerTimer[i]!=null){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer){CT_ContainerTimer[i][3]=1;return}}cprint("ERROR : Timer invalid.")}function timer_stop(timer){var i;for(i=0;i<CT_ContainerTimerLength;i++)if(CT_ContainerTimer[i]!=null){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer){var timer_duration=CT_ContainerTimer[i][2];CT_ContainerTimer[i][1]=timer_duration;CT_ContainerTimer[i][3]=0;return}}cprint("ERROR : Timer invalid.")}function timer_pause(timer){var i;for(i=0;i<CT_ContainerTimerLength;i++)if(CT_ContainerTimer[i]!=null){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer){CT_ContainerTimer[i][3]=0;return}}cprint("ERROR : Timer invalid.")}function timer_end(timer){var i;for(i=0;i<CT_ContainerTimerLength;i++)if(CT_ContainerTimer[i]!=null){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer){if(CT_ContainerTimer[i][3]===2)return 1;return 0}}cprint("ERROR : Timer invalid.");return 0}function globaltimer_set(timer,time){var i;for(i=0;i<CT_ContainerGlobalTimerLength;i++){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer){cprint("ERROR : The timer have been created.");return}}if(time>=.1){var i2;for(i2=0;i2<CT_ContainerGlobalTimerLength;i2++)if(CT_ContainerGlobalTimer[i2]==null){var time_frame=parseInt(time*60);CT_ContainerGlobalTimer[i2]=[timer,time_frame,time_frame,0,0];return}var time_frame=parseInt(time*60);CT_ContainerGlobalTimer[CT_ContainerGlobalTimerLength]=[timer,time_frame,time_frame,0,0];CT_ContainerGlobalTimerLength++}else cprint("ERROR : The timer duration than the minimum.")}function globaltimer_set_f(timer,fn){var i;for(i=0;i<CT_ContainerGlobalTimerLength;i++){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer){cprint("ERROR : The timer have been created.");return}}if(fn>=1){var i2;for(i2=0;i2<CT_ContainerGlobalTimerLength;i2++)if(CT_ContainerGlobalTimer[i2]==null){CT_ContainerGlobalTimer[i2]=[timer,fn,fn,0,0];return}CT_ContainerGlobalTimer[CT_ContainerGlobalTimerLength]=[timer,fn,fn,0,0];CT_ContainerGlobalTimerLength++}else cprint("ERROR : The timer duration than the minimum.")}function globaltimer_clear(timer){var i;for(i=0;i<CT_ContainerGlobalTimerLength;i++){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer)CT_ContainerGlobalTimer[i]=null}}function globaltimer_run(timer){var i;for(i=0;i<CT_ContainerGlobalTimerLength;i++)if(CT_ContainerGlobalTimer[i]!=null){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer){CT_ContainerGlobalTimer[i][3]=1;return}}cprint("ERROR : Timer invalid.")}function globaltimer_stop(timer){var i;for(i=0;i<CT_ContainerGlobalTimerLength;i++)if(CT_ContainerGlobalTimer[i]!=null){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer){var timer_duration=CT_ContainerGlobalTimer[i][2];CT_ContainerGlobalTimer[i][1]=timer_duration;CT_ContainerGlobalTimer[i][3]=0;return}}cprint("ERROR : Timer invalid.")}function globaltimer_pause(timer){var i;for(i=0;i<CT_ContainerGlobalTimerLength;i++)if(CT_ContainerGlobalTimer[i]!=null){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer){CT_ContainerGlobalTimer[i][3]=0;return}}cprint("ERROR : Timer invalid.")}function globaltimer_end(timer){var i;for(i=0;i<CT_ContainerGlobalTimerLength;i++)if(CT_ContainerGlobalTimer[i]!=null){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer){if(CT_ContainerGlobalTimer[i][3]===2)return 1;return 0}}cprint("ERROR : Timer invalid.");return 0}"use strict";function CTwindow(){this.x=0;this.y=0;this.width=300;this.height=200;this.color_background=color(228,226,211,255);this.color_borderUp=color(170,168,153,255);this.color_borderDown=color(170,168,153,255);this.color_borderLeft=color(170,168,153,255);this.color_borderRight=color(170,168,153,255);this.image=-1;this.image_o=0;this.layer=0;this.type=0;this.index=-1;this.id=CT_UIGetId()}function CTbutton(){this.x=0;this.y=0;this.width=60;this.height=30;this.color_background=color(203,201,183,255);this.color_borderUp=color(181,179,162,255);this.color_borderDown=color(181,179,162,255);this.color_borderLeft=color(181,179,162,255);this.color_borderRight=color(181,179,162,255);this.background=-1;this.background_o=0;this.color_text=color(0,0,0,255);this.text="Button";this.size=16;this.imgfont=null;this.index=-1;this.type=1;this.id=CT_UIGetId()}function CTtext(){this.x=0;this.y=0;this.color_text=color(0,0,0,255);this.text="Text";this.size=16;this.imgfont=null;this.index=-1;this.type=2;this.id=CT_UIGetId()}function CTcheckbox(){this.x=0;this.y=0;this.color_border=color(181,179,162,255);this.color_background=color(255,255,255,255);this.color_widget=color(34,172,56,255);this.status=0;this.index=-1;this.type=3;this.id=CT_UIGetId()}function CTradio(){this.x=0;this.y=0;this.color_background=color(255,255,255,255);this.color_border=color(181,179,162,255);this.color_widget=color(34,172,56,255);this.group=0;this.index=-1;this.type=4;this.id=CT_UIGetId()}function CTprogressbar(){this.x=0;this.y=0;this.width=80;this.height=30;this.color_background=color(255,255,255,255);this.color_borderUp=color(181,179,162,255);this.color_borderDown=color(181,179,162,255);this.color_borderLeft=color(181,179,162,255);this.color_borderRight=color(181,179,162,255);this.color_widget=color(34,172,56,255);this.background=-1;this.background_o=0;this.value=0;this.maxvalue=10;this.index=-1;this.type=5;this.id=CT_UIGetId()}function CTtextbox(){this.x=0;this.y=0;this.width=250;this.height=30;this.color_background=color(255,255,255,255);this.color_borderUp=color(181,179,162,255);this.color_borderDown=color(181,179,162,255);this.color_borderLeft=color(181,179,162,255);this.color_borderRight=color(181,179,162,255);this.color_text="#000000";this.background=-1;this.background_o=0;this.password=0;this.number=0;this.max=20;this.readonly=0;this.subbox=0;this.name="Title";this.size=16;this.imgfont=null;this.index=-1;this.type=6;this.id=CT_UIGetId()}function CTimagement(){this.x=0;this.y=0;this.image=-1;this.subnum=1;this.subimg=0;this.subimg_o=0;this.index=-1;this.type=7;this.id=CT_UIGetId()}function CTwindow_create(CTwindow){if(CT_RunnerStatus===1)if(CTwindow.type===0){var id=CTwindow.id;var x=CTwindow.x;var y=CTwindow.y;var w=CTwindow.width;var h=CTwindow.height;var l=CTwindow.layer;var cbg=CTwindow.color_background;var cbu=CTwindow.color_borderUp;var cbd=CTwindow.color_borderDown;var cbl=CTwindow.color_borderLeft;var cbr=CTwindow.color_borderRight;var bi=CTwindow.image;var bio=CTwindow.image_o;if(bi!==-1){var res_type=CT_ResourceList[bi][1];if(res_type!==0){bi=-1;cprint("ERROR : The resource index corresponding to the resource file is not a image.")}}if(w>0&&h>0){var i2;for(i2=0;i2<CT_ContainerWindowLength;i2++)if(CT_ContainerWindow[i2]==null){CT_ContainerWindow[i2]=[id,l,x,y,w,h,cbg,cbu,cbd,cbl,cbr,bi,bio];CTwindow.index=i2;CT_Repaint=1;return}CT_ContainerWindow[CT_ContainerWindowLength]=[id,l,x,y,w,h,cbg,cbu,cbd,cbl,cbr,bi,bio];CTwindow.index=CT_ContainerWindowLength;CT_ContainerWindowLength++;CT_Repaint=1}else cprint("ERROR : Unable to create window.")}else cprint("ERROR : Not is window object.")}function CTwindow_destroy(CTwindow){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){var Cwin_id=CT_ContainerWindow[CTwindow.index][0];if(CTwindow.id===Cwin_id){CT_ContainerWindow[CTwindow.index]=null;var i;for(i=0;i<CT_ContainerUILength;i++)if(CT_ContainerUI[i]!=null){var ui_win_index=CT_ContainerUI[i][1];if(ui_win_index===CTwindow.index)CT_ContainerUI[i]=null}CT_Repaint=1}}}else cprint("ERROR : Not is window object.")}function CTwindow_set_x(CTwindow,x){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){var Cwin_id=CT_ContainerWindow[CTwindow.index][0];if(CTwindow.id===Cwin_id){CT_ContainerWindow[CTwindow.index][2]=x;CT_Repaint=1}}}else cprint("ERROR : Not is window object.")}function CTwindow_set_y(CTwindow,y){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){var Cwin_id=CT_ContainerWindow[CTwindow.index][0];if(CTwindow.id===Cwin_id){CT_ContainerWindow[CTwindow.index][3]=y;CT_Repaint=1}}}else cprint("ERROR : Not is window object.")}function CTwindow_set_width(CTwindow,w){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){var Cwin_id=CT_ContainerWindow[CTwindow.index][0];if(CTwindow.id===Cwin_id){CT_ContainerWindow[CTwindow.index][4]=w;CT_Repaint=1}}}else cprint("ERROR : Not is window object.")}function CTwindow_set_height(CTwindow,h){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){var Cwin_id=CT_ContainerWindow[CTwindow.index][0];if(CTwindow.id===Cwin_id){CT_ContainerWindow[CTwindow.index][5]=h;CT_Repaint=1}}}else cprint("ERROR : Not is window object.")}function CTwindow_set_image(CTwindow,i){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){var Cwin_id=CT_ContainerWindow[CTwindow.index][0];if(CTwindow.id===Cwin_id)if(i!==-1){var res_type=CT_ResourceList[i][1];if(res_type===0){CT_ContainerWindow[CTwindow.index][11]=i;CT_Repaint=1}else cprint("ERROR : The resource index corresponding to the resource file is not a image.")}else{CT_ContainerWindow[CTwindow.index][11]=i;CT_Repaint=1}}}else cprint("ERROR : Not is window object.")}function CTwindow_set_color(CTwindow,prop,col){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){var Cwin_id=CT_ContainerWindow[CTwindow.index][0];if(CTwindow.id===Cwin_id){if(prop==="back"){CT_ContainerWindow[CTwindow.index][6]=col;CT_Repaint=1}if(prop==="up"){CT_ContainerWindow[CTwindow.index][7]=col;CT_Repaint=1}if(prop==="down"){CT_ContainerWindow[CTwindow.index][8]=col;CT_Repaint=1}if(prop==="left"){CT_ContainerWindow[CTwindow.index][9]=col;CT_Repaint=1}if(prop==="right"){CT_ContainerWindow[CTwindow.index][10]=col;CT_Repaint=1}}}}else cprint("ERROR : Not is window object.")}function CTui_create(CTwindow,CTui){if(CT_RunnerStatus===1)if(CTwindow.type===0){var id=CTui.id;var win_index=CTwindow.index;var type=CTui.type;if(type===1){var x=CTui.x;var y=CTui.y;var w=CTui.width;var h=CTui.height;var cbg=CTui.color_background;var cbu=CTui.color_borderUp;var cbd=CTui.color_borderDown;var cbl=CTui.color_borderLeft;var cbr=CTui.color_borderRight;var ct=CTui.color_text;var bi=CTui.background;var bio=CTui.background_o;var text=CTui.text;var text_w=0;var text_h=0;var font_i=0;var font_n=0;var font_g=0;var font_cl=null;var font_gl=null;var imgfont_use=0;if(bi!==-1){var res_type=CT_ResourceList[bi][1];if(res_type!==0){bi=-1;cprint("ERROR : The resource index corresponding to the resource file is not a image.")}}if(CTui.imgfont!=null)if(CTui.imgfont.FontImg!==-1&&CTui.imgfont.CharNumber>0&&CTui.imgfont.CharList!=null&&CTui.imgfont.GlyphList!=null){font_i=CTui.imgfont.FontImg;font_n=CTui.imgfont.CharNumber;font_g=CTui.imgfont.CharGap;font_cl=CTui.imgfont.CharList;font_gl=CTui.imgfont.GlyphList;text_h=CTui.imgfont.CharHeight;text_w=CT_ImgStringMeasure(font_n,font_g,font_cl,font_gl,text);imgfont_use=1}else cprint("ERROR : Image of the imgfont is invalid.");else{text_w=string_pxwidth(text,CTui.size);text_h=CTui.size}if(w>0&&h>0){var i2;for(i2=0;i2<CT_ContainerUILength;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,w,h,cbg,cbu,cbd,cbl,cbr,ct,bi,text,text_w,text_h,0,0,0,0,bio,imgfont_use,font_i,font_n,font_g,font_cl,font_gl];CTui.index=i2;CT_Repaint=1;return}CT_ContainerUI[CT_ContainerUILength]=[id,win_index,type,x,y,w,h,cbg,cbu,cbd,cbl,cbr,ct,bi,text,text_w,text_h,0,0,0,0,bio,imgfont_use,font_i,font_n,font_g,font_cl,font_gl];CTui.index=CT_ContainerUILength;CT_ContainerUILength++;CT_Repaint=1}else cprint("ERROR : Unable to create button.")}if(type===2){var x=CTui.x;var y=CTui.y;var ct=CTui.color_text;var text=CTui.text;var ts=CTui.size;var id=CTui.id;var font_i=0;var font_n=0;var font_g=0;var font_cl=null;var font_gl=null;var imgfont_use=0;var i2;if(CTui.imgfont!=null)if(CTui.imgfont.FontImg!==-1&&CTui.imgfont.CharNumber>0&&CTui.imgfont.CharList!=null&&CTui.imgfont.GlyphList!=null){font_i=CTui.imgfont.FontImg;font_n=CTui.imgfont.CharNumber;font_g=CTui.imgfont.CharGap;font_cl=CTui.imgfont.CharList;font_gl=CTui.imgfont.GlyphList;imgfont_use=1}else cprint("ERROR : Image of the imgfont is invalid.");for(i2=0;i2<CT_ContainerUILength;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,ct,text,ts,imgfont_use,font_i,font_n,font_g,font_cl,font_gl];CTui.index=i2;CT_Repaint=1;return}CT_ContainerUI[CT_ContainerUILength]=[id,win_index,type,x,y,ct,text,ts,imgfont_use,font_i,font_n,font_g,font_cl,font_gl];CTui.index=CT_ContainerUILength;CT_ContainerUILength++;CT_Repaint=1}if(type===3){var x=CTui.x;var y=CTui.y;var w=16;var h=16;var cbg=CTui.color_background;var cb=CTui.color_border;var cw=CTui.color_widget;var id=CTui.id;var status=CTui.status;if(status===0||status===1){var i2;for(i2=0;i2<CT_ContainerUILength;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,w,h,cbg,cb,cw,status];CTui.index=i2;CT_Repaint=1;return}CT_ContainerUI[CT_ContainerUILength]=[id,win_index,type,x,y,w,h,cbg,cb,cw,status];CTui.index=CT_ContainerUILength;CT_ContainerUILength++;CT_Repaint=1}else cprint("ERROR : Checkbox state error.")}if(type===4){var x=CTui.x;var y=CTui.y;var w=16;var h=16;var cbg=CTui.color_background;var cb=CTui.color_border;var cw=CTui.color_widget;var g=CTui.group;var id=CTui.id;if(g>=0){var i2;for(i2=0;i2<CT_ContainerUILength;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,w,h,cbg,cb,cw,g,0];CTui.index=i2;var i3;var radio_first=-1;var radio_sel=0;for(i3=0;i3<CT_ContainerUILength;i3++)if(CT_ContainerUI[i3]!=null){var ui_type=CT_ContainerUI[i3][2];if(ui_type===4){var radio_g=CT_ContainerUI[i3][10];if(radio_g===g){if(radio_first===-1)radio_first=i3;var radio_s=CT_ContainerUI[i3][11];if(radio_s===1)radio_sel=1}}}if(radio_sel===0)CT_ContainerUI[radio_first][11]=1;CT_Repaint=1;return}CT_ContainerUI[CT_ContainerUILength]=[id,win_index,type,x,y,w,h,cbg,cb,cw,g,0];CTui.index=CT_ContainerUILength;CT_ContainerUILength++;CT_Repaint=1;var i3;var radio_first=-1;var radio_sel=0;for(i3=0;i3<CT_ContainerUILength;i3++)if(CT_ContainerUI[i3]!=null){var ui_type=CT_ContainerUI[i3][2];if(ui_type===4){var radio_g=CT_ContainerUI[i3][10];if(radio_g===g){if(radio_first===-1)radio_first=i3;var radio_s=CT_ContainerUI[i3][11];if(radio_s===1)radio_sel=1}}}if(radio_sel===0)CT_ContainerUI[radio_first][11]=1;CT_Repaint=1}else cprint("ERROR : Invalid radio group.")}if(type===5){var x=CTui.x;var y=CTui.y;var w=CTui.width;var h=CTui.height;var cbg=CTui.color_background;var cbu=CTui.color_borderUp;var cbd=CTui.color_borderDown;var cbl=CTui.color_borderLeft;var cbr=CTui.color_borderRight;var cw=CTui.color_widget;var pi=CTui.background;var pio=CTui.background_o;var val=CTui.value;var maxval=CTui.maxvalue;var id=CTui.id;if(pi!==-1){var res_type=CT_ResourceList[pi][1];if(res_type!==0){pi=-1;cprint("ERROR : The resource index corresponding to the resource file is not a image.")}}if(w>0&&h>0&&val>=0&&maxval>0&&val<=maxval){var w_w=parseInt((w-8)/maxval*val);var i2;for(i2=0;i2<CT_ContainerUILength;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,w,h,cbg,cbu,cbd,cbl,cbr,cw,pi,w_w,val,maxval,pio];CTui.index=i2;CT_Repaint=1;return}CT_ContainerUI[CT_ContainerUILength]=[id,win_index,type,x,y,w,h,cbg,cbu,cbd,cbl,cbr,cw,pi,w_w,val,maxval,pio];CTui.index=CT_ContainerUILength;CT_ContainerUILength++;CT_Repaint=1}else cprint("ERROR : Unable to create progressbar.")}if(type===6){var x=CTui.x;var y=CTui.y;var w=CTui.width;var h=CTui.height;var tbg=CTui.color_background;var tbu=CTui.color_borderUp;var tbd=CTui.color_borderDown;var tbl=CTui.color_borderLeft;var tbr=CTui.color_borderRight;var tc=CTui.color_text;var tb=CTui.background;var tb_o=CTui.background_o;var tpass=CTui.password;var tnumb=CTui.number;var tmax=CTui.max;var readonly=CTui.readonly;var subbox=CTui.subbox;var name=CTui.name;var size=CTui.size;var id=CTui.id;var font_i=0;var font_n=0;var font_g=0;var font_cl=null;var font_gl=null;var imgfont_use=0;if(tb!==-1){var res_type=CT_ResourceList[tb][1];if(res_type!==0){tb=-1;cprint("ERROR : The resource index corresponding to the resource file is not a image.")}}if(CTui.imgfont!=null)if(CTui.imgfont.FontImg!==-1&&CTui.imgfont.CharNumber>0&&CTui.imgfont.CharList!=null&&CTui.imgfont.GlyphList!=null){font_i=CTui.imgfont.FontImg;font_n=CTui.imgfont.CharNumber;font_g=CTui.imgfont.CharGap;font_cl=CTui.imgfont.CharList;font_gl=CTui.imgfont.GlyphList;size=CTui.imgfont.CharHeight;imgfont_use=1}else cprint("ERROR : Image of the imgfont is invalid.");if(w>0&&h>0&&tpass>=0&&tnumb>=0&&tmax>0){var i2;for(i2=0;i2<CT_ContainerUILength;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,w,h,tbg,tbu,tbd,tbl,tbr,tc,tb,"",tpass,tnumb,tmax,readonly,subbox,name,size,tb_o,imgfont_use,font_i,font_n,font_g,font_cl,font_gl];CTui.index=i2;CT_Repaint=1;return}CT_ContainerUI[CT_ContainerUILength]=[id,win_index,type,x,y,w,h,tbg,tbu,tbd,tbl,tbr,tc,tb,"",tpass,tnumb,tmax,readonly,subbox,name,size,tb_o,imgfont_use,font_i,font_n,font_g,font_cl,font_gl];CTui.index=CT_ContainerUILength;CT_ContainerUILength++;CT_Repaint=1}else cprint("ERROR : Unable to create textbox.")}if(type===7){var id=CTui.id;var x=CTui.x;var y=CTui.y;var image=CTui.image;var subimg=CTui.subimg;var subimg_o=CTui.subimg_o;var subnum=CTui.subnum;var image_w=0;var image_h=0;var subimg_w=0;var subimg_h=0;if(image!==-1){var res_type=CT_ResourceList[image][1];if(res_type===0){image_w=CT_ResourceList[image][2];image_h=CT_ResourceList[image][3];subimg_w=parseInt(image_w/subnum-subimg_o*2);subimg_h=image_h-subimg_o*2}else cprint("ERROR : The resource index corresponding to the resource file is not a image.");if(subnum>=1&&subimg<=subnum-1){var i2;for(i2=0;i2<CT_ContainerUILength;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,image,subimg,subnum,subimg_w,subimg_h,subimg_o];CTui.index=i2;CT_Repaint=1;return}CT_ContainerUI[CT_ContainerUILength]=[id,win_index,type,x,y,image,subimg,subnum,subimg_w,subimg_h,subimg_o];CTui.index=CT_ContainerUILength;CT_ContainerUILength++;CT_Repaint=1}else cprint("ERROR : The imagement property have error.")}}}else cprint("ERROR : Not is window object.")}function CTui_destroy(CTui){if(CT_RunnerStatus===1)if(CTui.type>0){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){CT_ContainerUI[CTui.index]=null;CT_Repaint=1}}}else cprint("ERROR : Not is UI object.")}function CTui_set_x(CTui,x){if(CT_RunnerStatus===1)if(CTui.type>=1){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){CT_ContainerUI[CTui.index][3]=x;CT_Repaint=1}}}else cprint("ERROR : Not is UI object.")}function CTui_set_y(CTui,y){if(CT_RunnerStatus===1)if(CTui.type>=1){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){CT_ContainerUI[CTui.index][4]=y;CT_Repaint=1}}}else cprint("ERROR : Not is UI object.")}function CTui_set_width(CTui,w){if(CT_RunnerStatus===1)if(CTui.type>=1){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){if(CTui.type===1||CTui.type===6){CT_ContainerUI[CTui.index][5]=w;CT_Repaint=1}if(CTui.type===5){CT_ContainerUI[CTui.index][5]=w;var p_w=CT_ContainerUI[CTui.index][5];var val=CT_ContainerUI[CTui.index][15];var p_maxval=CT_ContainerUI[CTui.index][16];var p_ww=0;if(val<p_maxval)p_ww=parseInt((p_w-8)/p_maxval*val);if(val===p_maxval)p_ww=p_w-8;CT_ContainerUI[CTui.index][14]=p_ww;CT_Repaint=1}if(CTui.type===2||CTui.type===3||CTui.type===4)cprint("ERROR : The UI object not have this property.")}}}else cprint("ERROR : Not is UI object.")}function CTui_set_height(CTui,h){if(CT_RunnerStatus===1)if(CTui.type>=1){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){if(CTui.type===1||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][6]=h;CT_Repaint=1}if(CTui.type===2||CTui.type===3||CTui.type===4)cprint("ERROR : The UI object not have this property.")}}}else cprint("ERROR : Not is UI object.")}function CTui_set_image(CTui,img){if(CT_RunnerStatus===1)if(CTui.type>=1){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){if(CTui.type===1||CTui.type===5||CTui.type===6)if(img!==-1){var res_type=CT_ResourceList[img][1];if(res_type===0){CT_ContainerUI[CTui.index][13]=img;CT_Repaint=1}else cprint("ERROR : The resource index corresponding to the resource file is not a image.")}else{CT_ContainerUI[CTui.index][13]=img;CT_Repaint=1}if(CTui.type===2||CTui.type===3||CTui.type===4)cprint("ERROR : The UI object not support background image.")}}}else cprint("ERROR : Not is UI object.")}function CTui_set_color(CTui,prop,col){if(CT_RunnerStatus===1)if(CTui.type>=1){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){if(prop==="back"){if(CTui.type===1||CTui.type===3||CTui.type===4||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][7]=col;CT_Repaint=1}if(CTui.type===2)cprint("ERROR : The UI object not have this property.")}if(prop==="up"){if(CTui.type===1||CTui.type===3||CTui.type===4||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][8]=col;CT_Repaint=1}if(CTui.type===2)cprint("ERROR : The UI object not have this property.")}if(prop==="down"){if(CTui.type===1||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][9]=col;CT_Repaint=1}if(CTui.type===3||CTui.type===4){CT_ContainerUI[CTui.index][8]=col;CT_Repaint=1}if(CTui.type===2)cprint("ERROR : The UI object not have this property.")}if(prop==="left"){if(CTui.type===1||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][10]=col;CT_Repaint=1}if(CTui.type===3||CTui.type===4){CT_ContainerUI[CTui.index][8]=col;CT_Repaint=1}if(CTui.type===2)cprint("ERROR : The UI object not have this property.")}if(prop==="right"){if(CTui.type===1||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][11]=col;CT_Repaint=1}if(CTui.type===3||CTui.type===4){CT_ContainerUI[CTui.index][8]=col;CT_Repaint=1}if(CTui.type===2)cprint("ERROR : The UI object not have this property.")}if(prop==="text"){if(CTui.type===1||CTui.type===6){CT_ContainerUI[CTui.index][12]=col;CT_Repaint=1}if(CTui.type===2){CT_ContainerUI[CTui.index][5]=col;CT_Repaint=1}if(CTui.type===3||CTui.type===4||CTui.type===5)cprint("ERROR : The UI object not have this property.")}if(prop==="widget"){if(CTui.type===3||CTui.type===4){CT_ContainerUI[CTui.index][9]=col;CT_Repaint=1}if(CTui.type===5){CT_ContainerUI[CTui.index][12]=col;CT_Repaint=1}if(CTui.type===1||CTui.type===2||CTui.type===6)cprint("ERROR : The UI object not have this property.")}}}}else cprint("ERROR : Not is UI object.")}function CTui_set_imgfont(CTui,imgfont){if(CT_RunnerStatus===1)if(CTui.type===1||CTui.type===2||CTui.type===6){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){if(CTui.type===1)if(imgfont!=null){var str=CT_ContainerUI[CTui.index][14];var str_w=CT_ImgStringMeasure(imgfont.CharNumber,imgfont.CharGap,imgfont.CharList,imgfont.GlyphList,str);CT_ContainerUI[CTui.index][15]=str_w;CT_ContainerUI[CTui.index][16]=imgfont.CharHeight;CT_ContainerUI[CTui.index][22]=1;CT_ContainerUI[CTui.index][23]=imgfont.FontImg;CT_ContainerUI[CTui.index][24]=imgfont.CharNumber;CT_ContainerUI[CTui.index][25]=imgfont.CharGap;CT_ContainerUI[CTui.index][26]=imgfont.CharList;CT_ContainerUI[CTui.index][27]=imgfont.GlyphList;CT_Repaint=1}else{var str=CT_ContainerUI[CTui.index][14];var str_w=string_pxwidth(str,CTui.size);CT_ContainerUI[CTui.index][15]=str_w;CT_ContainerUI[CTui.index][16]=CTui.size;CT_ContainerUI[CTui.index][22]=0;CT_ContainerUI[CTui.index][23]=0;CT_ContainerUI[CTui.index][24]=0;CT_ContainerUI[CTui.index][25]=0;CT_ContainerUI[CTui.index][26]=null;CT_ContainerUI[CTui.index][27]=null;CT_Repaint=1}if(CTui.type===2)if(imgfont!=null){CT_ContainerUI[CTui.index][8]=1;CT_ContainerUI[CTui.index][9]=imgfont.FontImg;CT_ContainerUI[CTui.index][10]=imgfont.CharNumber;CT_ContainerUI[CTui.index][11]=imgfont.CharGap;CT_ContainerUI[CTui.index][12]=imgfont.CharList;CT_ContainerUI[CTui.index][13]=imgfont.GlyphList;CT_Repaint=1}else{CT_ContainerUI[CTui.index][8]=0;CT_ContainerUI[CTui.index][9]=0;CT_ContainerUI[CTui.index][10]=0;CT_ContainerUI[CTui.index][11]=0;CT_ContainerUI[CTui.index][12]=null;CT_ContainerUI[CTui.index][13]=null;CT_Repaint=1}if(CTui.type===6)if(imgfont!=null){CT_ContainerUI[CTui.index][23]=1;CT_ContainerUI[CTui.index][24]=imgfont.FontImg;CT_ContainerUI[CTui.index][25]=imgfont.CharNumber;CT_ContainerUI[CTui.index][26]=imgfont.CharGap;CT_ContainerUI[CTui.index][27]=imgfont.CharList;CT_ContainerUI[CTui.index][28]=imgfont.GlyphList}else{CT_ContainerUI[CTui.index][23]=0;CT_ContainerUI[CTui.index][24]=0;CT_ContainerUI[CTui.index][25]=0;CT_ContainerUI[CTui.index][26]=0;CT_ContainerUI[CTui.index][27]=null;CT_ContainerUI[CTui.index][28]=null}}}}else cprint("ERROR : The UI object not support imgfont.")}function button_click(CTui){if(CT_RunnerStatus===1)if(CTui.type===1){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){var b_s=CT_ContainerUI[CTui.index][17];if(b_s===1)return 1}}}else cprint("ERROR : Not is button object.");return 0}function button_press(CTui){if(CT_RunnerStatus===1)if(CTui.type===1){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){var b_s=CT_ContainerUI[CTui.index][18];return b_s}}}else cprint("ERROR : Not is button object.");return 0}function button_down(CTui){if(CT_RunnerStatus===1)if(CTui.type===1){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){var b_s=CT_ContainerUI[CTui.index][19];if(b_s===1)return 1}}}else cprint("ERROR : Not is button object.");return 0}function button_up(CTui){if(CT_RunnerStatus===1)if(CTui.type===1){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){var b_s=CT_ContainerUI[CTui.index][20];if(b_s===1)return 1}}}else cprint("ERROR : Not is button object.");return 0}function checkbox_status(CTui){if(CT_RunnerStatus===1)if(CTui.type===3){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){var c_s=CT_ContainerUI[CTui.index][10];return c_s}}}else cprint("ERROR : Not is checkbox object.");return 0}function radio_status(CTui){if(CT_RunnerStatus===1)if(CTui.type===4){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){var r_s=CT_ContainerUI[CTui.index][11];return r_s}}}else cprint("ERROR : Not is radio object.");return 0}function progressbar_set(CTui,val){if(CT_RunnerStatus===1)if(CTui.type===5){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){var p_w=CT_ContainerUI[CTui.index][5];var p_maxval=CT_ContainerUI[CTui.index][16];var bp_w=0;if(val>=0)if(val<=p_maxval){if(val<p_maxval)bp_w=parseInt((p_w-8)/p_maxval*val);if(val===p_maxval)bp_w=p_w-8;CT_ContainerUI[CTui.index][15]=val;CT_ContainerUI[CTui.index][14]=bp_w;CT_Repaint=1}else cprint("ERROR : The progressbar value greater than the maximum.");else cprint("ERROR : Progressbar value error.")}}}else cprint("ERROR : Not is progressbar object.")}function textbox_string(CTui){if(CT_RunnerStatus===1)if(CTui.type===6){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){var t_s=CT_ContainerUI[CTui.index][14];return t_s}}}else cprint("ERROR : Not is textbox object.");return""}function textbox_set_string(CTui,str){if(CT_RunnerStatus===1)if(CTui.type===6){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){CT_ContainerUI[CTui.index][14]=str;CT_Repaint=1}}}else cprint("ERROR : Not is textbox object.")}function imagement_set_image(CTui,img,subnum){if(CT_RunnerStatus===1)if(CTui.type===7){if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){var res_type=CT_ResourceList[img][1];if(res_type===0){var image_w=CT_ResourceList[img][2];var image_h=CT_ResourceList[img][3];var subimg_w=0;var subimg_h=0;var subimg_o=CT_ContainerUI[CTui.index][10];if(subimg_o===0){subimg_w=parseInt(image_w/subnum);subimg_h=image_h}if(subimg_o>0){subimg_w=parseInt(image_w/subnum-subimg_o*2);subimg_h=image_h-subimg_o*2}CT_ContainerUI[CTui.index][5]=img;CT_ContainerUI[CTui.index][6]=0;CT_ContainerUI[CTui.index][7]=subnum;CT_ContainerUI[CTui.index][8]=subimg_w;CT_ContainerUI[CTui.index][9]=subimg_h;CT_Repaint=1}else cprint("ERROR : The resource index corresponding to the resource file is not a image.")}}}else cprint("ERROR : Not is imagement object.")}function imagement_set_subimg(CTui,i){if(CT_RunnerStatus===1)if(CTui.type===7)if(CT_ContainerUI[CTui.index]!=null){var Cui_id=CT_ContainerUI[CTui.index][0];if(CTui.id===Cui_id){var subnum=CT_ContainerUI[CTui.index][7];if(subnum>=1&&i<=subnum-1){CT_ContainerUI[CTui.index][6]=i;CT_Repaint=1}else cprint("ERROR : The imagement argument have error.")}}}"use strict";var CT_ResourceList=[];var CT_ContainerResource=[];var CT_ResLength=0;var CT_SplashImage;var CT_LoadBarWidgetLoad=0;var CT_LoadBarWidgetIndex=0;function CT_ResourceLoadStart(){cprint("-----Load resource-----");if(CT_SPLASH_SHOW===1){CT_SplashImage=new Image;CT_SplashImage.src="splash.png";CT_SplashImage.onload=function(){CT_LoadBarShow(0);CT_ResourceLoad()};CT_SplashImage.onerror=function(){CT_SplashImage=new Image;CT_SplashImage.src="splash.jpg";CT_SplashImage.onload=function(){CT_LoadBarShow(0);CT_ResourceLoad()};CT_SplashImage.onerror=function(){CT_SplashImage=new Image;CT_SplashImage.src="splash.bmp";CT_SplashImage.onload=function(){CT_LoadBarShow(0);CT_ResourceLoad()};CT_SplashImage.onerror=function(){CT_LoadBarShowError(0,"splash.xxx")}}}}else{CT_LoadBarShow(0);CT_ResourceLoad()}}function CT_ResourceLoad(){if(CT_ResourceList.length!==0){var res_name=CT_ResourceList[CT_ResLength][0].slice(CT_ResourceList[CT_ResLength][0].lastIndexOf("/")+1);if(res_name.lastIndexOf(".")!==-1)if(res_name.lastIndexOf(".")!==0){var extname_pos=res_name.lastIndexOf(".")+1;var res_extname=res_name.slice(extname_pos);if(res_extname==="png"||res_extname==="jpg"||res_extname==="jpeg"||res_extname==="bmp"||res_extname==="mp3"||res_extname==="ogg"){if(res_extname==="png"||res_extname==="jpg"||res_extname==="jpeg"||res_extname==="bmp")CT_ResourceLoad_Image(CT_ResourceList[CT_ResLength][0]);if(res_extname==="mp3"||res_extname==="ogg")CT_ResourceLoad_Audio(CT_ResourceList[CT_ResLength][0])}else CT_ResourceLoad_Text(CT_ResourceList[CT_ResLength][0])}else cprint("ERROR : The resource file name is error : "+CT_ResourceList[CT_ResLength][0]);else cprint("ERROR : The resource file name is not support : "+CT_ResourceList[CT_ResLength][0])}else CT_ResourceLoadEnd()}function CT_ResourceLoad_Image(path){var image=new Image;image.src=path;image.onload=function(){CT_ContainerResource[CT_ResLength]=image;var image_w=image.width;var image_h=image.height;CT_ResourceList[CT_ResLength][1]=0;CT_ResourceList[CT_ResLength][2]=image_w;CT_ResourceList[CT_ResLength][3]=image_h;cprint("Resource load : "+path);CT_loadBarWidget();CT_ResLength++;if(CT_ResLength===CT_ResourceList.length)CT_ResourceLoadEnd();else CT_ResourceLoad()};image.onerror=function(){CT_LoadBarShowError(0,path)}}function CT_ResourceLoad_Audio(path){var audio=new Audio;audio.src=path;CT_ContainerResource[CT_ResLength]=audio;CT_ResourceList[CT_ResLength][1]=1;cprint("Resource load : "+path);CT_loadBarWidget();CT_ResLength++;if(CT_ResLength===CT_ResourceList.length)CT_ResourceLoadEnd();else CT_ResourceLoad();audio.onerror=function(){CT_LoadBarShowError(0,path)}}function CT_ResourceLoad_Text(file_path){var xmlhttp=new XMLHttpRequest;xmlhttp.open("GET",file_path,true);xmlhttp.send();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState===4)if(xmlhttp.status===200){CT_ContainerResource[CT_ResLength]=xmlhttp.responseText;CT_ResourceList[CT_ResLength][1]=2;cprint("Resource load : "+CT_ResourceList[CT_ResLength][0]);CT_loadBarWidget();CT_ResLength++;if(CT_ResLength===CT_ResourceList.length)CT_ResourceLoadEnd();else CT_ResourceLoad()}if(xmlhttp.status===404)CT_LoadBarShowError(0,CT_ResourceList[CT_ResLength][0])}}function CT_ResourceLoadEnd(){cprint("------------------------");if(CT_SPLASH_SHOW===1)CT_SplashImage=null;CTBCanvas_Clear();CTBCanvas_Output();CT_RunnerStart()}function CT_loadBarWidget(){CT_LoadBarWidgetLoad++;if(CT_LoadBarWidgetLoad===10){CT_LoadBarWidgetIndex++;if(CT_LoadBarWidgetIndex>14)CT_LoadBarWidgetIndex=0;CT_LoadBarShow(CT_LoadBarWidgetIndex);CT_LoadBarWidgetLoad=0}}function CT_BufferSplash(){CT_BCtx.drawImage(CT_SplashImage,0,0)}function CT_LoadBarShow(n){var bar_w=400;var bar_h=30;var title="Loading...";var lump_w=28;var lump_h=22;var bar_x=parseInt((CT_CanvasW-bar_w)/2);var bar_y=parseInt((CT_CanvasH-bar_h)/2);var title_w=string_pxwidth(title,20);var title_h=20;var title_x=parseInt((CT_CanvasW-title_w)/2);var title_y=bar_y-35;var bar_c=color(210,193,153,255);CTBCanvas_Clear();if(CT_SPLASH_SHOW===1)CT_BufferSplash();if(CT_LOADBAR_SHOW===1){CTBCanvas_String(title_x,title_y,16,bar_c,title);CTBCanvas_Rectangle(bar_x,bar_y,400,30,bar_c,0);CTBCanvas_Rectangle(bar_x+1,bar_y+1,398,28,bar_c,0);if(n>=1&&n<=14){var lump_x=bar_x+4+(n-1)*lump_w;var lump_y=bar_y+4;CTBCanvas_Rectangle(lump_x,lump_y,lump_w,lump_h,bar_c,1)}}CTBCanvas_Output()}function CT_LoadBarShowError(c,s){var err_x=parseInt(CT_CanvasW*.2);var err_y=parseInt((CT_CanvasH-30)/2)+40;var err_c=color(210,193,153,255);if(CT_LOADBAR_SHOW===1){if(c===0){CTBCanvas_Clear();CTBCanvas_String(err_x,err_y,16,err_c,"ERROR : The resource file is not found : "+s);CTBCanvas_Output()}if(c===-1){CTBCanvas_Clear();CTBCanvas_String(err_x,err_y,16,err_c,"ERROR : Run context is local,can't load text file : "+s);CTBCanvas_Output()}}}"use strict";var CT_Repaint=0;var CT_ContainerTask=[];var CT_ContainerTaskNum=[];var CT_ContainerTaskStr=[];var CT_ContainerTaskLength=0;var CT_TaskStateList=[];var CT_TaskRunIndex=0;var CT_ViewX=0;var CT_ViewY=0;var CT_ViewLastX=0;var CT_ViewLastY=0;var CT_RunnerStatus=1;var CT_RectabData="";var CT_RectabName="";function CT_RunnerStart(){cprint("CanvasTable Running...");CT_Main();requestAnimationFrame(CT_RunnerLoop)}function CT_RunnerLoop(){if(CT_RunnerStatus===0){CT_RunnerStatus=1;CT_Repaint=1}CT_GlobalTimerRun();CT_TimerRun();CT_UIRun();CT_TaskReady();CT_TaskRunMain();CT_TaskRunLoop();CT_Loop();CT_SpriteReset();CT_ButtonReset();CT_KeyboardReset();if(CT_Repaint===1){if(CT_RunnerStatus===1)CT_RunnerBufferRender();CT_Repaint=0}requestAnimationFrame(CT_RunnerLoop)}function CT_InterfaceRepaint(){CT_Repaint=1}function CT_RunnerBufferRender(){var i;CTBCanvas_Clear();for(i=0;i<32;i++){CT_TileRender(i);CT_SpriteRender(i);CT_UIRender(i);CT_DrawRender(i)}CT_TouchKeyRender();CTBCanvas_Output()}function CT_TaskCreated(task_i,task_m,task_l){if(task_i<=CT_ContainerTaskLength){CT_ContainerTask[task_i]=[task_m,task_l];CT_TaskStateList[task_i]=0;CT_ContainerTaskNum[task_i]=[];CT_ContainerTaskStr[task_i]=[];CT_ContainerTaskLength+=1}}function CT_TaskDestroy(task_i){if(task_i<CT_ContainerTaskLength){CT_ContainerTask[task_i]=null;CT_TaskStateList[task_i]=null;CT_ContainerTaskNum[task_i]=null;CT_ContainerTaskStr[task_i]=null}}function CT_TaskSetNum(ti,i,n){if(ti<CT_ContainerTaskLength)CT_ContainerTaskNum[ti][i]=n}function CT_TaskNum(ti,i){if(ti<CT_ContainerTaskLength)if(CT_ContainerTaskNum[ti][i]!=null){var num=CT_ContainerTaskNum[ti][i];return num}return 0}function CT_TaskSetStr(ti,i,s){if(ti<CT_ContainerTaskLength)CT_ContainerTaskStr[ti][i]=s}function CT_TaskStr(ti,i){if(ti<CT_ContainerTaskLength)if(CT_ContainerTaskStr[ti][i]!=null){var str=CT_ContainerTaskStr[ti][i];return str}return""}function CT_TaskReady(){var i;for(i=0;i<CT_ContainerTaskLength;i++)if(CT_TaskStateList[i]!=null)if(CT_TaskStateList[i]===0)CT_TaskStateList[i]=1}function CT_TaskRunMain(){var i;for(i=0;i<CT_ContainerTaskLength;i++)if(CT_ContainerTask[i]!=null)if(CT_TaskStateList[i]!=null)if(CT_TaskStateList[i]===1){CT_TaskRunIndex=i;CT_ContainerTask[i][0]();CT_TaskStateList[i]=2}CT_TaskRunIndex=0}function CT_TaskRunLoop(){var i;for(i=0;i<CT_ContainerTaskLength;i++)if(CT_ContainerTask[i]!=null)if(CT_TaskStateList[i]!=null)if(CT_TaskStateList[i]===2){CT_TaskRunIndex=i;CT_ContainerTask[i][1]()}CT_TaskRunIndex=0}function CT_RunnerReset(){CT_ContainerDraw=[];CT_ContainerDrawLength=0;CT_DrawLayer=0;CT_ContainerWindow=[];CT_ContainerWindowLength=0;CT_ContainerUI=[];CT_ContainerUILength=0;CT_ContainerSprite=[];CT_ContainerSpriteLength=0;CT_ContainerTile=[];CT_ContainerTileLength=0;CT_ContainerTask=[];CT_TaskStateList=[];CT_ContainerTaskNum=[];CT_ContainerTaskStr=[];CT_ContainerTaskLength=0;CT_TaskRunIndex=0;CT_ContainerTimer=[];CT_ContainerTimerLength=0;CT_ViewX=0;CT_ViewY=0;CT_ViewLastX=0;CT_ViewLastY=0;CT_DialogDestroy();CT_Textbox_Index=-1;CT_DownX=-1;CT_DownY=-1;CT_DialogShow=0;CT_Dialog_Index=-1}"use strict";var CT_sceneWidth=0;var CT_sceneHeight=0;var CT_GridWidth=30;var CT_GridHeight=30;var CT_TileOffset=0;var CT_ContainerTile=[];var CT_ContainerTileLength=0;function CT_TileRender(l){var vx=CT_ViewX;var vy=CT_ViewY;var i;for(i=0;i<CT_ContainerTileLength;i++)if(CT_ContainerTile[i]!=null){var tl=CT_ContainerTile[i][0];if(tl===l){var tx=CT_ContainerTile[i][1];var ty=CT_ContainerTile[i][2];var ti=CT_ContainerTile[i][3];var tix=CT_ContainerTile[i][4];var tiy=CT_ContainerTile[i][5];if(tx+CT_GridWidth>vx&&tx<vx+CT_CanvasW&&ty+CT_GridHeight>vy&&ty<vy+CT_CanvasH)CTBCanvas_ImagePart(tx-vx,ty-vy,ti,tix,tiy,CT_GridWidth,CT_GridHeight)}}}function CT_TileBuild(l,x,y,res,gx,gy){var tix=CT_TileOffset+CT_GridWidth*gx+gx*CT_TileOffset*2;var tiy=CT_TileOffset+CT_GridHeight*gy+gy*CT_TileOffset*2;var tile_i=CT_ContainerTileLength;if(res!==-1){var res_type=CT_ResourceList[res][1];if(res_type===0){CT_ContainerTile[tile_i]=[l,x,y,res,tix,tiy];CT_ContainerTileLength++}else cprint("ERROR : The resource index corresponding to the resource file is not a image.")}}"use strict";var CT_ContainerSprite=[];var CT_ContainerSpriteLength=0;var CT_SpriteId=0;function CT_SpriteGetId(){var id=CT_SpriteId;CT_SpriteId++;if(CT_SpriteId>21E8)CT_SpriteId=63E7;return id}function CT_SpriteRender(l){var vx=CT_ViewX;var vy=CT_ViewY;var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var sl=CT_ContainerSprite[i][1];if(sl===l){var x=CT_ContainerSprite[i][2];var y=CT_ContainerSprite[i][3];var image=CT_ContainerSprite[i][4];var subimg=CT_ContainerSprite[i][5];var subimg_o=CT_ContainerSprite[i][13];var subimg_w=CT_ContainerSprite[i][7];var subimg_h=CT_ContainerSprite[i][8];var alpha=CT_ContainerSprite[i][21];var scale_x=CT_ContainerSprite[i][22];var scale_y=CT_ContainerSprite[i][23];var rotate=CT_ContainerSprite[i][24];if(image!==-1)if(x+subimg_w*scale_x>vx&&x<vx+CT_CanvasW&&y+subimg_h*scale_y>vy&&y<vy+CT_CanvasH){var si_x=subimg*subimg_w;var si_y=0;if(subimg_o>0){si_x=subimg_o+subimg_w*subimg+subimg*subimg_o*2;si_y=subimg_o}if(alpha===255&&scale_x===1&&scale_y===1&&rotate===0)CTBCanvas_ImagePart(x-vx,y-vy,image,si_x,si_y,subimg_w,subimg_h);else CT_SpriteFlat(x-vx,y-vy,image,si_x,si_y,subimg_w,subimg_h,alpha,scale_x,scale_y,rotate)}}}}function CT_SpriteReset(){var i;for(i=0;i<CT_ContainerSpriteLength;i++)if(CT_ContainerSprite[i]!=null){var spr_x=CT_ContainerSprite[i][2];var spr_y=CT_ContainerSprite[i][3];CT_ContainerSprite[i][9]=spr_x;CT_ContainerSprite[i][10]=spr_y}}function CT_SpriteFlat(x,y,img,six,siy,siw,sih,alpha,sx,sy,rot){var dx=x;var dy=y;CT_BCtx.save();if(rot!==0){dx=parseInt(0-siw/2);dy=parseInt(0-sih/2);var cx=0;var cy=0;var rot_a=Math.PI/180*rot;if(sx!==1||sy!==1){cx=parseInt(x+siw*sx/2);cy=parseInt(y+sih*sy/2);CT_BCtx.translate(cx,cy);CT_BCtx.rotate(rot_a);CT_BCtx.scale(sx,sy)}else{cx=parseInt(x+siw/2);cy=parseInt(y+sih/2);CT_BCtx.translate(cx,cy);CT_BCtx.rotate(rot_a)}}else if(sx!==1||sy!==1){dx=0;dy=0;CT_BCtx.translate(x,y);CT_BCtx.scale(sx,sy)}CT_BCtx.globalAlpha=alpha/255;CT_BCtx.drawImage(CT_ContainerResource[img],six,siy,siw,sih,dx,dy,siw,sih);CT_BCtx.globalAlpha=1;CT_BCtx.restore()}"use strict";var CT_ContainerTimer=[];var CT_ContainerTimerLength=0;var CT_ContainerGlobalTimer=[];var CT_ContainerGlobalTimerLength=0;function CT_TimerRun(){var i;for(i=0;i<CT_ContainerTimerLength;i++)if(CT_ContainerTimer[i]!=null)if(CT_ContainerTimer[i][3]===1){CT_ContainerTimer[i][1]-=1;if(CT_ContainerTimer[i][1]===0){CT_ContainerTimer[i][3]=2;var timer_duration=CT_ContainerTimer[i][2];CT_ContainerTimer[i][1]=timer_duration}}}function CT_GlobalTimerRun(){var i;for(i=0;i<CT_ContainerGlobalTimerLength;i++)if(CT_ContainerGlobalTimer[i]!=null)if(CT_ContainerGlobalTimer[i][3]===1){CT_ContainerGlobalTimer[i][1]-=1;if(CT_ContainerGlobalTimer[i][1]===0){CT_ContainerGlobalTimer[i][3]=2;var timer_duration=CT_ContainerGlobalTimer[i][2];CT_ContainerGlobalTimer[i][1]=timer_duration}}}"use strict";var CT_UIId=0;var CT_ContainerWindow=[];var CT_ContainerWindowLength=0;var CT_ContainerUI=[];var CT_ContainerUILength=0;var CT_Textbox_Index=-1;var CT_DownX=-1;var CT_DownY=-1;var CT_DialogShow=0;var CT_Dialog_Index=-1;function CT_UIGetId(){var id=CT_UIId;CT_UIId++;if(CT_UIId>21E8)CT_UIId=63E7;return id}function CT_UIRun(){var i;for(i=0;i<CT_ContainerWindowLength;i++)if(CT_ContainerWindow[i]!=null){var win_x=CT_ContainerWindow[i][2];var win_y=CT_ContainerWindow[i][3];var win_w=CT_ContainerWindow[i][4];var win_h=CT_ContainerWindow[i][5];var i2;for(i2=0;i2<CT_ContainerUILength;i2++)if(CT_ContainerUI[i2]!=null){var ui_win_index=CT_ContainerUI[i2][1];if(ui_win_index===i){var ui_x=win_x+CT_ContainerUI[i2][3];var ui_y=win_y+CT_ContainerUI[i2][4];var ui_w=CT_ContainerUI[i2][5];var ui_h=CT_ContainerUI[i2][6];var ui_type=CT_ContainerUI[i2][2];if(ui_type===1){if(mouse_down(mkey_left)){CT_DownX=mouse_x();CT_DownY=mouse_y();if(CT_DownX>=ui_x&&CT_DownY>=ui_y&&CT_DownX<ui_x+ui_w&&CT_DownY<ui_y+ui_h)if(CT_DialogShow===0){CT_ContainerUI[i2][18]=1;CT_ContainerUI[i2][19]=1}}if(mouse_up(mkey_left)){CT_ContainerUI[i2][18]=0;var up_x=mouse_x();var up_y=mouse_y();if(CT_DownX>=ui_x&&CT_DownY>=ui_y&&CT_DownX<=ui_x+ui_w&&CT_DownY<=ui_y+ui_h&&up_x>=ui_x&&up_y>=ui_y&&up_x<=ui_x+ui_w&&up_y<=ui_y+ui_h)if(CT_DialogShow===0){CT_ContainerUI[i2][17]=1;CT_ContainerUI[i2][20]=1}}}if(ui_type===3){if(mouse_down(mkey_left)){CT_DownX=mouse_x();CT_DownY=mouse_y()}if(mouse_up(mkey_left)){var up_x=mouse_x();var up_y=mouse_y();if(CT_DownX>=ui_x&&CT_DownY>=ui_y&&CT_DownX<=ui_x+ui_w&&CT_DownY<=ui_y+ui_h&&up_x>=ui_x&&up_y>=ui_y&&up_x<=ui_x+ui_w&&up_y<=ui_y+ui_h){var c_s=CT_ContainerUI[i2][10];if(c_s===0){CT_ContainerUI[i2][10]=1;CT_Repaint=1;return}if(c_s===1){CT_ContainerUI[i2][10]=0;CT_Repaint=1;return}}}}if(ui_type===4){if(mouse_down(mkey_left)){CT_DownX=mouse_x();CT_DownY=mouse_y()}if(mouse_up(mkey_left)){var up_x=mouse_x();var up_y=mouse_y();if(CT_DownX>=ui_x&&CT_DownY>=ui_y&&CT_DownX<=ui_x+ui_w&&CT_DownY<=ui_y+ui_h&&up_x>=ui_x&&up_y>=ui_y&&up_x<=ui_x+ui_w&&up_y<=ui_y+ui_h){var radio_g=CT_ContainerUI[i2][10];var i3;for(i3=0;i3<CT_ContainerUILength;i3++)if(CT_ContainerUI[i3]!=null){var c_ui_type=CT_ContainerUI[i3][2];if(c_ui_type===4){var c_radio_g=CT_ContainerUI[i3][10];if(c_radio_g===radio_g)CT_ContainerUI[i3][11]=0}}CT_ContainerUI[i2][11]=1;CT_Repaint=1}}}if(ui_type===6){if(mouse_down(mkey_left)){CT_DownX=mouse_x();CT_DownY=mouse_y()}if(mouse_up(mkey_left)){var up_x=mouse_x();var up_y=mouse_y();if(CT_DownX>=ui_x&&CT_DownY>=ui_y&&CT_DownX<=ui_x+ui_w&&CT_DownY<=ui_y+ui_h&&up_x>=ui_x&&up_y>=ui_y&&up_x<=ui_x+ui_w&&up_y<=ui_y+ui_h){var subbox=CT_ContainerUI[i2][19];if(subbox===0)CT_Textbox_Index=i2;if(subbox===1||CT_DEVICE===1){var readonly=CT_ContainerUI[i2][18];if(readonly===0){var t_val=CT_ContainerUI[i2][14];var t_name=CT_ContainerUI[i2][20];var t_max=CT_ContainerUI[i2][17];var t_pass=CT_ContainerUI[i2][15];var t_numb=CT_ContainerUI[i2][16];CT_Textbox_Index=-1;CT_Dialog_Index=i2;CT_DialogCreate(t_val,t_name,t_max,t_pass,t_numb)}}CT_Repaint=1;return}}if(CT_Textbox_Index===i2)if(CT_ContainerUI[CT_Textbox_Index]!=null){var readonly=CT_ContainerUI[CT_Textbox_Index][18];if(readonly===0){if(CT_KeyChar!==""&&CT_KeyChar!=="\b"){var tbox_length=CT_ContainerUI[CT_Textbox_Index][14].length;var tbox_max=CT_ContainerUI[CT_Textbox_Index][17];var tbox_number=CT_ContainerUI[CT_Textbox_Index][16];if(tbox_length<tbox_max)if(tbox_number!==1){CT_ContainerUI[CT_Textbox_Index][14]+=CT_KeyChar;CT_Repaint=1}else if(CT_KeyChar==="0"||CT_KeyChar==="1"||CT_KeyChar==="2"||CT_KeyChar==="3"||CT_KeyChar==="4"||CT_KeyChar==="5"||CT_KeyChar==="6"||CT_KeyChar==="7"||CT_KeyChar==="8"||CT_KeyChar==="9"){CT_ContainerUI[CT_Textbox_Index][14]+=CT_KeyChar;CT_Repaint=1}}if(CT_KeyChar==="\b"){var tbox_length=CT_ContainerUI[CT_Textbox_Index][14].length;if(tbox_length>0){CT_ContainerUI[CT_Textbox_Index][14]=CT_ContainerUI[CT_Textbox_Index][14].slice(0,tbox_length-1);CT_Repaint=1}}}}}}}}}function CT_UIRender(l){var i;var win_index=0;for(i=0;i<CT_ContainerWindowLength;i++){win_index=i;if(CT_ContainerWindow[i]!=null){var window_layer=CT_ContainerWindow[i][1];if(window_layer===l){var win_x=CT_ContainerWindow[i][2];var win_y=CT_ContainerWindow[i][3];var win_w=CT_ContainerWindow[i][4];var win_h=CT_ContainerWindow[i][5];var win_cbg=CT_ContainerWindow[i][6];var win_cbu=CT_ContainerWindow[i][7];var win_cbd=CT_ContainerWindow[i][8];var win_cbl=CT_ContainerWindow[i][9];var win_cbr=CT_ContainerWindow[i][10];var win_img=CT_ContainerWindow[i][11];var win_imgo=CT_ContainerWindow[i][12];if(win_img!==-1){var img_w=CT_ResourceList[win_img][2]-win_imgo*2;var img_h=CT_ResourceList[win_img][3]-win_imgo*2;CTBCanvas_ImagePart(win_x,win_y,win_img,win_imgo,win_imgo,img_w,img_h)}else{CTBCanvas_Rectangle(win_x,win_y,win_w,win_h,win_cbg,1);CTBCanvas_Rectangle(win_x,win_y-2,win_w,2,win_cbu,1);CTBCanvas_Rectangle(win_x,win_y+win_h,win_w,2,win_cbd,1);CTBCanvas_Rectangle(win_x-2,win_y-2,2,win_h+4,win_cbl,1);CTBCanvas_Rectangle(win_x+win_w,win_y-2,2,win_h+4,win_cbr,1)}var i2;for(i2=0;i2<CT_ContainerUILength;i2++)if(CT_ContainerUI[i2]!=null){var ui_win_index=CT_ContainerUI[i2][1];if(ui_win_index===win_index){var ui_type=CT_ContainerUI[i2][2];if(ui_type===1){var b_x=win_x+CT_ContainerUI[i2][3];var b_y=win_y+CT_ContainerUI[i2][4];var b_w=CT_ContainerUI[i2][5];var b_h=CT_ContainerUI[i2][6];var b_cbg=CT_ContainerUI[i2][7];var b_cbu=CT_ContainerUI[i2][8];var b_cbd=CT_ContainerUI[i2][9];var b_cbl=CT_ContainerUI[i2][10];var b_cbr=CT_ContainerUI[i2][11];var b_ct=CT_ContainerUI[i2][12];var b_img=CT_ContainerUI[i2][13];var b_imgo=CT_ContainerUI[i2][21];var b_t=CT_ContainerUI[i2][14];var b_tw=CT_ContainerUI[i2][15];var b_th=CT_ContainerUI[i2][16];var b_tx=parseInt(b_x+(b_w-b_tw)/2);var b_ty=parseInt(b_y+(b_h-b_th)/2);var imgfont_use=CT_ContainerUI[i2][22];if(b_img!==-1){var img_w=CT_ResourceList[b_img][2]-b_imgo*2;var img_h=CT_ResourceList[b_img][3]-b_imgo*2;CTBCanvas_ImagePart(b_x,b_y,b_img,b_imgo,b_imgo,img_w,img_h)}else{CTBCanvas_Rectangle(b_x,b_y,b_w,b_h,b_cbg,1);CTBCanvas_Rectangle(b_x,b_y,b_w,2,b_cbu,1);CTBCanvas_Rectangle(b_x,b_y+b_h-2,b_w,2,b_cbd,1);CTBCanvas_Rectangle(b_x,b_y,2,b_h-2,b_cbl,1);CTBCanvas_Rectangle(b_x+b_w-2,b_y,2,b_h-2,b_cbr,1)}if(imgfont_use===1){var b_font_img=CT_ContainerUI[i2][23];var b_font_charnum=CT_ContainerUI[i2][24];var b_font_chargap=CT_ContainerUI[i2][25];var b_font_charlist=CT_ContainerUI[i2][26];var b_font_glyphlist=CT_ContainerUI[i2][27];CTBCanvas_ImgString(b_tx,b_ty,b_ct,b_t,b_font_img,b_font_charnum,b_font_chargap,b_font_charlist,b_font_glyphlist)}if(imgfont_use===0)CTBCanvas_String(b_tx,b_ty,b_th,b_ct,b_t)}if(ui_type===2){var t_x=win_x+CT_ContainerUI[i2][3];var t_y=win_y+CT_ContainerUI[i2][4];var t_c=CT_ContainerUI[i2][5];var t_t=CT_ContainerUI[i2][6];var imgfont_use=CT_ContainerUI[i2][8];if(imgfont_use===0){var t_s=CT_ContainerUI[i2][7];CTBCanvas_String(t_x,t_y,t_s,t_c,t_t)}if(imgfont_use===1){var t_font_img=CT_ContainerUI[i2][9];var t_font_charnum=CT_ContainerUI[i2][10];var t_font_chargap=CT_ContainerUI[i2][11];var t_font_charlist=CT_ContainerUI[i2][12];var t_font_glyphlist=CT_ContainerUI[i2][13];CTBCanvas_ImgString(t_x,t_y,t_c,t_t,t_font_img,t_font_charnum,t_font_chargap,t_font_charlist,t_font_glyphlist)}}if(ui_type===3){var c_x=win_x+CT_ContainerUI[i2][3];var c_y=win_y+CT_ContainerUI[i2][4];var c_w=CT_ContainerUI[i2][5];var c_h=CT_ContainerUI[i2][6];var c_cbg=CT_ContainerUI[i2][7];var c_cb=CT_ContainerUI[i2][8];var c_cw=CT_ContainerUI[i2][9];var c_s=CT_ContainerUI[i2][10];CTBCanvas_Rectangle(c_x,c_y,c_w,c_h,c_cbg,1);CTBCanvas_Rectangle(c_x,c_y,c_w,c_h,c_cb,0);CTBCanvas_Rectangle(c_x+1,c_y+1,c_w-2,c_h-2,c_cb,0);if(c_s===1){CTBCanvas_Line(c_x+4,c_y+9,c_x+8,c_y+13,2,c_cw);CTBCanvas_Line(c_x+8,c_y+13,c_x+13,c_y+4,2,c_cw)}}if(ui_type===4){var r_x=win_x+CT_ContainerUI[i2][3];var r_y=win_y+CT_ContainerUI[i2][4];var r_w=CT_ContainerUI[i2][5];var r_cgb=CT_ContainerUI[i2][7];var r_cb=CT_ContainerUI[i2][8];var r_cw=CT_ContainerUI[i2][9];var r_s=CT_ContainerUI[i2][11];CTBCanvas_Circle(r_x+8,r_y+8,r_w/2,r_cb,1);CTBCanvas_Circle(r_x+8,r_y+8,r_w/2-2,r_cgb,1);if(r_s===1)CTBCanvas_Circle(r_x+8,r_y+8,r_w/2-4,r_cw,1)}if(ui_type===5){var p_x=win_x+CT_ContainerUI[i2][3];var p_y=win_y+CT_ContainerUI[i2][4];var p_w=CT_ContainerUI[i2][5];var p_h=CT_ContainerUI[i2][6];var p_cgb=CT_ContainerUI[i2][7];var p_cbu=CT_ContainerUI[i2][8];var p_cbd=CT_ContainerUI[i2][9];var p_cbl=CT_ContainerUI[i2][10];var p_cbr=CT_ContainerUI[i2][11];var p_cw=CT_ContainerUI[i2][12];var p_img=CT_ContainerUI[i2][13];var p_ww=CT_ContainerUI[i2][14];var p_imgo=CT_ContainerUI[i2][17];if(p_img!==-1){var img_w=CT_ResourceList[p_img][2]-p_imgo*2;var img_h=CT_ResourceList[p_img][3]-p_imgo*2;CTBCanvas_ImagePart(p_x,p_y,p_img,p_imgo,p_imgo,img_w,img_h)}else{CTBCanvas_Rectangle(p_x,p_y,p_w,p_h,p_cgb,1);CTBCanvas_Rectangle(p_x,p_y,p_w,2,p_cbu,1);CTBCanvas_Rectangle(p_x,p_y+p_h-2,p_w,2,p_cbd,1);CTBCanvas_Rectangle(p_x,p_y,2,p_h-2,p_cbl,1);CTBCanvas_Rectangle(p_x+p_w-2,p_y,2,p_h-2,p_cbr,1)}CTBCanvas_Rectangle(p_x+4,p_y+4,p_ww,p_h-8,p_cw,1)}if(ui_type===6){var t_x=win_x+CT_ContainerUI[i2][3];var t_y=win_y+CT_ContainerUI[i2][4];var t_w=CT_ContainerUI[i2][5];var t_h=CT_ContainerUI[i2][6];var t_cbg=CT_ContainerUI[i2][7];var t_cbu=CT_ContainerUI[i2][8];var t_cbd=CT_ContainerUI[i2][9];var t_cbl=CT_ContainerUI[i2][10];var t_cbr=CT_ContainerUI[i2][11];var t_ct=CT_ContainerUI[i2][12];var t_img=CT_ContainerUI[i2][13];var t_imgo=CT_ContainerUI[i2][22];var t_val=CT_ContainerUI[i2][14];var t_pass=CT_ContainerUI[i2][15];var t_readonly=CT_ContainerUI[i2][18];var imgfont_use=CT_ContainerUI[i2][23];if(t_img!==-1){var img_w=CT_ResourceList[t_img][2]-t_imgo*2;var img_h=CT_ResourceList[t_img][3]-t_imgo*2;CTBCanvas_ImagePart(t_x,t_y,t_img,t_imgo,t_imgo,img_w,img_h)}else{CTBCanvas_Rectangle(t_x,t_y,t_w,t_h,t_cbg,1);CTBCanvas_Rectangle(t_x,t_y,t_w,2,t_cbu,1);CTBCanvas_Rectangle(t_x,t_y+t_h-2,t_w,2,t_cbd,1);CTBCanvas_Rectangle(t_x,t_y,2,t_h-2,t_cbl,1);CTBCanvas_Rectangle(t_x+t_w-2,t_y,2,t_h-2,t_cbr,1)}if(imgfont_use===0){var t_fsize=CT_ContainerUI[i2][21];var text_y=t_y+(t_h-t_fsize)/2;if(t_pass!==1){CTBCanvas_String(t_x+4,text_y,t_fsize,t_ct,t_val);if(i2===CT_Textbox_Index){var val_width=string_pxwidth(t_val,t_fsize);if(t_readonly===0)CTBCanvas_Line(t_x+4+val_width+1,t_y+3,t_x+4+val_width+1,t_y+t_h-3,2,color(0,0,0,255))}}else{var pass_x=t_x+4;var passc_w=string_pxwidth("\u25cf",t_fsize);var val_l=t_val.length;var passi;for(passi=0;passi<val_l;passi++){CTBCanvas_String(pass_x,text_y,t_fsize,t_ct,"\u25cf");pass_x+=passc_w}if(i2===CT_Textbox_Index){var val_width=passc_w*val_l;if(t_readonly===0)CTBCanvas_Line(t_x+4+val_width+1,t_y+3,t_x+4+val_width+1,t_y+t_h-3,2,color(0,0,0,255))}}}if(imgfont_use===1){var t_font_img=CT_ContainerUI[i2][24];var t_font_charnum=CT_ContainerUI[i2][25];var t_font_chargap=CT_ContainerUI[i2][26];var t_th=CT_ContainerUI[i2][21];var t_font_charlist=CT_ContainerUI[i2][27];var t_font_glyphlist=CT_ContainerUI[i2][28];var t_ty=t_y+(t_h-t_th)/2;if(t_pass!==1){CTBCanvas_ImgString(t_x+4,t_ty,t_ct,t_val,t_font_img,t_font_charnum,t_font_chargap,t_font_charlist,t_font_glyphlist);if(i2===CT_Textbox_Index){var val_width=CT_ImgStringMeasure(t_font_charnum,t_font_chargap,t_font_charlist,t_font_glyphlist,t_val);if(t_readonly===0)CTBCanvas_Line(t_x+4+val_width+1,t_y+3,t_x+4+val_width+1,t_y+t_h-3,2,color(0,0,0,255))}}else{var t_val_l=t_val.length;var pass_x=t_x+4;var passc_w=CT_ImgStringMeasure(t_font_charnum,t_font_chargap,t_font_charlist,t_font_glyphlist,"+");var passi;for(passi=0;passi<t_val_l;passi++){CTBCanvas_ImgString(pass_x,t_ty,t_ct,"+",t_font_img,t_font_charnum,t_font_chargap,t_font_charlist,t_font_glyphlist);pass_x+=passc_w+1}if(i2===CT_Textbox_Index){var t_val_l=t_val.length;var val_width=CT_ImgStringMeasure(t_font_charnum,t_font_chargap,t_font_charlist,t_font_glyphlist,"+")*t_val_l+t_val_l;if(t_readonly===0)CTBCanvas_Line(t_x+4+val_width+1,t_y+3,t_x+4+val_width+1,t_y+t_h-3,2,color(0,0,0,255))}}}}if(ui_type===7){var ie_x=win_x+CT_ContainerUI[i2][3];var ie_y=win_y+CT_ContainerUI[i2][4];var ie_i=CT_ContainerUI[i2][5];var ie_si=CT_ContainerUI[i2][6];var ie_si_o=CT_ContainerUI[i2][10];var ie_si_w=CT_ContainerUI[i2][8];var ie_si_h=CT_ContainerUI[i2][9];if(ie_i!==-1){var si_x=ie_si*ie_si_w;var si_y=0;if(ie_si_o>0){si_x=ie_si_o+ie_si_w*ie_si+ie_si*ie_si_o*2;si_y=ie_si_o}CTBCanvas_ImagePart(ie_x,ie_y,ie_i,si_x,si_y,ie_si_w,ie_si_h)}}}}}}}}function CT_ButtonReset(){var i;for(i=0;i<CT_ContainerUILength;i++)if(CT_ContainerUI[i]!=null){var ui_type=CT_ContainerUI[i][2];if(ui_type===1){CT_ContainerUI[i][17]=0;CT_ContainerUI[i][19]=0;CT_ContainerUI[i][20]=0}}};