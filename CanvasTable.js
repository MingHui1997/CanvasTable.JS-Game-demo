'use strict';var CT_dialog;var CT_ContainerDraw=[];var CT_ContainerDrawIndex=0;var CT_DrawLayer=0;var CT_Canvas;var CT_BufferCanvas;var CT_ClientW;var CT_ClientH;var CT_CanvasW=0;var CT_CanvasH=0;var CT_CanvasCRX=1;var CT_CanvasCRY=1;var CT_Ctx;var CT_BCtx;var CT_Main;var CT_Loop;var CT_LoadBarWidgetLoad=0;var CT_LoadBarWidgetIndex=0;var CT_RectabName="default";var CT_DEBUG_MODE=1;var CT_RUN_CONTEXT=0;var CT_SPLASH_SHOW=0;var CT_LOADBAR_SHOW=1;var CT_BROWSER=0;var CT_DEVICE=0;var CT_ContainerKeyState=[];var CT_ContainerKeyDown=[];var CT_ContainerKeyDownBreak=[];var CT_ContainerKeyUp=[];var CT_ContainerMKeyState=[];var CT_ContainerMKeyDown=[];var CT_ContainerMKeyUp=[];var CT_ContainerMWheel=[];var CT_MousePosX=0;var CT_MousePosY=0;var CT_TouchSlipp=0;var CT_KeyChar="";var CT_ContainerTouchKey=[];var CT_TouchKeyList=[];var CT_ResourceList=[];var CT_ContainerResource=[];var CT_ResIndex=0;var CT_SplashImage;var CT_Repaint=0;var CT_ContainerTask=[];var CT_ContainerTaskNum=[];var CT_ContainerTaskStr=[];var CT_ContainerTaskIndex=0;var CT_TaskStateList=[];var CT_TaskRunIndex=0;var CT_ViewX=0;var CT_ViewY=0;var CT_ViewLastX=0;var CT_ViewLastY=0;var CT_RunnerStatus=1;var CT_sceneWidth=0;var CT_sceneHeight=0;var CT_GridWidth=30;var CT_GridHeight=30;var CT_ContainerTile=[];var CT_ContainerTileIndex=0;var CT_ContainerSprite=[];var CT_ContainerSpriteIndex=0;var CT_SpriteId=0;var CT_ContainerTimer=[];var CT_ContainerTimerIndex=0;var CT_ContainerGlobalTimer=[];var CT_ContainerGlobalTimerIndex=0;var CT_UIId=0;var CT_ContainerWindow=[];var CT_ContainerWindowIndex=0;var CT_ContainerUI=[];var CT_ContainerUIIndex=0;var CT_Button_Index=-1;var CT_Textbox_Index=-1;var CT_DownX=-1;var CT_DownY=-1;var CT_DialogShow=0;var CT_Dialog_Index=-1;var key_a=65;var key_b=66;var key_c=67;var key_d=68;var key_e=69;var key_f=70;var key_g=71;var key_h=72;var key_i=73;var key_j=74;var key_k=75;var key_l=76;var key_m=77;var key_n=78;var key_o=79;var key_p=80;var key_q=81;var key_r=82;var key_s=83;var key_t=84;var key_u=85;var key_v=86;var key_w=87;var key_x=88;var key_y=89;var key_z=90;var key_1=49;var key_2=50;var key_3=51;var key_4=52;var key_5=53;var key_6=54;var key_7=55;var key_8=56;var key_9=57;var key_0=48;var key_f1=112;var key_f2=113;var key_f3=114;var key_f4=115;var key_f5=116;var key_f6=117;var key_f7=118;var key_f8=119;var key_f9=120;var key_f10=121;var key_f11=122;var key_f12=123;var key_up=38;var key_down=40;var key_left=37;var key_right=39;var key_esc=27;var key_tab=9;var key_cap=20;var key_shift=16;var key_ctrl=17;var key_alt=18;var key_space=32;var key_enter=13;var key_back=8;var key_num1=97;var key_num2=98;var key_num3=99;var key_num4=100;var key_num5=101;var key_num6=102;var key_num7=103;var key_num8=104;var key_num9=105;var key_num0=96;var mkey_left=0;var mkey_middle=1;var mkey_right=2;var mkey_up=0;var mkey_down=1;function CT_DialogCreate(val,name,max,pass,numb){if(CT_DialogShow===0){CT_dialog=document.createElement("div");CT_dialog.style.position="absolute";CT_dialog.style.width="50%";CT_dialog.style.height="150px";CT_dialog.style.left="0px";CT_dialog.style.right="0px";CT_dialog.style.top="20%";CT_dialog.style.margin="auto";CT_dialog.style.backgroundColor="#ece9d8";CT_dialog.style.border="solid";CT_dialog.style.borderColor="#aca899";CT_dialog.align="center";document.body.appendChild(CT_dialog);var title=document.createElement("p");title.textContent=name;title.style.font="16px Arial";CT_dialog.appendChild(title);var textbox=document.createElement("input");if(pass===1)textbox.type="password";else textbox.type="text";textbox.style.width="90%";textbox.style.font="16px Arial";textbox.value=val;textbox.maxLength=max;textbox.oninput=function(){if(numb===1){var diabox_l=textbox.value.length;var char=textbox.value[diabox_l-1];if(char!=="0"&&char!=="1"&&char!=="2"&&char!=="3"&&char!=="4"&&char!=="5"&&char!=="6"&&char!=="7"&&char!=="8"&&char!=="9"){var new_str=textbox.value.slice(0,diabox_l-2);textbox.value=new_str}}};CT_dialog.appendChild(textbox);var div_compart=document.createElement("div");div_compart.style.height="20px";CT_dialog.appendChild(div_compart);var button=document.createElement("input");button.type="button";button.style.width="30%";button.style.font="22px Arial";button.value="\u2714";CT_dialog.appendChild(button);button.onclick=function(){CT_DialogReturn(textbox.value)};CT_DialogShow=1}}function CT_DialogDestroy(){if(CT_DialogShow===1){document.body.removeChild(CT_dialog);CT_dialog=null;CT_DialogShow=0}}function CT_DialogReturn(val){if(CT_ContainerUI[CT_Dialog_Index]!=null)CT_ContainerUI[CT_Dialog_Index][14]=val;CT_DialogDestroy();CT_InterfaceRepaint()}function CT_CanvasClear(){CT_Ctx.clearRect(0,0,CT_CanvasW,CT_CanvasH)}function CT_BufferCanvasClear(){CT_BCtx.beginPath();CT_BCtx.fillStyle="#000000";CT_BCtx.fillRect(0,0,CT_CanvasW,CT_CanvasH);CT_BCtx.closePath()}function CT_BufferCanvasOut(){CT_Ctx.drawImage(CT_BufferCanvas,0,0);CT_BufferCanvasClear()}function CT_BufferRect(x,y,w,h,c,f){CT_BCtx.beginPath();if(f===1){CT_BCtx.fillStyle=c;CT_BCtx.fillRect(x,y,w,h)}if(f===0){CT_BCtx.strokeStyle=c;CT_BCtx.lineWidth=1;CT_BCtx.strokeRect(x+.5,y+.5,w-1,h-1)}CT_BCtx.closePath()}function CT_BufferLine(x1,y1,x2,y2,w,c){CT_BCtx.beginPath();CT_BCtx.strokeStyle=c;CT_BCtx.lineWidth=w;var line_move=w*.5;if(x1===x2){CT_BCtx.moveTo(x1+line_move,y1);CT_BCtx.lineTo(x2+line_move,y2)}if(y1===y2){CT_BCtx.moveTo(x1,y1+line_move);CT_BCtx.lineTo(x2,y2+line_move)}if(x1!==x2&&y1!==y2){CT_BCtx.moveTo(x1,y1);CT_BCtx.lineTo(x2,y2)}CT_BCtx.stroke();CT_BCtx.closePath()}function CT_BufferCircle(x,y,r,c,f){CT_BCtx.beginPath();if(f===1){CT_BCtx.fillStyle=c;CT_BCtx.arc(x,y,r,0,Math.PI*2);CT_BCtx.fill()}if(f===0){CT_BCtx.beginPath();CT_BCtx.strokeStyle=c;CT_BCtx.lineWidth=1;CT_BCtx.arc(x,y,r,0,Math.PI*2);CT_BCtx.arc(x,y,r,0,Math.PI*2);CT_BCtx.stroke()}CT_BCtx.closePath()}function CT_BufferString(x,y,s,c,t){CT_BCtx.font=String(s)+"px Arial";CT_BCtx.fillStyle=c;CT_BCtx.fillText(t,x,y+s)}function CT_BufferImage(x,y,i){if(i!==-1){var res_type=CT_ResourceList[i][1];if(res_type===0)CT_BCtx.drawImage(CT_ContainerResource[i],x,y);else cprint("ERROR 4 : The resource index corresponding to the resource file is not a image. ResIndex : "+String(i))}}function CT_BufferImagePart(x,y,i,ix,iy,iw,ih){if(i!==-1){var res_type=CT_ResourceList[i][1];if(res_type===0)CT_BCtx.drawImage(CT_ContainerResource[i],ix,iy,iw,ih,x,y,iw,ih);else cprint("ERROR 4 : The resource index corresponding to the resource file is not a image. ResIndex : "+String(i))}}function CT_BufferCurve(x1,y1,x2,y2,x3,y3,w,c){CT_BCtx.beginPath();CT_BCtx.strokeStyle=c;CT_BCtx.lineWidth=w;CT_BCtx.moveTo(x1,y1);CT_BCtx.quadraticCurveTo(x2,y2,x3,y3);CT_BCtx.stroke();CT_BCtx.closePath()}function CT_DrawRender(l){var _x=view_x();var _y=view_y();var i;for(i=0;i<CT_ContainerDraw.length;i++)if(CT_ContainerDraw[i]!=null){var draw_l=CT_ContainerDraw[i][1];if(draw_l===l){var draw_type=CT_ContainerDraw[i][0];if(draw_type===1){var x=CT_ContainerDraw[i][2];var y=CT_ContainerDraw[i][3];var w=CT_ContainerDraw[i][4];var h=CT_ContainerDraw[i][5];var c=CT_ContainerDraw[i][6];var f=CT_ContainerDraw[i][7];CT_BufferRect(x-_x,y-_y,w,h,c,f)}if(draw_type===2){var x1=CT_ContainerDraw[i][2];var y1=CT_ContainerDraw[i][3];var x2=CT_ContainerDraw[i][4];var y2=CT_ContainerDraw[i][5];var w=CT_ContainerDraw[i][6];var c=CT_ContainerDraw[i][7];CT_BufferLine(x1-_x,y1-_y,x2-_x,y2-_y,w,c)}if(draw_type===3){var x=CT_ContainerDraw[i][2];var y=CT_ContainerDraw[i][3];var r=CT_ContainerDraw[i][4];var c=CT_ContainerDraw[i][5];var f=CT_ContainerDraw[i][6];CT_BufferCircle(x-_x,y-_y,r,c,f)}if(draw_type===4){var x=CT_ContainerDraw[i][2];var y=CT_ContainerDraw[i][3];var s=CT_ContainerDraw[i][4];var c=CT_ContainerDraw[i][5];var str=CT_ContainerDraw[i][6];CT_BufferString(x-_x,y-_y,s,c,str)}if(draw_type===5){var x=CT_ContainerDraw[i][2];var y=CT_ContainerDraw[i][3];var img=CT_ContainerDraw[i][4];CT_BufferImage(x-_x,y-_y,img)}if(draw_type===6){var x=CT_ContainerDraw[i][2];var y=CT_ContainerDraw[i][3];var img=CT_ContainerDraw[i][4];var ix=CT_ContainerDraw[i][5];var iy=CT_ContainerDraw[i][6];var iw=CT_ContainerDraw[i][7];var ih=CT_ContainerDraw[i][8];CT_BufferImagePart(x-_x,y-_y,img,ix,iy,iw,ih)}if(draw_type===7){var x1=CT_ContainerDraw[i][2];var y1=CT_ContainerDraw[i][3];var x2=CT_ContainerDraw[i][4];var y2=CT_ContainerDraw[i][5];var x3=CT_ContainerDraw[i][6];var y3=CT_ContainerDraw[i][7];var w=CT_ContainerDraw[i][8];var c=CT_ContainerDraw[i][9];CT_BufferCurve(x1-_x,y1-_y,x2-_x,y2-_y,x3-_x,y3-_y,w,c)}}}}function CT_init(cw,ch,rl,main,loop,dm,sph,lbh,arg4,arg5,arg6,arg7,arg8,arg9,arg10,arg11,arg12,arg13,arg14,arg15,arg16){CT_CanvasW=cw;CT_CanvasH=ch;CT_DEBUG_MODE=dm;CT_SPLASH_SHOW=sph;CT_LOADBAR_SHOW=lbh;CT_Main=main;CT_Loop=loop;cprint("Version : 1.0.10");cprint("Build : 2022/04/12");cprint("----------Init----------");CT_PreferSet();CT_CanvasCreate();CT_BufferCanvasCreate();cprint("------------------------");var i;for(i=0;i<rl.length;i++)CT_ResourceList[i]=[rl[i]];CT_ResourceLoadStart()}function CT_PreferSet(){if(CT_DEBUG_MODE===1)cprint("Debug mode : Enable");CT_BrowserCheck();CT_DeviceCheck();CT_RunContextCheck();if(CT_RUN_CONTEXT===0)cprint("Run context : Local");if(CT_RUN_CONTEXT===1)cprint("Run context : Web");if(CT_BROWSER===1)cprint("Browser : Firefox");if(CT_BROWSER===2)cprint("Browser : Chrome");if(CT_BROWSER===3)cprint("Browser : Safari");if(CT_BROWSER===4)cprint("Browser : IE");if(CT_BROWSER===0)cprint("Browser : Other");if(CT_DEVICE===0)cprint("Device : Table");if(CT_DEVICE===1)cprint("Device : Mobile")}function CT_BrowserCheck(){var agent=navigator.userAgent;var firefox_check=agent.indexOf("Firefox",0);var chrome_check=agent.indexOf("Chrome",0);var safari_check=agent.indexOf("Safari",0);var ie_check=agent.indexOf("MSIE",0);if(firefox_check>=0)CT_BROWSER=1;if(chrome_check>=0&&safari_check>=0){if(chrome_check<safari_check)CT_BROWSER=2}else{if(chrome_check>=0)CT_BROWSER=2;if(safari_check>=0)CT_BROWSER=3}if(ie_check>=0)CT_BROWSER=4}function CT_DeviceCheck(){var agent=navigator.userAgent;var mobile_check=agent.indexOf("Mobile",0);if(mobile_check>=0)CT_DEVICE=1}function CT_RunContextCheck(){var url=window.location.href;var url_file=url.lastIndexOf("file://");if(url_file===-1)CT_RUN_CONTEXT=1}function CT_CanvasCreate(){CT_Canvas=document.createElement("canvas");if(CT_CanvasW>0&&CT_CanvasH>0){CT_Canvas.style.background="#000000";CT_Canvas.width=CT_CanvasW;CT_Canvas.height=CT_CanvasH;CT_Canvas.style.position="absolute";CT_Canvas.style.left="0px";CT_Canvas.style.top="0px";CT_ClientW=document.documentElement.clientWidth;CT_ClientH=document.documentElement.clientHeight;CT_Canvas.style.width=String(CT_ClientW)+"px";CT_Canvas.style.height=String(CT_ClientH)+"px";CT_CanvasCRX=CT_CanvasW/CT_ClientW;CT_CanvasCRY=CT_CanvasH/CT_ClientH;CT_Resize();document.body.appendChild(CT_Canvas);cprint("Created canvas : width\x3d"+String(CT_CanvasW)+" height\x3d"+String(CT_CanvasH))}else cprint("ERROR 6 : Unable to create canvas");CT_Ctx=CT_Canvas.getContext("2d")}function CT_Resize(){window.addEventListener("resize",function(event){CT_ClientW=document.documentElement.clientWidth;CT_ClientH=document.documentElement.clientHeight;CT_Canvas.style.width=String(CT_ClientW)+"px";CT_Canvas.style.height=String(CT_ClientH)+"px";CT_CanvasCRX=CT_CanvasW/CT_ClientW;CT_CanvasCRY=CT_CanvasH/CT_ClientH},false)}function CT_BufferCanvasCreate(){CT_BufferCanvas=document.createElement("canvas");if(CT_CanvasW>0&&CT_CanvasH>0){CT_BufferCanvas.width=CT_CanvasW;CT_BufferCanvas.height=CT_CanvasH}CT_BCtx=CT_BufferCanvas.getContext("2d")}document.addEventListener("keydown",function(event){CT_ContainerKeyState[event.keyCode]=1;if(CT_ContainerKeyDownBreak[event.keyCode]!==1){CT_ContainerKeyDown[event.keyCode]=1;CT_ContainerKeyDownBreak[event.keyCode]=1}if(CT_BROWSER===2||CT_BROWSER===3||CT_BROWSER===0)if(event.keyCode===8)CT_KeyChar="_BACK"},false);document.addEventListener("keyup",function(event){CT_ContainerKeyState[event.keyCode]=0;CT_ContainerKeyDownBreak[event.keyCode]=0;CT_ContainerKeyUp[event.keyCode]=1},false);document.addEventListener("mousedown",function(event){CT_ContainerMKeyState[event.button]=1;CT_ContainerMKeyDown[event.button]=1},false);document.addEventListener("mouseup",function(event){CT_ContainerMKeyState[event.button]=0;CT_ContainerMKeyUp[event.button]=1},false);document.addEventListener("mousemove",function(event){CT_MousePosX=parseInt(event.pageX*CT_CanvasCRX);CT_MousePosY=parseInt(event.pageY*CT_CanvasCRY)},false);document.addEventListener("DOMMouseScroll",function(event){if(event.detail<0)CT_ContainerMWheel[0]=1;if(event.detail>0)CT_ContainerMWheel[1]=1},false);document.addEventListener("mousewheel",function(event){if(event.wheelDelta>0)CT_ContainerMWheel[0]=1;if(event.wheelDelta<0)CT_ContainerMWheel[1]=1},false);document.addEventListener("contextmenu",function(event){event.preventDefault()},false);document.addEventListener("keypress",function(event){if(event.which!==0)CT_KeyChar=String.fromCharCode(event.which);if(event.which===8)CT_KeyChar="_BACK"},false);document.addEventListener("touchstart",function(event){var toulist_e=event.touches.length-1;var t_x=event.touches[toulist_e].pageX;var t_y=event.touches[toulist_e].pageY;CT_MousePosX=parseInt(t_x*CT_CanvasCRX);CT_MousePosY=parseInt(t_y*CT_CanvasCRY);CT_TouchSlipp=CT_MousePosY;CT_ContainerMKeyState[0]=1;CT_ContainerMKeyDown[0]=1;var i=0;for(i;i<event.touches.length;i++){var touch_id=event.touches[i].identifier;var touch_x=event.touches[i].pageX;var touch_y=event.touches[i].pageY;CT_TouchKeyList[touch_id]=[touch_x,touch_y]}},false);document.addEventListener("touchend",function(event){var toulist_e=event.changedTouches.length-1;var t_x=event.changedTouches[toulist_e].pageX;var t_y=event.changedTouches[toulist_e].pageY;CT_MousePosX=parseInt(t_x*CT_CanvasCRX);CT_MousePosY=parseInt(t_y*CT_CanvasCRY);CT_ContainerMKeyState[0]=0;CT_ContainerMKeyUp[0]=1;var i=0;for(i;i<event.changedTouches.length;i++){var touch_id=event.changedTouches[i].identifier;CT_TouchKeyList[touch_id]=[-1,-1]}},false);document.addEventListener("touchmove",function(event){var toulist_e=event.changedTouches.length-1;var t_x=event.touches[toulist_e].pageX;var t_y=event.touches[toulist_e].pageY;CT_MousePosX=parseInt(t_x*CT_CanvasCRX);CT_MousePosY=parseInt(t_y*CT_CanvasCRY);if(CT_MousePosY<CT_TouchSlipp){CT_ContainerMWheel[0]=1;CT_TouchSlipp=CT_MousePosY}if(CT_MousePosY>CT_TouchSlipp){CT_ContainerMWheel[1]=1;CT_TouchSlipp=CT_MousePosY}var i=0;for(i;i<event.changedTouches.length;i++){var touch_id=event.changedTouches[i].identifier;var touch_x=event.changedTouches[i].pageX;var touch_y=event.changedTouches[i].pageY;CT_TouchKeyList[touch_id]=[touch_x,touch_y]}},false);function CT_TouchKeyRun(){var i;for(i=0;i<CT_ContainerTouchKey.length;i++)if(CT_ContainerTouchKey[i]!=null){var toukey_x=CT_ContainerTouchKey[i][0];var toukey_y=CT_ContainerTouchKey[i][1];var toukey_w=CT_ContainerTouchKey[i][2];var toukey_h=CT_ContainerTouchKey[i][3];var toukey_k=CT_ContainerTouchKey[i][4];var i2;var press=0;for(i2=0;i2<CT_TouchKeyList.length;i2++){var tou_x=parseInt(CT_TouchKeyList[i2][0]*CT_CanvasCRX);var tou_y=parseInt(CT_TouchKeyList[i2][1]*CT_CanvasCRY);if(tou_x>=toukey_x&&tou_y>=toukey_y&&tou_x<=toukey_x+toukey_w&&tou_y<=toukey_y+toukey_h){press=1;CT_ContainerTouchKey[i][6]=1;CT_ContainerKeyState[toukey_k]=1;if(CT_ContainerKeyDownBreak[toukey_k]!==1){CT_ContainerKeyDown[toukey_k]=1;CT_ContainerKeyDownBreak[toukey_k]=1}}}if(press===0){var tk_state=CT_ContainerTouchKey[i][6];if(tk_state===1){CT_ContainerKeyState[toukey_k]=0;CT_ContainerKeyDownBreak[toukey_k]=0;CT_ContainerKeyUp[toukey_k]=1;CT_ContainerTouchKey[i][6]=0}}}}function CT_TouchKeyRender(){if(CT_ContainerTouchKey.length!==0){var i;for(i=0;i<CT_ContainerTouchKey.length;i++)if(CT_ContainerTouchKey[i]!=null){var tx=CT_ContainerTouchKey[i][0];var ty=CT_ContainerTouchKey[i][1];var ti=CT_ContainerTouchKey[i][5];CT_BufferImage(tx,ty,ti)}}}function CT_KeyboardReset(){CT_ContainerKeyDown=[];CT_ContainerKeyUp=[];CT_ContainerMKeyDown=[];CT_ContainerMKeyUp=[];CT_ContainerMWheel=[];CT_KeyChar=""}function CT_KeyboardChar(){var ret=CT_KeyChar;CT_KeyChar="";return ret}function CT_ResourceLoadStart(){cprint("-----Load resource------");if(CT_SPLASH_SHOW===1){CT_SplashImage=new Image;CT_SplashImage.src="splash.png";CT_SplashImage.onload=function(){CT_LoadBarShow(0);CT_ResourceLoad()};CT_SplashImage.onerror=function(){CT_LoadBarShowError(0,"splash.png")}}else{CT_LoadBarShow(0);CT_ResourceLoad()}}function CT_ResourceLoad(){if(CT_ResourceList.length!==0){var res_name=CT_PathGetName(CT_ResourceList[CT_ResIndex][0]);if(res_name.lastIndexOf(".")!==-1)if(res_name.lastIndexOf(".")!==0){var extname_pos=res_name.lastIndexOf(".")+1;var res_extname=res_name.slice(extname_pos);if(res_extname==="png"||res_extname==="jpg"||res_extname==="jpeg"||res_extname==="bmp"||res_extname==="mp3"||res_extname==="ogg"){if(res_extname==="png"||res_extname==="jpg"||res_extname==="jpeg"||res_extname==="bmp"){var image=new Image;image.src=CT_ResourceList[CT_ResIndex][0];image.onload=function(){CT_ContainerResource[CT_ResIndex]=image;var image_w=image.width;var image_h=image.height;CT_ResourceList[CT_ResIndex][1]=0;CT_ResourceList[CT_ResIndex][2]=image_w;CT_ResourceList[CT_ResIndex][3]=image_h;cprint("Resource load : "+CT_ResourceList[CT_ResIndex][0]);CT_loadBarWidget();CT_ResIndex++;if(CT_ResIndex===CT_ResourceList.length)CT_ResourceLoadEnd();else CT_ResourceLoad()};image.onerror=function(){CT_LoadBarShowError(0,CT_ResourceList[CT_ResIndex][0])}}if(res_extname==="mp3"||res_extname==="ogg"){var audio=new Audio;audio.src=CT_ResourceList[CT_ResIndex][0];CT_ContainerResource[CT_ResIndex]=audio;CT_ResourceList[CT_ResIndex][1]=1;cprint("Resource load : "+CT_ResourceList[CT_ResIndex][0]);CT_loadBarWidget();CT_ResIndex++;if(CT_ResIndex===CT_ResourceList.length)CT_ResourceLoadEnd();else CT_ResourceLoad();audio.onerror=function(){CT_LoadBarShowError(0,CT_ResourceList[CT_ResIndex][0])}}}else cprint("ERROR 3 : The resource file type is not supoort : "+CT_ResourceList[CT_ResIndex][0])}else cprint("ERROR 2 : The resource file name is error : "+CT_ResourceList[CT_ResIndex][0]);else cprint("ERROR 1 : The resource file name is not support : "+CT_ResourceList[CT_ResIndex][0])}else CT_ResourceLoadEnd()}function CT_ResourceLoadEnd(){cprint("------------------------");cprint("CanvasTable Running...");CT_CanvasClear();CT_Main();requestAnimationFrame(CT_RunnerLoop)}function CT_PathGetName(path){var i;for(i=path.length-1;i>=0;i--){var a=path[i];if(a==="/"){var name=path.slice(i+1,path.length);return name}if(i===0){var name=path.slice(i,path.length);return name}}return""}function CT_loadBarWidget(){CT_LoadBarWidgetLoad++;if(CT_LoadBarWidgetLoad===10){CT_LoadBarWidgetIndex++;if(CT_LoadBarWidgetIndex>14)CT_LoadBarWidgetIndex=0;CT_LoadBarShow(CT_LoadBarWidgetIndex);CT_LoadBarWidgetLoad=0}}function CT_BufferSplash(){CT_BCtx.drawImage(CT_SplashImage,0,0)}function CT_LoadBarShow(n){var bar_w=400;var bar_h=30;var title="Loading...";var lump_w=28;var lump_h=22;var bar_x=parseInt((CT_CanvasW-bar_w)/2);var bar_y=parseInt((CT_CanvasH-bar_h)/2);var title_w=string_pxwidth(title,20);var title_h=20;var title_x=parseInt((CT_CanvasW-title_w)/2);var title_y=bar_y-40;var bar_c=color(210,193,153,255);if(CT_SPLASH_SHOW===1)CT_BufferSplash();if(CT_LOADBAR_SHOW===1){CT_BufferString(title_x,title_y,20,bar_c,title);CT_BufferRect(bar_x,bar_y,400,30,bar_c,0);CT_BufferRect(bar_x+1,bar_y+1,398,28,bar_c,0);if(n>=1&&n<=14){var lump_x=bar_x+4+(n-1)*lump_w;var lump_y=bar_y+4;CT_BufferRect(lump_x,lump_y,lump_w,lump_h,bar_c,1)}}CT_BufferCanvasOut()}function CT_LoadBarShowError(c,s){var err_x=parseInt((CT_CanvasW-400)/2);var err_y=parseInt((CT_CanvasH-30)/2)+40;var err_c=color(210,193,153,255);if(CT_LOADBAR_SHOW===1)if(c===0){CT_BufferString(err_x,err_y,16,err_c,"ERROR 0 : The resource file is not found : "+s);CT_BufferCanvasOut()}}function CT_RunnerLoop(){if(CT_RunnerStatus===0)CT_RunnerStatus=1;CT_RunnerBufferRender();CT_GlobalTimerRun();CT_TimerRun();CT_TouchKeyRun();CT_UIRun();CT_SpritePosRecord();CT_TaskRunMain();CT_TaskRunLoop();CT_Loop();CT_ButtonReset();CT_KeyboardReset();requestAnimationFrame(CT_RunnerLoop)}function CT_InterfaceRepaint(){CT_Repaint=1}function CT_RunnerBufferRender(){if(CT_Repaint===1){var i;for(i=0;i<31;i++){CT_TileRender(i);CT_SpriteRender(i);CT_UIRender(i);CT_DrawRender(i)}CT_TouchKeyRender();CT_BufferCanvasOut();CT_Repaint=0}}function CT_TaskCreated(task_i,task_m,task_l){CT_ContainerTask[task_i]=[task_m,task_l];CT_TaskStateList[task_i]=0;CT_ContainerTaskNum[task_i]=[];CT_ContainerTaskStr[task_i]=[]}function CT_TaskDestroy(task_i){CT_ContainerTask[task_i]=null;CT_TaskStateList[task_i]=null;CT_ContainerTaskNum[task_i]=null;CT_ContainerTaskStr[task_i]=null}function CT_TaskSetNum(ti,i,n){CT_ContainerTaskNum[ti][i]=n}function CT_TaskNum(ti,i){if(CT_ContainerTaskNum[ti][i]!=null){var num=CT_ContainerTaskNum[ti][i];return num}else cprint("ERROR 19 : The task variable is not found. TaskIndex : "+String(i));return 0}function CT_TaskSetStr(ti,i,s){CT_ContainerTaskStr[ti][i]=s}function CT_TaskStr(ti,i){if(CT_ContainerTaskStr[ti][i]!=null){var str=CT_ContainerTaskStr[ti][i];return str}else cprint("ERROR 19 : The task variable is not found. TaskIndex : "+String(i));return""}function CT_TaskRunMain(){if(CT_ContainerTask.length!==0){var i;for(i=0;i<CT_ContainerTask.length;i++)if(CT_ContainerTask[i]!=null)if(CT_TaskStateList[i]!=null)if(CT_TaskStateList[i]===0){CT_TaskRunIndex=i;CT_ContainerTask[i][0]();CT_TaskStateList[i]=1}}CT_TaskRunIndex=0}function CT_TaskRunLoop(){if(CT_ContainerTask.length!==0){var i;for(i=0;i<CT_ContainerTask.length;i++)if(CT_ContainerTask[i]!=null)if(CT_TaskStateList[i]!=null)if(CT_TaskStateList[i]===1){CT_TaskRunIndex=i;CT_ContainerTask[i][1]()}}CT_TaskRunIndex=0}function CT_RunnerReset(){CT_ContainerDraw=[];CT_ContainerDrawIndex=0;CT_DrawLayer=0;CT_ContainerWindow=[];CT_ContainerWindowIndex=0;CT_ContainerUI=[];CT_ContainerUIIndex=0;CT_ContainerSprite=[];CT_ContainerSpriteIndex=0;CT_ContainerTile=[];CT_ContainerTileIndex=0;CT_ContainerTask=[];CT_TaskStateList=[];CT_ContainerTaskNum=[];CT_ContainerTaskStr=[];CT_ContainerTaskIndex=0;CT_TaskRunIndex=0;CT_ContainerTimer=[];CT_ContainerTimerIndex=0;CT_ViewX=0;CT_ViewY=0;CT_ViewLastX=0;CT_ViewLastY=0;CT_DialogDestroy();CT_Button_Index=-1;CT_Textbox_Index=-1;CT_DownX=-1;CT_DownY=-1;CT_DialogShow=0;CT_Dialog_Index=-1}function CT_TileRender(l){var _x=view_x();var _y=view_y();var i;for(i=0;i<CT_ContainerTile.length;i++)if(CT_ContainerTile[i]!=null){var tl=CT_ContainerTile[i][0];if(tl===l){var tx=CT_ContainerTile[i][1];var ty=CT_ContainerTile[i][2];var ti=CT_ContainerTile[i][3];var tix=CT_ContainerTile[i][4];var tiy=CT_ContainerTile[i][5];CT_BufferImagePart(tx-_x,ty-_y,ti,tix,tiy,CT_GridWidth,CT_GridHeight)}}}function CT_TileBuild(l,x,y,res,gx,gy){var tix=gx*CT_GridWidth;var tiy=gy*CT_GridHeight;var tile_i=CT_ContainerTileIndex;CT_ContainerTile[tile_i]=[l,x,y,res,tix,tiy];CT_ContainerTileIndex++}function CT_SpriteGetId(){var id=CT_SpriteId;CT_SpriteId++;return id}function CT_SpriteRender(l){var i;for(i=0;i<CT_ContainerSprite.length;i++)if(CT_ContainerSprite[i]!=null){var sl=CT_ContainerSprite[i][1];if(sl===l){var x=CT_ContainerSprite[i][2];var y=CT_ContainerSprite[i][3];var image=CT_ContainerSprite[i][4];var subimg=CT_ContainerSprite[i][5];var subimg_w=CT_ContainerSprite[i][7];var subimg_h=CT_ContainerSprite[i][8];if(image!==-1){var _x=view_x();var _y=view_y();var si_x=subimg*subimg_w;CT_BufferImagePart(x-_x,y-_y,image,si_x,0,subimg_w,subimg_h)}}}}function CT_SpritePosRecord(){var i;for(i=0;i<CT_ContainerSprite.length;i++)if(CT_ContainerSprite[i]!=null){var spr_x=CT_ContainerSprite[i][2];var spr_y=CT_ContainerSprite[i][3];CT_ContainerSprite[i][9]=spr_x;CT_ContainerSprite[i][10]=spr_y}}function CT_TimerRun(){var i;if(CT_ContainerTimer.length!==0)for(i=0;i<CT_ContainerTimer.length;i++)if(CT_ContainerTimer[i]!=null)if(CT_ContainerTimer[i][3]===1){CT_ContainerTimer[i][1]-=1;if(CT_ContainerTimer[i][1]===0){CT_ContainerTimer[i][3]=2;var timer_duration=CT_ContainerTimer[i][2];CT_ContainerTimer[i][1]=timer_duration}}}function CT_GlobalTimerRun(){var i;if(CT_ContainerGlobalTimer.length!==0)for(i=0;i<CT_ContainerGlobalTimer.length;i++)if(CT_ContainerGlobalTimer[i]!=null)if(CT_ContainerGlobalTimer[i][3]===1){CT_ContainerGlobalTimer[i][1]-=1;if(CT_ContainerGlobalTimer[i][1]===0){CT_ContainerGlobalTimer[i][3]=2;var timer_duration=CT_ContainerGlobalTimer[i][2];CT_ContainerGlobalTimer[i][1]=timer_duration}}}function CT_UIGetId(){var id=CT_UIId;CT_UIId++;return id}function CT_UIRun(){if(mouse_down(mkey_left)){CT_DownX=mouse_x();CT_DownY=mouse_y();var i;for(i=0;i<CT_ContainerWindow.length;i++)if(CT_ContainerWindow[i]!=null){var win_x=CT_ContainerWindow[i][2];var win_y=CT_ContainerWindow[i][3];var win_w=CT_ContainerWindow[i][4];var win_h=CT_ContainerWindow[i][5];if(CT_DownX>=win_x&&CT_DownY>=win_y&&CT_DownX<=win_x+win_w&&CT_DownY<=win_y+win_h){var i2;for(i2=0;i2<CT_ContainerUI.length;i2++)if(CT_ContainerUI[i2]!=null){var ui_win_index=CT_ContainerUI[i2][1];if(ui_win_index===i){var ui_x=win_x+CT_ContainerUI[i2][3];var ui_y=win_y+CT_ContainerUI[i2][4];var ui_w=CT_ContainerUI[i2][5];var ui_h=CT_ContainerUI[i2][6];if(CT_DownX>=ui_x&&CT_DownY>=ui_y&&CT_DownX<=ui_x+ui_w&&CT_DownY<=ui_y+ui_h)if(CT_DialogShow===0){var ui_type=CT_ContainerUI[i2][2];if(ui_type===1){CT_Button_Index=i2;CT_ContainerUI[i2][18]=1;CT_ContainerUI[i2][19]=1}}}}}}}if(mouse_up(mkey_left)){if(CT_Button_Index!==-1)if(CT_ContainerUI[CT_Button_Index]!=null)CT_ContainerUI[CT_Button_Index][18]=0;var up_x=mouse_x();var up_y=mouse_y();var i;for(i=0;i<CT_ContainerWindow.length;i++)if(CT_ContainerWindow[i]!=null){var win_x=CT_ContainerWindow[i][2];var win_y=CT_ContainerWindow[i][3];var win_w=CT_ContainerWindow[i][4];var win_h=CT_ContainerWindow[i][5];if(CT_DownX>=win_x&&CT_DownY>=win_y&&CT_DownX<=win_x+win_w&&CT_DownY<=win_y+win_h&&up_x>=win_x&&up_y>=win_y&&up_x<=win_x+win_w&&up_y<=win_y+win_h){var i2;for(i2=0;i2<CT_ContainerUI.length;i2++)if(CT_ContainerUI[i2]!=null){var ui_win_index=CT_ContainerUI[i2][1];if(ui_win_index===i){var ui_x=win_x+CT_ContainerUI[i2][3];var ui_y=win_y+CT_ContainerUI[i2][4];var ui_w=CT_ContainerUI[i2][5];var ui_h=CT_ContainerUI[i2][6];if(CT_DownX>=ui_x&&CT_DownY>=ui_y&&CT_DownX<=ui_x+ui_w&&CT_DownY<=ui_y+ui_h&&up_x>=ui_x&&up_y>=ui_y&&up_x<=ui_x+ui_w&&up_y<=ui_y+ui_h)if(CT_DialogShow===0){CT_Textbox_Index=-1;var ui_type=CT_ContainerUI[i2][2];if(ui_type===1){CT_ContainerUI[i2][17]=1;CT_ContainerUI[i2][20]=1;CT_InterfaceRepaint();return}if(ui_type===3){var c_s=CT_ContainerUI[i2][10];if(c_s===0){CT_ContainerUI[i2][10]=1;CT_InterfaceRepaint();return}if(c_s===1){CT_ContainerUI[i2][10]=0;CT_InterfaceRepaint();return}}if(ui_type===4){var radio_g=CT_ContainerUI[i2][10];var i3;for(i3=0;i3<CT_ContainerUI.length;i3++){var c_ui_type=CT_ContainerUI[i3][2];if(c_ui_type===4){var c_radio_g=CT_ContainerUI[i3][10];if(c_radio_g===radio_g)CT_ContainerUI[i3][11]=0}}CT_ContainerUI[i2][11]=1;CT_InterfaceRepaint()}if(ui_type===6){var subbox=CT_ContainerUI[i2][19];if(subbox===0)CT_Textbox_Index=i2;if(subbox===1||CT_DEVICE===1){var readonly=CT_ContainerUI[i2][18];if(readonly===0){var t_val=CT_ContainerUI[i2][14];var t_name=CT_ContainerUI[i2][20];var t_max=CT_ContainerUI[i2][17];var t_pass=CT_ContainerUI[i2][15];var t_numb=CT_ContainerUI[i2][16];CT_Dialog_Index=i2;CT_DialogCreate(t_val,t_name,t_max,t_pass,t_numb)}}CT_InterfaceRepaint();return}}}}}}}if(CT_Textbox_Index!==-1)if(CT_ContainerUI[CT_Textbox_Index]!=null){var readonly=CT_ContainerUI[CT_Textbox_Index][18];if(readonly===0){var kc=CT_KeyboardChar();if(kc!==""&&kc!=="_BACK"){var tbox_length=CT_ContainerUI[CT_Textbox_Index][14].length;var tbox_max=CT_ContainerUI[CT_Textbox_Index][17];var tbox_number=CT_ContainerUI[CT_Textbox_Index][16];if(tbox_length<tbox_max)if(tbox_number!==1){CT_ContainerUI[CT_Textbox_Index][14]+=kc;CT_InterfaceRepaint()}else if(kc==="0"||kc==="1"||kc==="2"||kc==="3"||kc==="4"||kc==="5"||kc==="6"||kc==="7"||kc==="8"||kc==="9"){CT_ContainerUI[CT_Textbox_Index][14]+=kc;CT_InterfaceRepaint()}}if(kc==="_BACK"){var tbox_length=CT_ContainerUI[CT_Textbox_Index][14].length;if(tbox_length>0){var tbox_str=CT_ContainerUI[CT_Textbox_Index][14];tbox_str=tbox_str.slice(0,tbox_length-1);CT_ContainerUI[CT_Textbox_Index][14]=tbox_str;CT_InterfaceRepaint()}}}}}function CT_UIRender(l){var i;var win_index=0;for(i=0;i<CT_ContainerWindow.length;i++){win_index=i;if(CT_ContainerWindow[i]!=null){var window_layer=CT_ContainerWindow[i][1];if(window_layer===l){var win_x=CT_ContainerWindow[i][2];var win_y=CT_ContainerWindow[i][3];var win_w=CT_ContainerWindow[i][4];var win_h=CT_ContainerWindow[i][5];var win_cbg=CT_ContainerWindow[i][6];var win_cbu=CT_ContainerWindow[i][7];var win_cbd=CT_ContainerWindow[i][8];var win_cbl=CT_ContainerWindow[i][9];var win_cbr=CT_ContainerWindow[i][10];var win_img=CT_ContainerWindow[i][11];if(win_img!==-1)CT_BufferImage(win_x,win_y,win_img);else{CT_BufferRect(win_x,win_y,win_w,win_h,win_cbg,1);CT_BufferLine(win_x,win_y-2,win_x+win_w,win_y-2,2,win_cbu);CT_BufferLine(win_x,win_y+win_h,win_x+win_w,win_y+win_h,2,win_cbd);CT_BufferLine(win_x-2,win_y-2,win_x-2,win_y+win_h+2,2,win_cbl);CT_BufferLine(win_x+win_w,win_y-2,win_x+win_w,win_y+win_h+2,2,win_cbr)}var i2;for(i2=0;i2<CT_ContainerUI.length;i2++)if(CT_ContainerUI[i2]!=null){var ui_win_index=CT_ContainerUI[i2][1];if(ui_win_index===win_index){var ui_type=CT_ContainerUI[i2][2];if(ui_type===1){var b_x=win_x+CT_ContainerUI[i2][3];var b_y=win_y+CT_ContainerUI[i2][4];var b_w=CT_ContainerUI[i2][5];var b_h=CT_ContainerUI[i2][6];var b_cbg=CT_ContainerUI[i2][7];var b_cbu=CT_ContainerUI[i2][8];var b_cbd=CT_ContainerUI[i2][9];var b_cbl=CT_ContainerUI[i2][10];var b_cbr=CT_ContainerUI[i2][11];var b_ct=CT_ContainerUI[i2][12];var b_img=CT_ContainerUI[i2][13];var b_t=CT_ContainerUI[i2][14];var b_tw=CT_ContainerUI[i2][15];var b_th=CT_ContainerUI[i2][16];var b_tx=parseInt(b_x+(b_w-b_tw)/2);var b_ty=parseInt(b_y+(b_h-b_th)/2);if(b_img!==-1)CT_BufferImage(b_x,b_y,b_img);else{CT_BufferRect(b_x,b_y,b_w,b_h,b_cbg,1);CT_BufferLine(b_x,b_y,b_x+b_w,b_y,2,b_cbu);CT_BufferLine(b_x,b_y+b_h-2,b_x+b_w,b_y+b_h-2,2,b_cbd);CT_BufferLine(b_x,b_y,b_x,b_y+b_h-2,2,b_cbl);CT_BufferLine(b_x+b_w-2,b_y,b_x+b_w-2,b_y+b_h-2,2,b_cbr)}CT_BufferString(b_tx,b_ty,16,b_ct,b_t)}if(ui_type===2){var t_x=win_x+CT_ContainerUI[i2][3];var t_y=win_y+CT_ContainerUI[i2][4];var t_c=CT_ContainerUI[i2][5];var t_t=CT_ContainerUI[i2][6];var t_s=CT_ContainerUI[i2][7];CT_BufferString(t_x,t_y,t_s,t_c,t_t)}if(ui_type===3){var c_x=win_x+CT_ContainerUI[i2][3];var c_y=win_y+CT_ContainerUI[i2][4];var c_w=CT_ContainerUI[i2][5];var c_h=CT_ContainerUI[i2][6];var c_cbg=CT_ContainerUI[i2][7];var c_cb=CT_ContainerUI[i2][8];var c_cw=CT_ContainerUI[i2][9];var c_s=CT_ContainerUI[i2][10];CT_BufferRect(c_x,c_y,c_w,c_h,c_cbg,1);CT_BufferRect(c_x,c_y,c_w,c_h,c_cb,0);CT_BufferRect(c_x+1,c_y+1,c_w-2,c_h-2,c_cb,0);if(c_s===1){CT_BufferLine(c_x+4,c_y+9,c_x+8,c_y+13,2,c_cw);CT_BufferLine(c_x+8,c_y+13,c_x+13,c_y+4,2,c_cw)}}if(ui_type===4){var r_x=win_x+CT_ContainerUI[i2][3];var r_y=win_y+CT_ContainerUI[i2][4];var r_w=CT_ContainerUI[i2][5];var r_cgb=CT_ContainerUI[i2][7];var r_cb=CT_ContainerUI[i2][8];var r_cw=CT_ContainerUI[i2][9];var r_s=CT_ContainerUI[i2][11];CT_BufferCircle(r_x+8,r_y+8,r_w/2,r_cgb,1);CT_BufferCircle(r_x+8,r_y+8,r_w/2,r_cb,0);CT_BufferCircle(r_x+8,r_y+8,r_w/2-1,r_cb,0);if(r_s===1)CT_BufferCircle(r_x+8,r_y+8,r_w/2-4,r_cw,1)}if(ui_type===5){var p_x=win_x+CT_ContainerUI[i2][3];var p_y=win_y+CT_ContainerUI[i2][4];var p_w=CT_ContainerUI[i2][5];var p_h=CT_ContainerUI[i2][6];var p_cgb=CT_ContainerUI[i2][7];var p_cbu=CT_ContainerUI[i2][8];var p_cbd=CT_ContainerUI[i2][9];var p_cbl=CT_ContainerUI[i2][10];var p_cbr=CT_ContainerUI[i2][11];var p_cw=CT_ContainerUI[i2][12];var p_img=CT_ContainerUI[i2][13];var p_ww=CT_ContainerUI[i2][14];if(p_img!==-1)CT_BufferImage(p_x,p_y,p_img);else{CT_BufferRect(p_x,p_y,p_w,p_h,p_cgb,1);CT_BufferLine(p_x,p_y,p_x+p_w,p_y,2,p_cbu);CT_BufferLine(p_x,p_y+p_h-2,p_x+p_w,p_y+p_h-2,2,p_cbd);CT_BufferLine(p_x,p_y,p_x,p_y+p_h-2,2,p_cbl);CT_BufferLine(p_x+p_w-2,p_y,p_x+p_w-2,p_y+p_h-2,2,p_cbr)}CT_BufferRect(p_x+4,p_y+4,p_ww,p_h-8,p_cw,1)}if(ui_type===6){var t_x=win_x+CT_ContainerUI[i2][3];var t_y=win_y+CT_ContainerUI[i2][4];var t_w=CT_ContainerUI[i2][5];var t_h=CT_ContainerUI[i2][6];var t_cbg=CT_ContainerUI[i2][7];var t_cbu=CT_ContainerUI[i2][8];var t_cbd=CT_ContainerUI[i2][9];var t_cbl=CT_ContainerUI[i2][10];var t_cbr=CT_ContainerUI[i2][11];var t_ct=CT_ContainerUI[i2][12];var t_img=CT_ContainerUI[i2][13];var t_val=CT_ContainerUI[i2][14];var t_pass=CT_ContainerUI[i2][15];var t_readonly=CT_ContainerUI[i2][18];var t_fsize=16;var p="";if(t_img!==-1)CT_BufferImage(t_x,t_y,t_img);else{CT_BufferRect(t_x,t_y,t_w,t_h,t_cbg,1);CT_BufferLine(t_x,t_y,t_x+t_w,t_y,2,t_cbu);CT_BufferLine(t_x,t_y+t_h-2,t_x+t_w,t_y+t_h-2,2,t_cbd);CT_BufferLine(t_x,t_y,t_x,t_y+t_h-2,2,t_cbl);CT_BufferLine(t_x+t_w-2,t_y,t_x+t_w-2,t_y+t_h-2,2,t_cbr)}if(t_pass!==1){var text_y=t_y+(t_h-t_fsize)/2;CT_BufferString(t_x+5,text_y,t_fsize,t_ct,t_val)}else{var passi;for(passi=0;passi<t_val.length;passi++)p+="\u25cf";CT_BufferString(t_x+5,t_y+3,t_fsize,t_ct,p)}if(i2===CT_Textbox_Index){if(t_pass!==1)var val_width=string_pxwidth(t_val,t_fsize);else var val_width=string_pxwidth(p,t_fsize);if(t_readonly===0)CT_BufferLine(t_x+4+val_width+1,t_y+3,t_x+4+val_width+1,t_y+t_h-4,1,color(0,0,0,255))}}}}}}}}function CT_ButtonReset(){var i;for(i=0;i<CT_ContainerUI.length;i++)if(CT_ContainerUI[i]!=null){var ui_type=CT_ContainerUI[i][2];if(ui_type===1){CT_ContainerUI[i][17]=0;CT_ContainerUI[i][19]=0;CT_ContainerUI[i][20]=0}}}function audio_play(a,l){if(a!==-1){var res_type=CT_ResourceList[a][1];if(res_type===1){CT_ContainerResource[a].play();CT_ContainerResource[a].currentTime=0;CT_ContainerResource[a].loop=l}else cprint("ERROR 5 : The resource index corresponding to the resource file is not a audio. ResIndex : "+String(a))}}function audio_stop(a){if(a!==-1){var res_type=CT_ResourceList[a][1];if(res_type===1)CT_ContainerResource[a].pause();else cprint("ERROR 5 : The resource index corresponding to the resource file is not a audio. ResIndex : "+String(a))}}function draw_set_layer(l){CT_DrawLayer=l}function draw_clear(){var i;for(i=0;i<CT_ContainerDraw.length;i++)if(CT_ContainerDraw[i]!=null){var draw_l=CT_ContainerDraw[i][1];if(draw_l===CT_DrawLayer)CT_ContainerDraw[i]=null}CT_InterfaceRepaint()}function draw_rect(x,y,w,h,c,f){var type=1;if(CT_ContainerDraw.length>0){var i;for(i=0;i<CT_ContainerDraw.length;i++)if(CT_ContainerDraw[i]==null){CT_ContainerDraw[i]=[type,CT_DrawLayer,x,y,w,h,c,f];CT_InterfaceRepaint();return}CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x,y,w,h,c,f];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}else{CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x,y,w,h,c,f];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}}function draw_line(x1,y1,x2,y2,w,c){var type=2;if(CT_ContainerDraw.length>0){var i;for(i=0;i<CT_ContainerDraw.length;i++)if(CT_ContainerDraw[i]==null){CT_ContainerDraw[i]=[type,CT_DrawLayer,x1,y1,x2,y2,w,c];CT_InterfaceRepaint();return}CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x1,y1,x2,y2,w,c];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}else{CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x1,y1,x2,y2,w,c];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}}function draw_circle(x,y,r,c,f){var type=3;if(CT_ContainerDraw.length>0){var i;for(i=0;i<CT_ContainerDraw.length;i++)if(CT_ContainerDraw[i]==null){CT_ContainerDraw[i]=[type,CT_DrawLayer,x,y,r,c,f];CT_InterfaceRepaint();return}CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x,y,r,c,f];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}else{CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x,y,r,c,f];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}}function draw_string(x,y,s,c,t){var type=4;if(CT_ContainerDraw.length>0){var i;for(i=0;i<CT_ContainerDraw.length;i++)if(CT_ContainerDraw[i]==null){CT_ContainerDraw[i]=[type,CT_DrawLayer,x,y,s,c,t];CT_InterfaceRepaint();return}CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x,y,s,c,t];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}else{CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x,y,s,c,t];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}}function draw_image(x,y,ii){var type=5;if(CT_ContainerDraw.length>0){var i;for(i=0;i<CT_ContainerDraw.length;i++)if(CT_ContainerDraw[i]==null){CT_ContainerDraw[i]=[type,CT_DrawLayer,x,y,ii];CT_InterfaceRepaint();return}CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x,y,ii];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}else{CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x,y,ii];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}CT_InterfaceRepaint()}function draw_image_part(x,y,ii,ix,iy,iw,ih){var type=6;if(CT_ContainerDraw.length>0){var i;for(i=0;i<CT_ContainerDraw.length;i++)if(CT_ContainerDraw[i]==null){CT_ContainerDraw[i]=[type,CT_DrawLayer,x,y,ii,ix,iy,iw,ih];CT_InterfaceRepaint();return}CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x,y,ii,ix,iy,iw,ih];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}else{CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x,y,ii,ix,iy,iw,ih];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}}function draw_curve(x1,y1,x2,y2,x3,y3,w,c){var type=7;if(CT_ContainerDraw.length>0){var i;for(i=0;i<CT_ContainerDraw.length;i++)if(CT_ContainerDraw[i]==null){CT_ContainerDraw[i]=[type,CT_DrawLayer,x1,y1,x2,y2,x3,y3,w,c];CT_InterfaceRepaint();return}CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x1,y1,x2,y2,x3,y3,w,c];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}else{CT_ContainerDraw[CT_ContainerDrawIndex]=[type,CT_DrawLayer,x1,y1,x2,y2,x3,y3,w,c];CT_ContainerDrawIndex++;CT_InterfaceRepaint()}}function keyboard_press(key){if(key>=0&&key<=255){if(CT_ContainerKeyState[key]===1)return 1}else cprint("ERROR 7 : Key value beyond range. KeyCode : "+String(key));return 0}function keyboard_down(key){if(key>=0&&key<=255){if(CT_ContainerKeyDown[key]===1)return 1}else cprint("ERROR 7 : Key value beyond range. KeyCode : "+String(key));return 0}function keyboard_up(key){if(key>=0&&key<=255){if(CT_ContainerKeyUp[key]===1)return 1}else cprint("ERROR 7 : Key value beyond range. KeyCode : "+String(key));return 0}function mouse_press(mkey){if(mkey>=0&&mkey<=2){if(CT_ContainerMKeyState[mkey]===1)return 1}else cprint("ERROR 8 : Mouse key value beyond range. KeyCode : "+String(mkey));return 0}function mouse_down(mkey){if(mkey>=0&&mkey<=2){if(CT_ContainerMKeyDown[mkey]===1)return 1}else cprint("ERROR 8 : Mouse key value beyond range. KeyCode : "+String(mkey));return 0}function mouse_up(mkey){if(mkey>=0&&mkey<=2){if(CT_ContainerMKeyUp[mkey]===1)return 1}else cprint("ERROR 8 : Mouse key value beyond range. KeyCode : "+String(mkey));return 0}function mouse_x(){if(CT_MousePosX>CT_CanvasW)CT_MousePosX=CT_CanvasW;return CT_MousePosX}function mouse_y(){if(CT_MousePosY>CT_CanvasH)CT_MousePosY=CT_CanvasH;return CT_MousePosY}function mouse_wheel(mkey){if(mkey===0||mkey===1){if(CT_ContainerMWheel[mkey]===1)return 1}else cprint("ERROR 9 : The mouse wheel direction is error. KeyCode : "+String(mkey));return 0}function touchkey_create(id,x,y,w,h,key){if(CT_ContainerTouchKey[id]==null)if(w>0&&h>0)if(key>=0&&key<=255)CT_ContainerTouchKey[id]=[x,y,w,h,key,-1,0];else cprint("ERROR 7 : Key value beyond range. KeyCode : "+String(key));else cprint("ERROR 17 : Unable to create virtual key. TouchKeyID : "+String(id));else cprint("ERROR 16 : Virtual key have been created. TouchKeyID : "+String(id))}function touchkey_delete(id){if(CT_ContainerTouchKey[id]!=null)CT_ContainerTouchKey[id]=null;else cprint("ERROR 18 : The virtual key is not created. TouchKeyID : "+String(id))}function touchkey_image(id,img){if(CT_ContainerTouchKey[id]!=null)CT_ContainerTouchKey[id][5]=img}function cprint(str){if(CT_DEBUG_MODE===1)console.log(str)}function res(n){var res_name=CT_PathGetName(n);if(res_name.lastIndexOf(".")!==-1)if(res_name.lastIndexOf(".")!==0){var i;for(i=0;i<CT_ResourceList.length;i++)if(CT_ResourceList[i]!=null)if(CT_ResourceList[i][0]===n)return i;cprint("ERROR 0 : The resource file is not found : "+n)}else cprint("ERROR 2 : The resource file name is error : "+n);else cprint("ERROR 3 : The resource file type is not supoort : "+n);return-1}function color(r,g,b,a){var red="00";var green="00";var blue="00";var alpha="00";if(r>=0&&r<=255)if(r>=0&&r<=15)red="0"+r.toString(16);else red=r.toString(16);else cprint("ERROR 15 : The color value is error. ColorValue : "+String(r));if(g>=0&&g<=255)if(g>=0&&g<=15)green="0"+g.toString(16);else green=g.toString(16);else cprint("ERROR 15 : The color value is error. ColorValue : "+String(g));if(b>=0&&b<=255)if(b>=0&&b<=15)blue="0"+b.toString(16);else blue=b.toString(16);else cprint("ERROR 15 : The color value is error. ColorValue : "+String(b));if(a>=0&&a<=255)if(a>=0&&a<=15)alpha="0"+a.toString(16);else alpha=a.toString(16);else cprint("ERROR 15 : The color value is error.ColorValue : "+String(a));var color_code="#"+red+green+blue+alpha;return color_code}function string_pxwidth(str,size){CT_Ctx.font=String(size)+"px Arial";var text_w=CT_Ctx.measureText(str);return text_w.width}function view_set_x(x){if(CT_RunnerStatus===1)if(x!==CT_ViewLastX){CT_ViewX=x;CT_ViewLastX=x;CT_InterfaceRepaint()}}function view_set_y(y){if(CT_RunnerStatus===1)if(y!==CT_ViewLastY){CT_ViewY=y;CT_ViewLastY=y;CT_InterfaceRepaint()}}function view_x(){return CT_ViewX}function view_y(){return CT_ViewY}function rectab_open(name){if(name.indexOf("/")===-1&&name.indexOf("*")===-1&&name.indexOf(":")===-1&&name.indexOf("?")===-1&&name.indexOf("\x3c")===-1&&name.indexOf("\x3e")===-1&&name.indexOf("|")===-1)CT_RectabName=name;else cprint("ERROR 10 : The record table name is error : "+name)}function rectab_close(){CT_RectabName="default"}function rectab_delete(name){if(name.indexOf("/")===-1&&name.indexOf("*")===-1&&name.indexOf(":")===-1&&name.indexOf("?")===-1&&name.indexOf("\x3c")===-1&&name.indexOf("\x3e")===-1&&name.indexOf("|")===-1)localStorage.setItem(name,"");else cprint("ERROR 10 : The record table name is error : "+name)}function rectab_write(title,text){var rectab_list=localStorage.getItem(CT_RectabName);if(title.indexOf("\u2518")===-1)if(text.indexOf("\u2518")===-1)if(rectab_list===null)localStorage.setItem(CT_RectabName,title+"\x3d"+text+"\u2518");else{var title_pos=rectab_list.indexOf(title);if(title_pos===-1){var rectab_list=rectab_list+title+"\x3d"+text+"\u2518";localStorage.setItem(CT_RectabName,rectab_list)}else{var title_pos=rectab_list.indexOf(title);var data_pos=title_pos+title.length+1;var data_end_pos;var i=data_pos;while(i<=rectab_list.length){if(rectab_list[i]==="\u2518"){data_end_pos=i;break}i+=1}var replace_data=rectab_list.slice(data_pos,data_end_pos);var replace_part=title+"\x3d"+replace_data+"\u2518";rectab_list=rectab_list.replace(replace_part,title+"\x3d"+text+"\u2518");localStorage.setItem(CT_RectabName,rectab_list)}}else cprint("ERROR 12 : The record table text is error : "+text);else cprint("ERROR 11 : The record table title is error : "+title)}function rectab_read(title){var rectab_list=localStorage.getItem(CT_RectabName);if(rectab_list===null)return"";else if(title.indexOf("\u2518")===-1){var title_pos=rectab_list.indexOf(title);var data_pos=title_pos+title.length+1;var data_end_pos;var i=data_pos;while(i<=rectab_list.length){if(rectab_list[i]==="\u2518"){data_end_pos=i;break}i+=1}var re=rectab_list.slice(data_pos,data_end_pos);return re}else cprint("ERROR 11 : The record table title is error : "+title);return""}function rectab_null(title){var rectab_list=localStorage.getItem(CT_RectabName);if(title.indexOf("\u2518")===-1){if(rectab_list!=null){var title_pos=rectab_list.indexOf(title);if(title_pos!==-1){var title_pos=rectab_list.indexOf(title);var data_pos=title_pos+title.length+1;var data_end_pos;var i=data_pos;while(i<=rectab_list.length){if(rectab_list[i]==="\u2518"){data_end_pos=i;break}i+=1}var delete_data=rectab_list.slice(title_pos,data_end_pos+1);rectab_list=rectab_list.replace(delete_data,"");localStorage.setItem(CT_RectabName,rectab_list)}}}else cprint("ERROR 11 : The record table title is error : "+title)}function CTscene(){this.width=960;this.height=540;this.grid_width=30;this.grid_height=30;this.tile_image=[];this.tile_map=[];this.sprite_map=function(){};this.type=-1}function scene_enter(scene){CT_RunnerStatus=0;CT_RunnerReset();if(scene.type===-1){CT_sceneWidth=scene.width;CT_sceneHeight=scene.height;CT_GridWidth=scene.grid_width;CT_GridHeight=scene.grid_height;if(CT_sceneWidth>0&&CT_sceneHeight>0&&CT_GridWidth>0&&CT_GridHeight)if(CT_sceneWidth>=CT_GridWidth&&CT_sceneHeight>=CT_GridHeight){var ti=scene.tile_image;var tm=scene.tile_map;var i;var tile_x=0;var tile_y=0;for(i=0;i<tm.length;i++)if(tm[i]!=null){var i2;for(i2=0;i2<tm[i].length;i2++){if(tile_y<CT_sceneHeight){if(tile_x<CT_sceneWidth){if(tm[i][i2]!==0){var ti_i=0;var ti_width=CT_ResourceList[ti[ti_i]][2];var ti_height=CT_ResourceList[ti[ti_i]][3];var ti_gxn=parseInt(ti_width/CT_GridWidth);var ti_gyn=parseInt(ti_height/CT_GridHeight);var ti_gx=-1;var ti_gy=0;var ti_index=tm[i][i2];var i3;for(i3=0;i3<ti_index;i3++){if(ti_gy<ti_gyn){if(ti_gx<ti_gxn)ti_gx+=1;if(ti_gx>=ti_gxn){ti_gx=0;ti_gy+=1}}if(ti_gy>=ti_gyn){ti_gx=0;ti_gy=0;ti_i++;if(ti_i>ti.length-1)cprint("ERROR 200 : Beyond range of tile image group. TileImageIndex : "+String(ti_i))}}CT_TileBuild(i,tile_x,tile_y,ti[ti_i],ti_gx,ti_gy)}tile_x+=CT_GridWidth}if(tile_x>=CT_sceneWidth){tile_x=0;tile_y+=CT_GridHeight}}if(tile_y>=CT_sceneHeight){tile_x=0;tile_y=0}}}scene.sprite_map()}else cprint("ERROR 201 : The size of the scene must be greater than the grid size");else cprint("ERROR 202 : Unable to enter the scene")}else cprint("ERROR 203 : The specified scene is not a scene object");CT_InterfaceRepaint()}function m(x,y,CTsprite){var id=CTsprite.id;if(CTsprite.type===-2){var image=CTsprite.image;var image_w=0;var image_h=0;if(image!==-1){image_w=CT_ResourceList[image][2];image_h=CT_ResourceList[image][3]}var layer=CTsprite.layer;var subimg=CTsprite.subimg;var subnum=CTsprite.subnum;if(subnum>=1)if(subimg<=subnum-1){var subimg_w=parseInt(image_w/subnum);var subimg_h=image_h;var conspr_i=CT_ContainerSpriteIndex;CT_ContainerSprite[conspr_i]=[id,layer,x,y,image,subimg,subnum,subimg_w,subimg_h,x,y];CT_TaskCreated(conspr_i,CTsprite.main,CTsprite.loop);CT_ContainerSpriteIndex++}}}function tile_create(l,x,y,res,gx,gy){if(CT_RunnerStatus===1){var tix=gx*CT_GridWidth;var tiy=gy*CT_GridHeight;var tile_i=CT_ContainerTileIndex;if(CT_ContainerTile.length>0){var i;for(i=0;i<CT_ContainerTile.length;i++)if(CT_ContainerTile[i]==null){CT_ContainerTile[i]=[l,x,y,res,tix,tiy];CT_InterfaceRepaint();return}CT_ContainerTile[tile_i]=[l,x,y,res,tix,tiy];CT_ContainerTileIndex++;CT_InterfaceRepaint()}else{CT_ContainerTile[tile_i]=[l,x,y,res,tix,tiy];CT_ContainerTileIndex++;CT_InterfaceRepaint()}}}function tile_destroy(l,x,y){if(CT_RunnerStatus===1){var i;for(i=0;i<CT_ContainerTile.length;i++)if(CT_ContainerTile[i]!=null){var tl=CT_ContainerTile[i][0];if(tl===l){var tx=CT_ContainerTile[i][1];var ty=CT_ContainerTile[i][2];if(x===tx&&y===ty){CT_ContainerTile[i]=null;CT_InterfaceRepaint();break}}}}}function tile_check(l,x,y){if(CT_RunnerStatus===1){var i;for(i=0;i<CT_ContainerTile.length;i++)if(CT_ContainerTile[i]!=null){var tl=CT_ContainerTile[i][0];if(tl===l){var tx=CT_ContainerTile[i][1];var ty=CT_ContainerTile[i][2];var gw=CT_GridWidth;var gh=CT_GridHeight;if(x>=tx&&y>=ty&&x<=tx+gw&&y<=ty+gh)return 1}}}return 0}function CTsprite(){this.image=-1;this.layer=0;this.subnum=1;this.subimg=0;this.collision_type=0;this.collision_edge=0;this.main=function(){};this.loop=function(){};this.id=CT_SpriteGetId();this.type=-2}function sprite_create(x,y,CTsprite){if(CT_RunnerStatus===1){var id=CTsprite.id;if(CTsprite.type===-2){var image=CTsprite.image;var image_w=0;var image_h=0;if(image!==-1){image_w=CT_ResourceList[image][2];image_h=CT_ResourceList[image][3]}var layer=CTsprite.layer;var subimg=CTsprite.subimg;var subnum=CTsprite.subnum;if(subnum>=1)if(subimg<=subnum-1){var subimg_w=parseInt(image_w/subnum);var subimg_h=image_h;var conspr_i=CT_ContainerSpriteIndex;if(CT_ContainerSprite.length>0){var i;for(i=0;i<CT_ContainerSprite.length;i++)if(CT_ContainerSprite[i]==null){CT_ContainerSprite[i]=[id,layer,x,y,image,subimg,subnum,subimg_w,subimg_h,x,y];CT_TaskCreated(i,CTsprite.main,CTsprite.loop);CT_InterfaceRepaint();return i}CT_ContainerSprite[conspr_i]=[id,layer,x,y,image,subimg,subnum,subimg_w,subimg_h,x,y];CT_TaskCreated(conspr_i,CTsprite.main,CTsprite.loop);CT_ContainerSpriteIndex++;CT_InterfaceRepaint();return conspr_i}else{CT_ContainerSprite[conspr_i]=[id,layer,x,y,image,subimg,subnum,subimg_w,subimg_h,x,y];CT_TaskCreated(conspr_i,CTsprite.main,CTsprite.loop);CT_ContainerSpriteIndex++;CT_InterfaceRepaint();return conspr_i}}else cprint("ERROR 206 : The sprite subimage index is greater than the number of subimage. SubimageIndex : "+String(subimg));else cprint("ERROR 207 : Sprite subimage number error. SubimageIndex : "+String(subimg))}else cprint("ERROR 208 : Not is sprite object. SpriteID : "+String(id))}return-1}function sprite_destroy(){if(CT_RunnerStatus===1){CT_ContainerSprite[CT_TaskRunIndex]=null;CT_TaskDestroy(CT_TaskRunIndex);CT_InterfaceRepaint()}}function sprite_x(){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var x=CT_ContainerSprite[CT_TaskRunIndex][2];return x}return-1}function sprite_y(){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var y=CT_ContainerSprite[CT_TaskRunIndex][3];return y}return-1}function sprite_set_x(x){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){CT_ContainerSprite[CT_TaskRunIndex][2]=x;CT_InterfaceRepaint()}}function sprite_set_y(y){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){CT_ContainerSprite[CT_TaskRunIndex][3]=y;CT_InterfaceRepaint()}}function sprite_set_subimg(index){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var spr_subnum=CT_ContainerSprite[CT_TaskRunIndex][6];if(index<=spr_subnum-1){CT_ContainerSprite[CT_TaskRunIndex][5]=index;CT_InterfaceRepaint()}else cprint("ERROR 206 : The sprite subimage index is greater than the number of subimage. SubimageIndex : "+String(index))}}function spritenum_set(i,n){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null)CT_TaskSetNum(CT_TaskRunIndex,i,n)}function spritestr_set(i,s){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null)CT_TaskSetStr(CT_TaskRunIndex,i,s)}function spritenum(i){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var var_n=CT_TaskNum(CT_TaskRunIndex,i);return var_n}return 0}function spritestr(i){if(CT_RunnerStatus===1)if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var var_s=CT_TaskStr(CT_TaskRunIndex,i);return var_s}return 0}function sprite_collision(collspr){if(CT_RunnerStatus===1)if(collspr.type===-2){if(collspr.collision_type===0){var spr_x=sprite_x();var spr_y=sprite_y();if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var spr_collw=CT_ContainerSprite[CT_TaskRunIndex][7];var spr_collh=CT_ContainerSprite[CT_TaskRunIndex][8];var spr_l=CT_ContainerSprite[CT_TaskRunIndex][1];var i;for(i=0;i<CT_ContainerSprite.length;i++)if(CT_ContainerSprite[i]!=null){var cspr_l=CT_ContainerSprite[i][1];if(spr_l===cspr_l){var cspr_id=CT_ContainerSprite[i][0];if(cspr_id===collspr.id){var cspr_x=CT_ContainerSprite[i][2];var cspr_y=CT_ContainerSprite[i][3];var cspr_collw=CT_ContainerSprite[i][7];var cspr_collh=CT_ContainerSprite[i][8];if(collspr.collision_edge===0)if(spr_x+spr_collw>cspr_x&&spr_x<cspr_x+cspr_collw&&spr_y+spr_collh>cspr_y&&spr_y<cspr_y+cspr_collh)return 1;if(collspr.collision_edge===1)if(spr_x+spr_collw>cspr_x&&spr_x<cspr_x+cspr_collw&&spr_y+spr_collh>cspr_y&&spr_y<cspr_y+cspr_collh){var spr_lx=CT_ContainerSprite[CT_TaskRunIndex][9];var spr_ly=CT_ContainerSprite[CT_TaskRunIndex][10];CT_ContainerSprite[CT_TaskRunIndex][2]=spr_lx;CT_ContainerSprite[CT_TaskRunIndex][3]=spr_ly;CT_InterfaceRepaint();return 1}}}}}}if(collspr.collision_type===1){var spr_x=sprite_x();var spr_y=sprite_y();if(CT_ContainerSprite[CT_TaskRunIndex]!=null){var spr_collw=CT_ContainerSprite[CT_TaskRunIndex][7];var spr_collh=CT_ContainerSprite[CT_TaskRunIndex][8];var spr_l=CT_ContainerSprite[CT_TaskRunIndex][1];var spr_r=parseInt(spr_collw/2);var spr_cx=spr_x+spr_r;var spr_cy=spr_y+spr_r;var i;for(i=0;i<CT_ContainerSprite.length;i++)if(CT_ContainerSprite[i]!=null){var cspr_l=CT_ContainerSprite[i][1];if(spr_l===cspr_l){var cspr_id=CT_ContainerSprite[i][0];if(cspr_id===collspr.id){var cspr_x=CT_ContainerSprite[i][2];var cspr_y=CT_ContainerSprite[i][3];var cspr_collw=CT_ContainerSprite[i][7];var cspr_collh=CT_ContainerSprite[i][8];var cspr_r=parseInt(cspr_collw/2);var cspr_cx=cspr_x+cspr_r;var cspr_cy=cspr_y+cspr_r;var spr_distance=Math.sqrt(Math.pow(spr_cx-cspr_cx,2)+Math.pow(spr_cy-cspr_cy,2));if(collspr.collision_edge===0)if(spr_distance<spr_r+cspr_r)return 1;if(collspr.collision_edge===1)if(spr_distance<spr_r+cspr_r){var spr_lx=CT_ContainerSprite[CT_TaskRunIndex][9];var spr_ly=CT_ContainerSprite[CT_TaskRunIndex][10];CT_ContainerSprite[CT_TaskRunIndex][2]=spr_lx;CT_ContainerSprite[CT_TaskRunIndex][3]=spr_ly;CT_InterfaceRepaint();return 1}}}}}}}else cprint("ERROR 208 : Not is sprite object. ObjectID : "+String(id));return 0}function sprite_check(x,y,sprite){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSprite.length;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){var spr_x=CT_ContainerSprite[i][2];var spr_y=CT_ContainerSprite[i][3];var spr_collw=CT_ContainerSprite[i][7];var spr_collh=CT_ContainerSprite[i][8];if(x>=spr_x&&y>=spr_y&&x<=spr_x+spr_collw&&y<=spr_y+spr_collh)return 1}}}else cprint("ERROR 208 : Not is sprite object. ObjectID : "+String(id))}return 0}function sprite_index(){return CT_TaskRunIndex}function isprite_destroy(si){if(CT_RunnerStatus===1)if(CT_ContainerSprite[si]!=null){CT_ContainerSprite[si]=null;CT_TaskDestroy(si);CT_InterfaceRepaint()}}function isprite_x(si){if(CT_RunnerStatus===1)if(CT_ContainerSprite[si]!=null){var x=CT_ContainerSprite[si][2];return x}else cprint("ERROR 209 : The sprite is null. SpriteIndex : "+String(si));return-1}function isprite_y(si){if(CT_RunnerStatus===1)if(CT_ContainerSprite[si]!=null){var y=CT_ContainerSprite[si][3];return y}else cprint("ERROR 209 : The sprite is null. SpriteIndex : "+String(si));return-1}function isprite_set_x(si,x){if(CT_RunnerStatus===1)if(CT_ContainerSprite[si]!=null){CT_ContainerSprite[si][2]=x;CT_InterfaceRepaint()}}function isprite_set_y(si,y){if(CT_RunnerStatus===1)if(CT_ContainerSprite[si]!=null){CT_ContainerSprite[si][3]=y;CT_InterfaceRepaint()}}function isprite_set_subimg(si,index){if(CT_RunnerStatus===1)if(CT_ContainerSprite[si]!=null){var spr_subnum=CT_ContainerSprite[si][6];if(index<=spr_subnum-1){CT_ContainerSprite[si][5]=index;CT_InterfaceRepaint()}else cprint("ERROR 206 : The sprite subimage index is greater than the number of subimage. SubimageIndex : "+String(index))}else cprint("ERROR 209 : The sprite is null. SpriteIndex : "+String(si))}function ispritenum_set(si,i,n){if(CT_RunnerStatus===1)if(CT_ContainerSprite[si]!=null)CT_TaskSetNum(si,i,n);else cprint("ERROR 209 : The sprite is null. SpriteIndex : "+String(si))}function ispritestr_set(si,i,s){if(CT_RunnerStatus===1)if(CT_ContainerSprite[si]!=null)CT_TaskSetStr(si,i,s);else cprint("ERROR 209 : The sprite is null. SpriteIndex : "+String(si))}function ispritenum(si,i){if(CT_RunnerStatus===1)if(CT_ContainerSprite[si]!=null){var var_n=CT_TaskNum(si,i);return var_n}else cprint("ERROR 209 : The sprite is null. SpriteIndex : "+String(si));return 0}function ispritestr(si,i){if(CT_RunnerStatus===1)if(CT_ContainerSprite[si]!=null){var var_s=CT_TaskStr(si,i);return var_s}return 0}function sprite_destroy_all(sprite){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSprite.length;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){CT_ContainerSprite[i]=null;CT_TaskDestroy(i);CT_InterfaceRepaint()}}}}}function sprite_all_set_x(sprite,x){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSprite.length;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){CT_ContainerSprite[i][2]=x;CT_InterfaceRepaint()}}}}}function sprite_all_set_y(sprite,y){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSprite.length;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){CT_ContainerSprite[i][3]=y;CT_InterfaceRepaint()}}}}}function sprite_all_set_subimg(sprite,index){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSprite.length;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id){var spr_subnum=CT_ContainerSprite[i][6];if(index<=spr_subnum-1){CT_ContainerSprite[i][5]=index;CT_InterfaceRepaint()}else cprint("ERROR 206 : The sprite subimage index is greater than the number of subimage. SubimageIndex : "+String(index))}}}}}function spritenum_all_set(sprite,vi,n){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSprite.length;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id)CT_TaskSetNum(i,vi,n)}}}}function spritestr_all_set(sprite,vi,s){if(CT_RunnerStatus===1){var id=sprite.id;if(sprite.type===-2){var i;for(i=0;i<CT_ContainerSprite.length;i++)if(CT_ContainerSprite[i]!=null){var spr_id=CT_ContainerSprite[i][0];if(spr_id===id)CT_TaskSetStr(i,vi,s)}}}}function timer_set(timer,time){var i;for(i=0;i<CT_ContainerTimer.length;i++){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer){cprint("ERROR 20 : The timer have been created : "+timer);return}}if(time>=.017)if(CT_ContainerTimer.length>0){var i2;for(i2=0;i2<CT_ContainerTimer.length;i2++)if(CT_ContainerTimer[i2]==null){var time_frame=parseInt(time*60);CT_ContainerTimer[i2]=[timer,time_frame,time_frame,0,0];return}var time_frame=parseInt(time*60);CT_ContainerTimer[CT_ContainerTimerIndex]=[timer,time_frame,time_frame,0,0];CT_ContainerTimerIndex++}else{var time_frame=parseInt(time*60);CT_ContainerTimer[CT_ContainerTimerIndex]=[timer,time_frame,time_frame,0,0];CT_ContainerTimerIndex++}else cprint("ERROR 13 : The timer duration than the minimum. Time : "+String(time))}function timer_clear(timer){var i;for(i=0;i<CT_ContainerTimer.length;i++){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer)CT_ContainerTimer[i]=null}}function timer_run(timer){var i;for(i=0;i<CT_ContainerTimer.length;i++)if(CT_ContainerTimer[i]!=null){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer){CT_ContainerTimer[i][3]=1;return}}cprint("ERROR 14 : Timer invalid : "+timer)}function timer_stop(timer){var i;for(i=0;i<CT_ContainerTimer.length;i++)if(CT_ContainerTimer[i]!=null){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer){var timer_duration=CT_ContainerTimer[i][2];CT_ContainerTimer[i][1]=timer_duration;CT_ContainerTimer[i][3]=0;return}}cprint("ERROR 14 : Timer invalid : "+timer)}function timer_pause(timer){var i;for(i=0;i<CT_ContainerTimer.length;i++)if(CT_ContainerTimer[i]!=null){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer){CT_ContainerTimer[i][3]=0;return}}cprint("ERROR 14 : Timer invalid : "+timer)}function timer_end(timer){var i;for(i=0;i<CT_ContainerTimer.length;i++)if(CT_ContainerTimer[i]!=null){var timer_name=CT_ContainerTimer[i][0];if(timer_name===timer){if(CT_ContainerTimer[i][3]===2)return 1;return 0}}cprint("ERROR 14 : Timer invalid : "+timer);return 0}function globaltimer_set(timer,time){var i;for(i=0;i<CT_ContainerGlobalTimer.length;i++){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer){cprint("ERROR 20 : The timer have been created : "+timer);return}}if(time>=.017)if(CT_ContainerGlobalTimer.length>0){var i2;for(i2=0;i2<CT_ContainerGlobalTimer.length;i2++)if(CT_ContainerGlobalTimer[i2]==null){var time_frame=parseInt(time*60);CT_ContainerGlobalTimer[i2]=[timer,time_frame,time_frame,0,0];return}var time_frame=parseInt(time*60);CT_ContainerGlobalTimer[CT_ContainerGlobalTimerIndex]=[timer,time_frame,time_frame,0,0];CT_ContainerGlobalTimerIndex++}else{var time_frame=parseInt(time*60);CT_ContainerGlobalTimer[CT_ContainerGlobalTimerIndex]=[timer,time_frame,time_frame,0,0];CT_ContainerGlobalTimerIndex++}else cprint("ERROR 13 : The timer duration than the minimum. Time : "+String(time))}function globaltimer_clear(timer){var i;for(i=0;i<CT_ContainerGlobalTimer.length;i++){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer)CT_ContainerGlobalTimer[i]=null}}function globaltimer_run(timer){var i;for(i=0;i<CT_ContainerGlobalTimer.length;i++)if(CT_ContainerGlobalTimer[i]!=null){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer){CT_ContainerGlobalTimer[i][3]=1;return}}cprint("ERROR 14 : Timer invalid : "+timer)}function globaltimer_stop(timer){var i;for(i=0;i<CT_ContainerGlobalTimer.length;i++)if(CT_ContainerGlobalTimer[i]!=null){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer){var timer_duration=CT_ContainerGlobalTimer[i][2];CT_ContainerGlobalTimer[i][1]=timer_duration;CT_ContainerGlobalTimer[i][3]=0;return}}cprint("ERROR 14 : Timer invalid : "+timer)}function globaltimer_pause(timer){var i;for(i=0;i<CT_ContainerGlobalTimer.length;i++)if(CT_ContainerGlobalTimer[i]!=null){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer){CT_ContainerGlobalTimer[i][3]=0;return}}cprint("ERROR 14 : Timer invalid : "+timer)}function globaltimer_end(timer){var i;for(i=0;i<CT_ContainerGlobalTimer.length;i++)if(CT_ContainerGlobalTimer[i]!=null){var timer_name=CT_ContainerGlobalTimer[i][0];if(timer_name===timer){if(CT_ContainerGlobalTimer[i][3]===2)return 1;return 0}}cprint("ERROR 14 : Timer invalid : "+timer);return 0}function CTwindow(){this.x=0;this.y=0;this.width=300;this.height=200;this.color_background=color(228,226,211,255);this.color_borderUp=color(170,168,153,255);this.color_borderDown=color(170,168,153,255);this.color_borderLeft=color(170,168,153,255);this.color_borderRight=color(170,168,153,255);this.image=-1;this.layer=0;this.type=0;this.index=-1;this.id=CT_UIGetId()}function CTbutton(){this.x=0;this.y=0;this.width=60;this.height=30;this.color_background=color(203,201,183,255);this.color_borderUp=color(181,179,162,255);this.color_borderDown=color(181,179,162,255);this.color_borderLeft=color(181,179,162,255);this.color_borderRight=color(181,179,162,255);this.background=-1;this.color_text=color(0,0,0,255);this.text="Button";this.index=-1;this.type=1;this.id=CT_UIGetId()}function CTtext(){this.x=0;this.y=0;this.color_text=color(0,0,0,255);this.text="Text";this.size=16;this.index=-1;this.type=2;this.id=CT_UIGetId()}function CTcheckbox(){this.x=0;this.y=0;this.color_border=color(181,179,162,255);this.color_background=color(255,255,255,255);this.color_widget=color(34,172,56,255);this.status=0;this.index=-1;this.type=3;this.id=CT_UIGetId()}function CTradio(){this.x=0;this.y=0;this.color_background=color(255,255,255,255);this.color_border=color(181,179,162,255);this.color_widget=color(34,172,56,255);this.group=0;this.index=-1;this.type=4;this.id=CT_UIGetId()}function CTprogressbar(){this.x=0;this.y=0;this.width=80;this.height=30;this.color_background=color(255,255,255,255);this.color_borderUp=color(181,179,162,255);this.color_borderDown=color(181,179,162,255);this.color_borderLeft=color(181,179,162,255);this.color_borderRight=color(181,179,162,255);this.color_widget=color(34,172,56,255);this.background=-1;this.value=0;this.maxvalue=10;this.index=-1;this.type=5;this.id=CT_UIGetId()}function CTtextbox(){this.x=0;this.y=0;this.width=250;this.height=30;this.color_background=color(255,255,255,255);this.color_borderUp=color(181,179,162,255);this.color_borderDown=color(181,179,162,255);this.color_borderLeft=color(181,179,162,255);this.color_borderRight=color(181,179,162,255);this.color_text="#000000";this.background=-1;this.password=0;this.number=0;this.max=20;this.readonly=0;this.subbox=0;this.name="Title";this.index=-1;this.type=6;this.id=CT_UIGetId()}function CTwindow_create(CTwindow){if(CT_RunnerStatus===1)if(CTwindow.type===0){var id=CTwindow.id;var i;for(i=0;i<CT_ContainerWindow.length;i++)if(CT_ContainerWindow[i]!=null){var win_id=CT_ContainerWindow[i][0];if(win_id===id){cprint("ERROR 100 : Window have been created. WindowID : "+String(id));return}}var x=CTwindow.x;var y=CTwindow.y;var w=CTwindow.width;var h=CTwindow.height;var l=CTwindow.layer;var cbg=CTwindow.color_background;var cbu=CTwindow.color_borderUp;var cbd=CTwindow.color_borderDown;var cbl=CTwindow.color_borderLeft;var cbr=CTwindow.color_borderRight;var bi=CTwindow.image;if(w>0&&h>0)if(CT_ContainerWindow.length>0){var i2;for(i2=0;i2<CT_ContainerWindow.length;i2++)if(CT_ContainerWindow[i2]==null){CT_ContainerWindow[i2]=[id,l,x,y,w,h,cbg,cbu,cbd,cbl,cbr,bi];CTwindow.index=i2;CT_InterfaceRepaint();return}CT_ContainerWindow[CT_ContainerWindowIndex]=[id,l,x,y,w,h,cbg,cbu,cbd,cbl,cbr,bi];CTwindow.index=CT_ContainerWindowIndex;CT_ContainerWindowIndex++;CT_InterfaceRepaint()}else{CT_ContainerWindow[CT_ContainerWindowIndex]=[id,l,x,y,w,h,cbg,cbu,cbd,cbl,cbr,bi];CTwindow.index=CT_ContainerWindowIndex;CT_ContainerWindowIndex++;CT_InterfaceRepaint()}else cprint("ERROR 101 : Unable to create window. WindowID : "+String(id))}else cprint("ERROR 113 : Not is window object. ObjectID : "+String(CTwindow.id))}function CTwindow_destroy(CTwindow){if(CT_RunnerStatus===1)if(CTwindow.type===0){var win_index=CTwindow.index;CT_ContainerWindow[CTwindow.index]=null;var i;for(i=0;i<CT_ContainerUI.length;i++)if(CT_ContainerUI[i]!=null){var ui_win_index=CT_ContainerUI[i][1];if(ui_win_index===win_index)CT_ContainerUI[i]=null}CT_InterfaceRepaint()}else cprint("ERROR 113 : Not is window object. ObjectID : "+String(CTwindow.id))}function CTwindow_set_x(CTwindow,x){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){CT_ContainerWindow[CTwindow.index][2]=x;CT_InterfaceRepaint()}}else cprint("ERROR 113 : Not is window object. ObjectID : "+String(CTwindow.id))}function CTwindow_set_y(CTwindow,y){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){CT_ContainerWindow[CTwindow.index][3]=y;CT_InterfaceRepaint()}}else cprint("ERROR 113 : Not is window object. ObjectID : "+String(CTwindow.id))}function CTwindow_set_width(CTwindow,w){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){CT_ContainerWindow[CTwindow.index][4]=w;CT_InterfaceRepaint()}}else cprint("ERROR 113 : Not is window object. ObjectID : "+String(CTwindow.id))}function CTwindow_set_height(CTwindow,h){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){CT_ContainerWindow[CTwindow.index][5]=h;CT_InterfaceRepaint()}}else cprint("ERROR 113 : Not is window object. ObjectID : "+String(CTwindow.id))}function CTwindow_set_image(CTwindow,i){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){CT_ContainerWindow[CTwindow.index][11]=i;CT_InterfaceRepaint()}}else cprint("ERROR 113 : Not is window object. ObjectID : "+String(CTwindow.id))}function CTwindow_set_color(CTwindow,prop,col){if(CT_RunnerStatus===1)if(CTwindow.type===0){if(CT_ContainerWindow[CTwindow.index]!=null){if(prop==="back"){CT_ContainerWindow[CTwindow.index][6]=col;CT_InterfaceRepaint()}if(prop==="up"){CT_ContainerWindow[CTwindow.index][7]=col;CT_InterfaceRepaint()}if(prop==="down"){CT_ContainerWindow[CTwindow.index][8]=col;CT_InterfaceRepaint()}if(prop==="left"){CT_ContainerWindow[CTwindow.index][9]=col;CT_InterfaceRepaint()}if(prop==="right"){CT_ContainerWindow[CTwindow.index][10]=col;CT_InterfaceRepaint()}}}else cprint("ERROR 113 : Not is window object. ObjectID : "+String(CTwindow.id))}function CTui_create(CTwindow,CTui){if(CT_RunnerStatus===1)if(CTwindow.type===0){var id=CTui.id;var i;for(i=0;i<CT_ContainerUI.length;i++)if(CT_ContainerUI[i]!=null){var ui_id=CT_ContainerUI[i][0];if(ui_id===id){cprint("ERROR 102 : The UI object has been created. UIobjectID : "+String(id));return}}var win_index=CTwindow.index;var type=CTui.type;if(type===1){var x=CTui.x;var y=CTui.y;var w=CTui.width;var h=CTui.height;var cbg=CTui.color_background;var cbu=CTui.color_borderUp;var cbd=CTui.color_borderDown;var cbl=CTui.color_borderLeft;var cbr=CTui.color_borderRight;var ct=CTui.color_text;var bi=CTui.background;var text=CTui.text;var text_w=string_pxwidth(text,16);var text_h=16;if(w>0&&h>0)if(CT_ContainerUI.length>0){var i2;for(i2=0;i2<CT_ContainerUI.length;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,w,h,cbg,cbu,cbd,cbl,cbr,ct,bi,text,text_w,text_h,0,0,0,0];CTui.index=i2;CT_InterfaceRepaint();return}CT_ContainerUI[CT_ContainerUIIndex]=[id,win_index,type,x,y,w,h,cbg,cbu,cbd,cbl,cbr,ct,bi,text,text_w,text_h,0,0,0,0];CTui.index=CT_ContainerUIIndex;CT_ContainerUIIndex++;CT_InterfaceRepaint()}else{CT_ContainerUI[CT_ContainerUIIndex]=[id,win_index,type,x,y,w,h,cbg,cbu,cbd,cbl,cbr,ct,bi,text,text_w,text_h,0,0,0,0];CTui.index=CT_ContainerUIIndex;CT_ContainerUIIndex++;CT_InterfaceRepaint()}else cprint("ERROR 103 : Unable to create button. UIobjectID : "+String(id))}if(type===2){var x=CTui.x;var y=CTui.y;var ct=CTui.color_text;var text=CTui.text;var ts=CTui.size;var id=CTui.id;if(CT_ContainerUI.length>0){var i2;for(i2=0;i2<CT_ContainerUI.length;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,ct,text,ts];CTui.index=i2;CT_InterfaceRepaint();return}CT_ContainerUI[CT_ContainerUIIndex]=[id,win_index,type,x,y,ct,text,ts];CTui.index=CT_ContainerUIIndex;CT_ContainerUIIndex++;CT_InterfaceRepaint()}else{CT_ContainerUI[CT_ContainerUIIndex]=[id,win_index,type,x,y,ct,text,ts];CTui.index=CT_ContainerUIIndex;CT_ContainerUIIndex++;CT_InterfaceRepaint()}}if(type===3){var x=CTui.x;var y=CTui.y;var w=16;var h=16;var cbg=CTui.color_background;var cb=CTui.color_border;var cw=CTui.color_widget;var id=CTui.id;var status=CTui.status;if(status===0||status===1)if(CT_ContainerUI.length>0){var i2;for(i2=0;i2<CT_ContainerUI.length;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,w,h,cbg,cb,cw,status];CTui.index=i2;CT_InterfaceRepaint();return}CT_ContainerUI[CT_ContainerUIIndex]=[id,win_index,type,x,y,w,h,cbg,cb,cw,status];CTui.index=CT_ContainerUIIndex;CT_ContainerUIIndex++;CT_InterfaceRepaint()}else{CT_ContainerUI[CT_ContainerUIIndex]=[id,win_index,type,x,y,w,h,cbg,cb,cw,status];CTui.index=CT_ContainerUIIndex;CT_ContainerUIIndex++;CT_InterfaceRepaint()}else cprint("ERROR 121 : Checkbox state error. UIobjectID : "+String(id))}if(type===4){var x=CTui.x;var y=CTui.y;var w=16;var h=16;var cbg=CTui.color_background;var cb=CTui.color_border;var cw=CTui.color_widget;var g=CTui.group;var id=CTui.id;if(g>=0){if(CT_ContainerUI.length>0){var i2;for(i2=0;i2<CT_ContainerUI.length;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,w,h,cbg,cb,cw,g,0];CTui.index=i2;CT_InterfaceRepaint();return}CT_ContainerUI[CT_ContainerUIIndex]=[id,win_index,type,x,y,w,h,cbg,cb,cw,g,0];CTui.index=CT_ContainerUIIndex;CT_ContainerUIIndex++;CT_InterfaceRepaint()}else{CT_ContainerUI[CT_ContainerUIIndex]=[id,win_index,type,x,y,w,h,cbg,cb,cw,g,0];CTui.index=CT_ContainerUIIndex;CT_ContainerUIIndex++;CT_InterfaceRepaint()}var i3;var radio_first=-1;var radio_sel=0;for(i3=0;i3<CT_ContainerUI.length;i3++)if(CT_ContainerUI[i3]!=null){var ui_type=CT_ContainerUI[i3][2];if(ui_type===4){var radio_g=CT_ContainerUI[i3][10];if(radio_g===g){if(radio_first===-1)radio_first=i3;var radio_s=CT_ContainerUI[i3][11];if(radio_s===1)radio_sel=1}}}if(radio_sel===0)CT_ContainerUI[radio_first][11]=1;CT_InterfaceRepaint()}else cprint("ERROR 106 : Invalid radio group. UIobjectID : "+String(id))}if(type===5){var x=CTui.x;var y=CTui.y;var w=CTui.width;var h=CTui.height;var cbg=CTui.color_background;var cbu=CTui.color_borderUp;var cbd=CTui.color_borderDown;var cbl=CTui.color_borderLeft;var cbr=CTui.color_borderRight;var cw=CTui.color_widget;var pi=CTui.background;var val=CTui.value;var maxval=CTui.maxvalue;var id=CTui.id;if(w>0&&h>0)if(val>=0&&maxval>0)if(val<=maxval){var w_w=parseInt((w-8)/maxval*val);if(CT_ContainerUI.length>0){var i2;for(i2=0;i2<CT_ContainerUI.length;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,w,h,cbg,cbu,cbd,cbl,cbr,cw,pi,w_w,val,maxval];CTui.index=i2;CT_InterfaceRepaint();return}CT_ContainerUI[CT_ContainerUIIndex]=[id,win_index,type,x,y,w,h,cbg,cbu,cbd,cbl,cbr,cw,pi,w_w,val,maxval];CTui.index=CT_ContainerUIIndex;CT_ContainerUIIndex++;CT_InterfaceRepaint()}else{CT_ContainerUI[CT_ContainerUIIndex]=[id,win_index,type,x,y,w,h,cbg,cbu,cbd,cbl,cbr,cw,pi,w_w,val,maxval];CTui.index=CT_ContainerUIIndex;CT_ContainerUIIndex++;CT_InterfaceRepaint()}}else cprint("ERROR 109 : The progressbar value greater than the maximum. UIobjectID : "+String(id));else cprint("ERROR 108 : Progressbar value error. UIobjectID : "+String(id));else cprint("ERROR 107 : Unable to create progressbar. UIobjectID : "+String(id))}if(type===6){var x=CTui.x;var y=CTui.y;var w=CTui.width;var h=CTui.height;var tbg=CTui.color_background;var tbu=CTui.color_borderUp;var tbd=CTui.color_borderDown;var tbl=CTui.color_borderLeft;var tbr=CTui.color_borderRight;var tc=CTui.color_text;var tb=CTui.background;var tpass=CTui.password;var tnumb=CTui.number;var tmax=CTui.max;var readonly=CTui.readonly;var subbox=CTui.subbox;var name=CTui.name;var id=CTui.id;if(w>0&&h>0)if(tpass===0||tpass===1)if(tnumb===0||tnumb===1)if(tmax>0)if(CT_ContainerUI.length>0){var i2;for(i2=0;i2<CT_ContainerUI.length;i2++)if(CT_ContainerUI[i2]==null){CT_ContainerUI[i2]=[id,win_index,type,x,y,w,h,tbg,tbu,tbd,tbl,tbr,tc,tb,"",tpass,tnumb,tmax,readonly,subbox,name];CTui.index=i2;CT_InterfaceRepaint();return}CT_ContainerUI[CT_ContainerUIIndex]=[id,win_index,type,x,y,w,h,tbg,tbu,tbd,tbl,tbr,tc,tb,"",tpass,tnumb,tmax,readonly,subbox,name];CTui.index=CT_ContainerUIIndex;CT_ContainerUIIndex++;CT_InterfaceRepaint()}else{CT_ContainerUI[CT_ContainerUIIndex]=[id,win_index,type,x,y,w,h,tbg,tbu,tbd,tbl,tbr,tc,tb,"",tpass,tnumb,tmax,readonly,subbox,name];CTui.index=CT_ContainerUIIndex;CT_ContainerUIIndex++;CT_InterfaceRepaint()}else cprint("ERROR 112 : The textbox cannot be input. UIobjectID : "+String(id));else cprint("ERROR 111 : Textbox type error. UIobjectID : "+String(id));else cprint("ERROR 111 : Textbox type error. UIobjectID : "+String(id));else cprint("ERROR 110 : Unable to create textbox. UIobjectID : "+String(id))}}else cprint("ERROR 113 : Not is window object. WindowID : "+String(CTwindow.id))}function CTui_destroy(CTui){if(CT_RunnerStatus===1)if(CTui.type>0){CT_ContainerUI[CTui.index]=null;CT_InterfaceRepaint()}else cprint("ERROR 120 : Not is UI object. UIobjectID : "+String(CTui.id))}function CTui_set_x(CTui,x){if(CT_RunnerStatus===1)if(CTui.type>=1){if(CT_ContainerUI[CTui.index]!=null){CT_ContainerUI[CTui.index][3]=x;CT_InterfaceRepaint()}}else cprint("ERROR 120 : Not is UI object. UIobjectID : "+String(CTui.id))}function CTui_set_y(CTui,y){if(CT_RunnerStatus===1)if(CTui.type>=1){if(CT_ContainerUI[CTui.index]!=null){CT_ContainerUI[CTui.index][4]=y;CT_InterfaceRepaint()}}else cprint("ERROR 120 : Not is UI object. UIobjectID : "+String(CTui.id))}function CTui_set_width(CTui,w){if(CT_RunnerStatus===1)if(CTui.type>=1){if(CT_ContainerUI[CTui.index]!=null){if(CTui.type===1||CTui.type===6){CT_ContainerUI[CTui.index][5]=w;CT_InterfaceRepaint()}if(CTui.type===5){CT_ContainerUI[CTui.index][5]=w;var p_w=CT_ContainerUI[CTui.index][5];var val=CT_ContainerUI[CTui.index][15];var p_maxval=CT_ContainerUI[CTui.index][16];var p_ww=0;if(val<p_maxval)p_ww=parseInt((p_w-8)/p_maxval*val);if(val===p_maxval)p_ww=p_w-8;CT_ContainerUI[CTui.index][14]=p_ww;CT_InterfaceRepaint()}if(CTui.type===2||CTui.type===3||CTui.type===4)cprint("ERROR 104 : The UI object not have this property. UIobjectID : "+String(CTui.id))}}else cprint("ERROR 120 : Not is UI object. UIobjectID : "+String(CTui.id))}function CTui_set_height(CTui,h){if(CT_RunnerStatus===1)if(CTui.type>=1){if(CT_ContainerUI[CTui.index]!=null){if(CTui.type===1||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][6]=h;CT_InterfaceRepaint()}if(CTui.type===2||CTui.type===3||CTui.type===4)cprint("ERROR 104 : The UI object not have this property. UIobjectID : "+String(CTui.id))}}else cprint("ERROR 120 : Not is UI object. UIobjectID : "+String(CTui.id))}function CTui_set_image(CTui,img){if(CT_RunnerStatus===1)if(CTui.type>=1){if(CT_ContainerUI[CTui.index]!=null){if(CTui.type===1||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][13]=img;CT_InterfaceRepaint()}if(CTui.type===2||CTui.type===3||CTui.type===4)cprint("ERROR 105 : The UI object not support background image. UIobjectID : "+String(CTui.id))}}else cprint("ERROR 120 : Not is UI object. UIobjectID : "+String(CTui.id))}function CTui_set_color(CTui,prop,col){if(CT_RunnerStatus===1){if(CTui.type>=1)if(CT_ContainerUI[CTui.index]!=null){if(prop==="back"){if(CTui.type===1||CTui.type===3||CTui.type===4||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][7]=col;CT_InterfaceRepaint()}if(CTui.type===2)cprint("ERROR 104 : The UI object not have this property. UIobjectID : "+String(CTui.id))}if(prop==="up"){if(CTui.type===1||CTui.type===3||CTui.type===4||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][8]=col;CT_InterfaceRepaint()}if(CTui.type===2)cprint("ERROR 104 : The UI object not have this property. UIobjectID : "+String(CTui.id))}if(prop==="down"){if(CTui.type===1||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][9]=col;CT_InterfaceRepaint()}if(CTui.type===3||CTui.type===4){CT_ContainerUI[CTui.index][8]=col;CT_InterfaceRepaint()}if(CTui.type===2)cprint("ERROR 104 : The UI object not have this property. UIobjectID : "+String(CTui.id))}if(prop==="left"){if(CTui.type===1||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][10]=col;CT_InterfaceRepaint()}if(CTui.type===3||CTui.type===4){CT_ContainerUI[CTui.index][8]=col;CT_InterfaceRepaint()}if(CTui.type===2)cprint("ERROR 104 : The UI object not have this property. UIobjectID : "+String(CTui.id))}if(prop==="right"){if(CTui.type===1||CTui.type===5||CTui.type===6){CT_ContainerUI[CTui.index][11]=col;CT_InterfaceRepaint()}if(CTui.type===3||CTui.type===4){CT_ContainerUI[CTui.index][8]=col;CT_InterfaceRepaint()}if(CTui.type===2)cprint("ERROR 104 : The UI object not have this property. UIobjectID : "+String(CTui.id))}if(prop==="text"){if(CTui.type===1||CTui.type===6)CT_ContainerUI[CTui.index][12]=col;if(CTui.type===2)CT_ContainerUI[CTui.index][5]=col;if(CTui.type===3||CTui.type===4||CTui.type===5)cprint("ERROR 104 : The UI object not have this property. UIobjectID : "+String(CTui.id))}if(prop==="widget"){if(CTui.type===3||CTui.type===4)CT_ContainerUI[CTui.index][9]=col;if(CTui.type===5)CT_ContainerUI[CTui.index][12]=col;if(CTui.type===1||CTui.type===2||CTui.type===6)cprint("ERROR 104 : The UI object not have this property. UIobjectID : "+String(CTui.id))}}}else cprint("ERROR 120 : Not is UI object. UIobjectID : "+String(CTui.id))}function button_click(CTui){if(CT_RunnerStatus===1)if(CTui.type===1){if(CT_ContainerUI[CTui.index]!=null){var b_s=CT_ContainerUI[CTui.index][17];if(b_s===1)return 1}}else cprint("ERROR 114 : Not is button object. UIobjectID : "+String(CTui.id));return 0}function button_press(CTui){if(CT_RunnerStatus===1)if(CTui.type===1){if(CT_ContainerUI[CTui.index]!=null){var b_s=CT_ContainerUI[CTui.index][18];return b_s}}else cprint("ERROR 114 : Not is button object. UIobjectID : "+String(CTui.id));return 0}function button_down(CTui){if(CT_RunnerStatus===1)if(CTui.type===1){if(CT_ContainerUI[CTui.index]!=null){var b_s=CT_ContainerUI[CTui.index][19];if(b_s===1)return 1}}else cprint("ERROR 114 : Not is button object. UIobjectID : "+String(CTui.id));return 0}function button_up(CTui){if(CT_RunnerStatus===1)if(CTui.type===1){if(CT_ContainerUI[CTui.index]!=null){var b_s=CT_ContainerUI[CTui.index][20];if(b_s===1)return 1}}else cprint("ERROR 114 : Not is button object. UIobjectID : "+String(CTui.id));return 0}function checkbox_status(CTui){if(CT_RunnerStatus===1)if(CTui.type===3){if(CT_ContainerUI[CTui.index]!=null){var c_s=CT_ContainerUI[CTui.index][10];return c_s}}else cprint("ERROR 116 : Not is checkbox object. UIobjectID : "+String(CTui.id));return 0}function radio_state(CTui){if(CT_RunnerStatus===1)if(CTui.type===4){if(CT_ContainerUI[CTui.index]!=null){var r_s=CT_ContainerUI[CTui.index][11];return r_s}}else cprint("ERROR 117 : Not is radio object. UIobjectID : "+String(CTui.id));return 0}function progressbar_set(CTui,val){if(CT_RunnerStatus===1)if(CTui.type===5){if(CT_ContainerUI[CTui.index]!=null){var p_w=CT_ContainerUI[CTui.index][5];var p_maxval=CT_ContainerUI[CTui.index][16];var bp_w=0;if(val>=0)if(val<=p_maxval){if(val<p_maxval)bp_w=parseInt((p_w-8)/p_maxval*val);if(val===p_maxval)bp_w=p_w-8;CT_ContainerUI[CTui.index][15]=val;CT_ContainerUI[CTui.index][14]=bp_w;CT_InterfaceRepaint()}else cprint("ERROR 109 : The progressbar value greater than the maximum. UIobjectID : "+String(CTui.id));else cprint("ERROR 108 : Progressbar value error. UIobjectID : "+String(CTui.id))}}else cprint("ERROR 118 : Not is progressbar object. UIobjectID : "+String(CTui.id))}function textbox_string(CTui){if(CT_RunnerStatus===1)if(CTui.type===6){if(CT_ContainerUI[CTui.index]!=null){var t_s=CT_ContainerUI[CTui.index][14];return t_s}}else cprint("ERROR 119 : Not is textbox object. UIobjectID : "+String(CTui.id));return""}function textbox_set_string(CTui,str){if(CT_RunnerStatus===1)if(CTui.type===6){if(CT_ContainerUI[CTui.index]!=null){CT_ContainerUI[CTui.index][14]=str;CT_InterfaceRepaint()}}else cprint("ERROR 119 : Not is textbox object. UIobjectID : "+String(CTui.id));return""};